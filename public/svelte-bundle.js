var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function l(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c,s;function a(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function u(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function f(t,n,o,l){return t[1]&&l?e(o.ctx.slice(),t[1](l(n))):o.ctx}function d(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function g(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function $(t,e,n){return t.set(n),e}function p(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function y(){return w("")}function k(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set?t[o]=e[o]:T(t,o,e[o])}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function E(t,e){t.value=null==e?"":e}function A(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function S(t,e,n){t.classList[n?"add":"remove"](e)}function M(t){s=t}function O(){if(!s)throw new Error("Function called outside component initialization");return s}function L(t){O().$$.on_mount.push(t)}function I(t){O().$$.on_destroy.push(t)}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const G=[],B=[],P=[],U=[],q=Promise.resolve();let D=!1;function j(t){P.push(t)}const N=new Set;let z=0;function H(){const t=s;do{for(;z<G.length;){const t=G[z];z++,M(t),F(t.$$)}for(M(null),G.length=0,z=0;B.length;)B.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];N.has(e)||(N.add(e),e())}P.length=0}while(G.length);for(;U.length;)U.pop()();D=!1,N.clear(),M(t)}function F(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const Z=new Set;let K;function V(){K={r:0,c:[],p:K}}function J(){K.r||l(K.c),K=K.p}function Y(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(Z.has(t))return;Z.add(t),K.c.push((()=>{Z.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function W(t,e){const n={},o={},l={$$scope:1};let r=t.length;for(;r--;){const i=t[r],c=e[r];if(c){for(const t in i)t in c||(o[t]=1);for(const t in c)l[t]||(n[t]=c[t],l[t]=1);t[r]=c}else for(const t in i)l[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function X(t){t&&t.c()}function tt(t,e,o,i){const{fragment:c,after_update:s}=t.$$;c&&c.m(e,o),i||j((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):l(e),t.$$.on_mount=[]})),s.forEach(j)}function et(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(G.push(t),D||(D=!0,q.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,r,i,c,a,u,f=[-1]){const d=s;M(e);const g=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||d.$$.root};u&&u(g.root);let $=!1;if(g.ctx=r?r(e,n.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return g.ctx&&c(g.ctx[t],g.ctx[t]=l)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](l),$&&nt(e,t)),n})):[],g.update(),$=!0,l(g.before_update),g.fragment=!!i&&i(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(h)}else g.fragment&&g.fragment.c();n.intro&&Y(e.$$.fragment),tt(e,n.target,n.anchor,n.customElement),H()}M(d)}class lt{$destroy(){et(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function rt(n){let o,l,r,i,c,s,a=(n[2]?globalThis.i18n(n[0]):n[0])+"",u=[{class:i=`button-wrapper ${n[3]} ${n[1]?"is-active":""}`},n[4]],f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return{c(){o=v("button"),l=v("div"),r=w(a),T(l,"class","button-inner svelte-1qawd2k"),C(o,f),S(o,"svelte-1qawd2k",!0)},m(t,e){m(t,o,e),p(o,l),p(l,r),o.autofocus&&o.focus(),c||(s=k(o,"click",n[5]),c=!0)},p(t,[e]){5&e&&a!==(a=(t[2]?globalThis.i18n(t[0]):t[0])+"")&&_(r,a),C(o,f=W(u,[10&e&&i!==(i=`button-wrapper ${t[3]} ${t[1]?"is-active":""}`)&&{class:i},16&e&&t[4]])),S(o,"svelte-1qawd2k",!0)},i:t,o:t,d(t){t&&h(o),c=!1,s()}}}function it(t,n,o){const l=["text","isActive","doLocalizeText","class"];let r=g(n,l),{text:i}=n,{isActive:c}=n,{doLocalizeText:s=!0}=n,{class:a=""}=n;return t.$$set=t=>{n=e(e({},n),d(t)),o(4,r=g(n,l)),"text"in t&&o(0,i=t.text),"isActive"in t&&o(1,c=t.isActive),"doLocalizeText"in t&&o(2,s=t.doLocalizeText),"class"in t&&o(3,a=t.class)},[i,c,s,a,r,function(e){R.call(this,t,e)}]}class ct extends lt{constructor(t){super(),ot(this,t,it,rt,i,{text:0,isActive:1,doLocalizeText:2,class:3})}}function st(t,e,n){const o=t.slice();return o[2]=e[n][0],o[3]=e[n][1],o[5]=n,o}function at(e){let n,o,l,r,i,c=e[2]+"",s=e[3]+"";return{c(){n=v("tr"),o=v("td"),l=w(c),r=v("td"),i=w(s)},m(t,e){m(t,n,e),p(n,o),p(o,l),p(n,r),p(r,i)},p:t,d(t){t&&h(n)}}}function ut(t){let e,n,o,l,r,i,c,s,a,u,f;l=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),l.$on("click",t[1]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=at(st(t,d,e));return{c(){e=v("div"),n=v("aside"),o=v("div"),X(l.$$.fragment),r=x(),i=v("span"),i.textContent="Credits",c=x(),s=v("main"),a=v("table"),u=v("tbody");for(let t=0;t<g.length;t+=1)g[t].c();T(o,"class","flex align-items-center gap-15 svelte-5yfd45"),T(n,"class","flex flex-direction-column gap-15"),T(e,"class","flex svelte-5yfd45")},m(t,d){m(t,e,d),p(e,n),p(n,o),tt(l,o,null),p(o,r),p(o,i),p(e,c),p(e,s),p(s,a),p(a,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=st(t,d,n);g[n]?g[n].p(o,e):(g[n]=at(o),g[n].c(),g[n].m(u,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},i(t){f||(Y(l.$$.fragment,t),f=!0)},o(t){Q(l.$$.fragment,t),f=!1},d(t){t&&h(e),et(l),b(g,t)}}}function ft(t){return[[["Jordan O'Leary","Programming, Game Design, and Concept"],["theBlurryBox","Art and Animation"],["Valentin Cochet","@coc_val | Sound Effect Design"],["Jake O'Connell","UI Design | Trailer"],["BananaMilk","Music"],["Lost Lumens, Brad Clark","Audio Mastering"],["Matt Sweda","Concept Ideation Assistance"]],()=>window.goBack()]}class dt extends lt{constructor(t){super(),ot(this,t,ft,ut,i,{})}}function gt(n){let o,l,r,i,c,s,u,f,d,g,$,b=[{class:d=`button-wrapper ${n[6]} ${n[4]?"is-active":""}`},n[7]],y={};for(let t=0;t<b.length;t+=1)y=e(y,b[t]);return{c(){o=v("a"),l=v("button"),r=v("div"),i=v("img"),s=x(),u=v("span"),f=w(n[5]),a(i.src,c=n[0])||T(i,"src",c),T(i,"width",n[3]),T(i,"alt",n[1]),T(r,"class","svelte-1c8t67o"),C(l,y),S(l,"svelte-1c8t67o",!0),T(o,"target","_blank"),T(o,"rel","noreferrer"),T(o,"href",n[2])},m(t,e){m(t,o,e),p(o,l),p(l,r),p(r,i),p(r,s),p(r,u),p(u,f),l.autofocus&&l.focus(),g||($=k(l,"click",n[8]),g=!0)},p(t,[e]){1&e&&!a(i.src,c=t[0])&&T(i,"src",c),8&e&&T(i,"width",t[3]),2&e&&T(i,"alt",t[1]),32&e&&_(f,t[5]),C(l,y=W(b,[80&e&&d!==(d=`button-wrapper ${t[6]} ${t[4]?"is-active":""}`)&&{class:d},128&e&&t[7]])),S(l,"svelte-1c8t67o",!0),4&e&&T(o,"href",t[2])},i:t,o:t,d(t){t&&h(o),g=!1,$()}}}function $t(t,n,o){const l=["src","alt","href","width","isActive","text","class"];let r=g(n,l),{src:i}=n,{alt:c}=n,{href:s}=n,{width:a}=n,{isActive:u}=n,{text:f=""}=n,{class:$=""}=n;return t.$$set=t=>{n=e(e({},n),d(t)),o(7,r=g(n,l)),"src"in t&&o(0,i=t.src),"alt"in t&&o(1,c=t.alt),"href"in t&&o(2,s=t.href),"width"in t&&o(3,a=t.width),"isActive"in t&&o(4,u=t.isActive),"text"in t&&o(5,f=t.text),"class"in t&&o(6,$=t.class)},[i,c,s,a,u,f,$,r,function(e){R.call(this,t,e)}]}class pt extends lt{constructor(t){super(),ot(this,t,$t,gt,i,{src:0,alt:1,href:2,width:3,isActive:4,text:5,class:6})}}function mt(t,e,n){const o=t.slice();return o[2]=e[n],o}function ht(t){let e,n;return e=new ct({props:{type:"button",text:t[2]}}),e.$on("click",(function(){return t[1](t[2])})),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(e,n){t=e},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function bt(t){let e,n,o,l,r,i,c,s,a,u,f,d,g,$,w,y,k,C,_,E,S,M,O,L,I,R;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[0]),y=new pt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2",text:"@spellmasons"}}),E=new pt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2",text:"Discord"}});let G=window.explainKeys||[],B=[];for(let e=0;e<G.length;e+=1)B[e]=ht(mt(t,G,e));const P=t=>Q(B[t],1,1,(()=>{B[t]=null}));return{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(r.$$.fragment),i=x(),c=v("h1"),c.textContent=`${globalThis.i18n("Help")}`,s=x(),a=v("div"),u=x(),f=v("main"),d=v("div"),g=v("div"),$=v("h1"),$.textContent="Contact Me!",w=x(),X(y.$$.fragment),k=x(),C=v("h1"),C.textContent="Join our Discord Community!",_=x(),X(E.$$.fragment),S=x(),M=v("h1"),M.textContent="How to",O=x();for(let t=0;t<B.length;t+=1)B[t].c();L=x(),I=v("div"),T(c,"class","options-title svelte-z08h7l"),T(l,"class","flex align-items-center gap-20"),T(a,"class","flex flex-direction-column gap-15"),T(o,"class","flex flex-direction-column gap-15 pad-20"),T(n,"class","svelte-z08h7l"),T(g,"class","pad-20 flex flex-direction-column gap-15 overflowyscroll"),A(g,"min-width","300px"),T(I,"id","explain-portal"),T(I,"class","svelte-z08h7l"),T(d,"class","flex gap-15 height100"),T(e,"class","flex height100")},m(t,h){m(t,e,h),p(e,n),p(n,o),p(o,l),tt(r,l,null),p(l,i),p(l,c),p(o,s),p(o,a),p(e,u),p(e,f),p(f,d),p(d,g),p(g,$),p(g,w),tt(y,g,null),p(g,k),p(g,C),p(g,_),tt(E,g,null),p(g,S),p(g,M),p(g,O);for(let t=0;t<B.length;t+=1)B[t].m(g,null);p(d,L),p(d,I),R=!0},p(t,[e]){if(0&e){let n;for(G=window.explainKeys||[],n=0;n<G.length;n+=1){const o=mt(t,G,n);B[n]?(B[n].p(o,e),Y(B[n],1)):(B[n]=ht(o),B[n].c(),Y(B[n],1),B[n].m(g,null))}for(V(),n=G.length;n<B.length;n+=1)P(n);J()}},i(t){if(!R){Y(r.$$.fragment,t),Y(y.$$.fragment,t),Y(E.$$.fragment,t);for(let t=0;t<G.length;t+=1)Y(B[t]);R=!0}},o(t){Q(r.$$.fragment,t),Q(y.$$.fragment,t),Q(E.$$.fragment,t),B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)Q(B[t]);R=!1},d(t){t&&h(e),et(r),et(y),et(E),b(B,t)}}}function vt(t){return[()=>window.goBack(),t=>window.menuExplain(t,!0)]}class wt extends lt{constructor(t){super(),ot(this,t,vt,bt,i,{})}}function xt(t){let n,o,l,r,i,c;const s=t[4].default,a=function(t,e,n,o){if(t){const l=f(t,e,n,o);return t[0](l)}}(s,t,t[3],null);let u=[{class:l=`button-wrapper ${t[1]} ${t[0]?"is-active":""}`},t[2]],d={};for(let t=0;t<u.length;t+=1)d=e(d,u[t]);return{c(){n=v("button"),o=v("div"),a&&a.c(),T(o,"class","svelte-1k1vcg6"),C(n,d),S(n,"svelte-1k1vcg6",!0)},m(e,l){m(e,n,l),p(n,o),a&&a.m(o,null),n.autofocus&&n.focus(),r=!0,i||(c=k(n,"click",t[5]),i=!0)},p(t,[e]){a&&a.p&&(!r||8&e)&&function(t,e,n,o,l,r){if(l){const i=f(e,n,o,r);t.p(i,l)}}(a,s,t,t[3],r?function(t,e,n,o){if(t[2]&&o){const l=t[2](o(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|l[o];return t}return e.dirty|l}return e.dirty}(s,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null),C(n,d=W(u,[(!r||3&e&&l!==(l=`button-wrapper ${t[1]} ${t[0]?"is-active":""}`))&&{class:l},4&e&&t[2]])),S(n,"svelte-1k1vcg6",!0)},i(t){r||(Y(a,t),r=!0)},o(t){Q(a,t),r=!1},d(t){t&&h(n),a&&a.d(t),i=!1,c()}}}function yt(t,n,o){const l=["isActive","class"];let r=g(n,l),{$$slots:i={},$$scope:c}=n,{isActive:s}=n,{class:a=""}=n;return t.$$set=t=>{n=e(e({},n),d(t)),o(2,r=g(n,l)),"isActive"in t&&o(0,s=t.isActive),"class"in t&&o(1,a=t.class),"$$scope"in t&&o(3,c=t.$$scope)},[s,a,r,c,i,function(e){R.call(this,t,e)}]}class kt extends lt{constructor(t){super(),ot(this,t,yt,xt,i,{isActive:0,class:1})}}const Tt="OPTIONS",Ct="LOCALIZATION",_t="CREDITS",Et="HELP",At="PLAY",St="MULTIPLAYER_SERVER_CHOOSER";function Mt(t,e,n){const o=t.slice();return o[9]=e[n][0],o[10]=e[n][1],o}function Ot(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function Lt(e){let n,o=(e[13]||"").split("Key").join("").split("Digit").join("").toLowerCase()+"";return{c(){n=w(o)},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function It(e){let n,o=globalThis.i18n("reassign")+"";return{c(){n=w(o)},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function Rt(t){let e,n,o,l;function r(t,e){return t[0]==t[9]&&t[1]==t[15]?It:Lt}let i=r(t),c=i(t);function s(){return t[5](t[9],t[15])}return{c(){e=v("td"),n=v("button"),c.c(),T(n,"class","reassignKey svelte-bp9ml1")},m(t,r){m(t,e,r),p(e,n),c.m(n,null),o||(l=k(n,"click",s),o=!0)},p(e,o){i===(i=r(t=e))&&c?c.p(t,o):(c.d(1),c=i(t),c&&(c.c(),c.m(n,null)))},d(t){t&&h(e),c.d(),o=!1,l()}}}function Gt(t){let e,n,o,l,r,i=globalThis.i18n(t[9])+"",c=Object.assign(["","",""],t[10]),s=[];for(let e=0;e<c.length;e+=1)s[e]=Rt(Ot(t,c,e));return{c(){e=v("tr"),n=v("td"),o=w(i),l=x();for(let t=0;t<s.length;t+=1)s[t].c();r=x()},m(t,i){m(t,e,i),p(e,n),p(n,o),p(e,l);for(let t=0;t<s.length;t+=1)s[t].m(e,null);p(e,r)},p(t,n){if(19&n){let o;for(c=Object.assign(["","",""],t[10]),o=0;o<c.length;o+=1){const l=Ot(t,c,o);s[o]?s[o].p(l,n):(s[o]=Rt(l),s[o].c(),s[o].m(e,r))}for(;o<s.length;o+=1)s[o].d(1);s.length=c.length}},d(t){t&&h(e),b(s,t)}}}function Bt(t){let e,n,o,l=Object.entries(globalThis.controlMap||{}),r=[];for(let e=0;e<l.length;e+=1)r[e]=Gt(Mt(t,l,e));return{c(){e=v("tr"),e.innerHTML="<td></td> \n            <td>Option 1</td> \n            <td>Option 2</td> \n            <td>Option 3</td>",n=x();for(let t=0;t<r.length;t+=1)r[t].c();o=y()},m(t,l){m(t,e,l),m(t,n,l);for(let e=0;e<r.length;e+=1)r[e].m(t,l);m(t,o,l)},p(t,e){if(19&e){let n;for(l=Object.entries(globalThis.controlMap||{}),n=0;n<l.length;n+=1){const i=Mt(t,l,n);r[n]?r[n].p(i,e):(r[n]=Gt(i),r[n].c(),r[n].m(o.parentNode,o))}for(;n<r.length;n+=1)r[n].d(1);r.length=l.length}},d(t){t&&h(e),t&&h(n),b(r,t),t&&h(o)}}}function Pt(e){let n,o,l,r,c,s=e[2],a=Bt(e);return{c(){n=v("h2"),o=w("Â "),l=w(e[3]),r=x(),c=v("table"),a.c(),A(n,"color","red"),T(c,"id","keymapping")},m(t,e){m(t,n,e),p(n,o),p(n,l),m(t,r,e),m(t,c,e),a.m(c,null)},p(t,[e]){8&e&&_(l,t[3]),4&e&&i(s,s=t[2])?(a.d(1),a=Bt(t),a.c(),a.m(c,null)):a.p(t,e)},i:t,o:t,d(t){t&&h(n),t&&h(r),t&&h(c),a.d(t)}}}function Ut(t,e,n){function o(t,e,o){globalThis.controlMap[i][c]=o,globalThis.persistControls(),n(2,s++,s),a("",0)}function l(t){i&&(globalThis.controlMap?o(0,0,t.code):console.error("Cannot set key, no globalThis.controlMap"))}function r(t){if(globalThis.mouseButtonToKeyCode||console.error("mouseButtonToKeyCode is undefined"),void 0!==t.button){const e=globalThis.mouseButtonToKeyCode(t.button);i&&(globalThis.controlMap?0==t.button||1==t.button||2==t.button?n(3,u=globalThis.i18n("mouseRebindError")):o(0,0,e):console.error("Cannot set key, no globalThis.controlMap"))}}L((()=>{document.body.addEventListener("keydown",l),document.body.addEventListener("mousedown",r)})),I((()=>{document.body.removeEventListener("keydown",l),document.body.removeEventListener("mousedown",r)}));let i="",c=0,s=0;function a(t,e){n(0,i=t),n(1,c=e),n(3,u="")}let u="";return[i,c,s,u,a,(t,e)=>a(t,e)]}class qt extends lt{constructor(t){super(),ot(this,t,Ut,Pt,i,{})}}const Dt=[];function jt(e,n=t){let o;const l=new Set;function r(t){if(i(e,t)&&(e=t,o)){const t=!Dt.length;for(const t of l)t[1](),Dt.push(t,e);if(t){for(let t=0;t<Dt.length;t+=2)Dt[t][0](Dt[t+1]);Dt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,c=t){const s=[i,c];return l.add(s),1===l.size&&(o=n(r)||t),i(e),()=>{l.delete(s),0===l.size&&(o(),o=null)}}}}const Nt=jt(!1),zt=jt([]),Ht=jt(!1),Ft=jt(!1),Zt=jt(!1);function Kt(){const t=window.isConnected();Ht.set(t),t||Ft.set(!1),Zt.set(!1)}function Vt(){return window.pieDisconnect().then(Kt)}function Jt(e){let n,o,r,i,c,s,a,u,f,d,g,$;return{c(){n=v("div"),o=v("div"),r=v("label"),r.textContent=`${globalThis.i18n("Player Name")}`,i=x(),c=v("input"),s=x(),a=v("div"),u=v("label"),u.textContent=`${globalThis.i18n("Robe Color")}`,f=x(),d=v("input"),T(r,"for","player-name"),T(c,"type","text"),T(c,"name","player-name"),T(o,"class","flex flex-direction-column gap-15"),T(u,"for","robe"),T(d,"type","color"),T(d,"name","robe"),T(a,"class","flex flex-direction-column gap-15"),T(n,"class","flex gap-15")},m(t,l){m(t,n,l),p(n,o),p(o,r),p(o,i),p(o,c),E(c,e[0]),p(n,s),p(n,a),p(a,u),p(a,f),p(a,d),E(d,e[1]),g||($=[k(c,"input",e[3]),k(c,"input",e[4]),k(d,"input",e[5]),k(d,"blur",e[6])],g=!0)},p(t,[e]){1&e&&c.value!==t[0]&&E(c,t[0]),2&e&&E(d,t[1])},i:t,o:t,d(t){t&&h(n),g=!1,l($)}}}function Yt(t,e,n){let o;u(t,zt,(t=>n(7,o=t)));let l=globalThis.storageGet("player-name"),r=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`;function i(t,e){var n;window.configPlayer({color:(n=t,parseInt(n.slice(1),16)),name:e}),$(zt,o=globalThis.lobbyPlayerList,o)}L((()=>{setTimeout((()=>{i(r,l)}),200)}));return[l,r,i,function(){l=this.value,n(0,l)},()=>{i(r,l)},function(){r=this.value,n(1,r)},()=>{i(r,l)}]}class Qt extends lt{constructor(t){super(),ot(this,t,Yt,Jt,i,{})}}function Wt(e){let n,o;return{c(){n=v("img"),a(n.src,o="ui/localizationIcon.png")||T(n,"src","ui/localizationIcon.png"),T(n,"alt","language options"),T(n,"width","24"),T(n,"height","24"),A(n,"transform","scale(1.4)")},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function Xt(e){let n,o,l;return o=new ct({props:{text:"Toggle FPS / Latency Monitor"}}),o.$on("click",e[19]),{c(){n=v("div"),X(o.$$.fragment)},m(t,e){m(t,n,e),tt(o,n,null),l=!0},p:t,i(t){l||(Y(o.$$.fragment,t),l=!0)},o(t){Q(o.$$.fragment,t),l=!1},d(t){t&&h(n),et(o)}}}function te(e){let n,o;return n=new qt({}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ee(e){let n,o;return n=new Qt({}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ne(t){let e,n,o,r,i,c,s,a,u,f,d,g,$,b=globalThis.i18n("Enable Cinematic Camera")+"";n=new ct({props:{text:"Set Fullscreen"}}),n.$on("click",t[14]),r=new ct({props:{text:"Set Windowed Mode"}}),r.$on("click",t[15]);let y=globalThis.isElectron&&function(t){let e,n,o,l,r,i,c,s,a,u=globalThis.i18n("UI Scale")+"";return i=new ct({props:{text:"Smaller"}}),i.$on("click",t[17]),s=new ct({props:{text:"Bigger"}}),s.$on("click",t[18]),{c(){e=w(u),n=w(": "),o=w(t[3]),l=x(),r=v("div"),X(i.$$.fragment),c=x(),X(s.$$.fragment),T(r,"class","flex gap-15")},m(t,u){m(t,e,u),m(t,n,u),m(t,o,u),m(t,l,u),m(t,r,u),tt(i,r,null),p(r,c),tt(s,r,null),a=!0},p(t,e){(!a||8&e)&&_(o,t[3])},i(t){a||(Y(i.$$.fragment,t),Y(s.$$.fragment,t),a=!0)},o(t){Q(i.$$.fragment,t),Q(s.$$.fragment,t),a=!1},d(t){t&&h(e),t&&h(n),t&&h(o),t&&h(l),t&&h(r),et(i),et(s)}}}(t);return{c(){e=v("div"),X(n.$$.fragment),o=x(),X(r.$$.fragment),i=x(),c=v("label"),s=v("input"),a=x(),u=w(b),f=x(),y&&y.c(),T(s,"type","checkbox"),T(e,"class","flex flex-direction-column gap-15")},m(l,h){m(l,e,h),tt(n,e,null),p(e,o),tt(r,e,null),p(e,i),p(e,c),p(c,s),s.checked=t[2],p(c,a),p(c,u),p(e,f),y&&y.m(e,null),d=!0,g||($=[k(s,"change",t[16]),k(s,"click",t[5])],g=!0)},p(t,e){4&e&&(s.checked=t[2]),globalThis.isElectron&&y.p(t,e)},i(t){d||(Y(n.$$.fragment,t),Y(r.$$.fragment,t),Y(y),d=!0)},o(t){Q(n.$$.fragment,t),Q(r.$$.fragment,t),Q(y),d=!1},d(t){t&&h(e),et(n),et(r),y&&y.d(),g=!1,l($)}}}function oe(e){let n,o,r,i,c,s,a,u,f,d,g,$,b,y,C=globalThis.i18n("Total Volume")+"",_=globalThis.i18n("Music Volume")+"",E=globalThis.i18n("Sound Effects Volume")+"";return{c(){n=v("div"),o=w(C),r=x(),i=v("input"),c=x(),s=w(_),a=x(),u=v("input"),f=x(),d=w(E),g=x(),$=v("input"),T(i,"type","range"),i.value=100*window.volume,T(i,"min","0"),T(i,"max","100"),T(u,"type","range"),u.value=100*window.volumeMusic,T(u,"min","0"),T(u,"max","100"),T($,"type","range"),$.value=100*window.volumeGame,T($,"min","0"),T($,"max","100"),T(n,"class","flex flex-direction-column gap-15")},m(t,e){m(t,n,e),p(n,o),p(n,r),p(n,i),p(n,c),p(n,s),p(n,a),p(n,u),p(n,f),p(n,d),p(n,g),p(n,$),b||(y=[k(i,"input",ue),k(u,"input",fe),k($,"input",de)],b=!0)},p:t,i:t,o:t,d(t){t&&h(n),b=!1,l(y)}}}function le(t){let e,n,o,l,r,i,c,s,a,u,f,d,g,$,b,w,y,k,C,_,E,A,S,M,O,L,I,R;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[6]),u=new ct({props:{isActive:t[1]==se,type:"button",text:"Audio"}}),u.$on("click",t[7]),d=new ct({props:{isActive:t[1]==ae,type:"button",text:"Video"}}),d.$on("click",t[8]),$=new ct({props:{isActive:t[1]==ce,type:"button",text:"Player Configuration"}}),$.$on("click",t[9]),w=new ct({props:{isActive:t[1]==re,type:"button",text:"Controls"}}),w.$on("click",t[10]),k=new ct({props:{isActive:t[1]==ie,type:"button",text:"Extras"}}),k.$on("click",t[11]),_=new ct({props:{type:"button",text:"Reset Tutorial"}}),_.$on("click",t[12]),A=new kt({props:{class:"button-wrapper-bg-2",$$slots:{default:[Wt]},$$scope:{ctx:t}}}),A.$on("click",t[13]);const G=[oe,ne,ee,te,Xt],B=[];function P(t,e){return t[1]==se?0:t[1]==ae?1:t[1]==ce?2:t[1]==re?3:t[1]==ie?4:-1}return~(L=P(t))&&(I=B[L]=G[L](t)),{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(r.$$.fragment),i=x(),c=v("h1"),c.textContent=`${globalThis.i18n("Settings")}`,s=x(),a=v("div"),X(u.$$.fragment),f=x(),X(d.$$.fragment),g=x(),X($.$$.fragment),b=x(),X(w.$$.fragment),y=x(),X(k.$$.fragment),C=x(),X(_.$$.fragment),E=x(),X(A.$$.fragment),S=x(),M=v("main"),O=v("div"),I&&I.c(),T(c,"class","options-title svelte-z47k4j"),T(l,"class","flex align-items-center gap-20"),T(a,"class","flex flex-direction-column gap-15"),T(o,"class","flex flex-direction-column gap-15 pad-20"),T(n,"class","svelte-z47k4j"),T(O,"class","pad-20"),T(e,"class","flex")},m(t,h){m(t,e,h),p(e,n),p(n,o),p(o,l),tt(r,l,null),p(l,i),p(l,c),p(o,s),p(o,a),tt(u,a,null),p(a,f),tt(d,a,null),p(a,g),tt($,a,null),p(a,b),tt(w,a,null),p(a,y),tt(k,a,null),p(a,C),tt(_,a,null),p(a,E),tt(A,a,null),p(e,S),p(e,M),p(M,O),~L&&B[L].m(O,null),R=!0},p(t,[e]){const n={};2&e&&(n.isActive=t[1]==se),u.$set(n);const o={};2&e&&(o.isActive=t[1]==ae),d.$set(o);const l={};2&e&&(l.isActive=t[1]==ce),$.$set(l);const r={};2&e&&(r.isActive=t[1]==re),w.$set(r);const i={};2&e&&(i.isActive=t[1]==ie),k.$set(i);const c={};2097152&e&&(c.$$scope={dirty:e,ctx:t}),A.$set(c);let s=L;L=P(t),L===s?~L&&B[L].p(t,e):(I&&(V(),Q(B[s],1,1,(()=>{B[s]=null})),J()),~L?(I=B[L],I?I.p(t,e):(I=B[L]=G[L](t),I.c()),Y(I,1),I.m(O,null)):I=null)},i(t){R||(Y(r.$$.fragment,t),Y(u.$$.fragment,t),Y(d.$$.fragment,t),Y($.$$.fragment,t),Y(w.$$.fragment,t),Y(k.$$.fragment,t),Y(_.$$.fragment,t),Y(A.$$.fragment,t),Y(I),R=!0)},o(t){Q(r.$$.fragment,t),Q(u.$$.fragment,t),Q(d.$$.fragment,t),Q($.$$.fragment,t),Q(w.$$.fragment,t),Q(k.$$.fragment,t),Q(_.$$.fragment,t),Q(A.$$.fragment,t),Q(I),R=!1},d(t){t&&h(e),et(r),et(u),et(d),et($),et(w),et(k),et(_),et(A),~L&&B[L].d()}}}const re="KEY_MAPPING",ie="EXTRAS",ce="PLAYER_CONFIG",se="AUDIO",ae="VIDEO";function ue(t){window.changeVolume(t.target.value/100)}function fe(t){window.changeVolumeMusic(t.target.value/100)}function de(t){window.changeVolumeGame(t.target.value/100)}function ge(t,e,n){let{setRoute:o}=e,l=se;function r(t){n(1,l=t)}let i=globalThis.cinematicCameraEnabled;let c=NaN;globalThis.STORAGE_ID_UI_ZOOM?c=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM)):console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");let s=isNaN(c)?1:c;return t.$$set=t=>{"setRoute"in t&&n(0,o=t.setRoute)},[o,l,i,s,r,function(t){globalThis.setCinematicCameraEnabled(t.target.checked),n(2,i=globalThis.cinematicCameraEnabled)},()=>window.goBack(),()=>r(se),()=>r(ae),()=>r(ce),()=>r(re),()=>r(ie),()=>globalThis.resetTutorial(),()=>{o(Ct)},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!0):document.body.requestFullscreen().catch((t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message} (${t.name})`)}))},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!1):document.exitFullscreen()},function(){i=this.checked,n(2,i)},()=>{n(3,s-=.1),n(3,s=Math.round(10*s)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,s),globalThis.electronSettings.setUIZoom(s)},()=>{n(3,s+=.1),n(3,s=Math.round(10*s)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,s),globalThis.electronSettings.setUIZoom(s)},()=>{window.monitorFPS()}]}class $e extends lt{constructor(t){super(),ot(this,t,ge,le,i,{setRoute:0})}}function pe(e){let n,o;return{c(){n=v("img"),a(n.src,o="ui/localizationIcon.png")||T(n,"src","ui/localizationIcon.png"),T(n,"alt","language options"),T(n,"width","24"),T(n,"height","24"),A(n,"transform","scale(1.4)")},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function me(t){let e,n,o,l,r={ctx:t,current:null,token:null,hasCatch:!0,pending:we,then:ve,catch:be,blocks:[,,,]};return function(t,e){const n=e.token={};function o(t,o,l,r){if(e.token!==n)return;e.resolved=r;let i=e.ctx;void 0!==l&&(i=i.slice(),i[l]=r);const c=t&&(e.current=t)(i);let s=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(V(),Q(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),J())})):e.block.d(1),c.c(),Y(c,1),c.m(e.mount(),e.anchor),s=!0),e.block=c,e.blocks&&(e.blocks[o]=c),s&&H()}if((l=t)&&"object"==typeof l&&"function"==typeof l.then){const n=O();if(t.then((t=>{M(n),o(e.then,1,e.value,t),M(null)}),(t=>{if(M(n),o(e.catch,2,e.error,t),M(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var l}(window.setupPixiPromise,r),{c(){e=v("div"),n=x(),o=y(),r.block.c(),T(e,"id","websocket-pie-connection-status")},m(t,i){m(t,e,i),m(t,n,i),m(t,o,i),r.block.m(t,r.anchor=i),r.mount=()=>o.parentNode,r.anchor=o,l=!0},p(e,n){!function(t,e,n){const o=e.slice(),{resolved:l}=t;t.current===t.then&&(o[t.value]=l),t.current===t.catch&&(o[t.error]=l),t.block.p(o,n)}(r,t=e,n)},i(t){l||(Y(r.block),l=!0)},o(t){for(let t=0;t<3;t+=1){Q(r.blocks[t])}l=!1},d(t){t&&h(e),t&&h(n),t&&h(o),r.block.d(t),r.token=null,r=null}}}function he(e){let n,o,l,r,c,s,a,u,f,d=e[2];const g=[ye,xe],$=[];function b(t,e){return t[3]&&t[4]&&!globalThis.player.lobbyReady?0:1}o=b(e),l=$[o]=g[o](e);let w=ke(e);return s=new ct({props:{text:"Settings"}}),s.$on("click",e[14]),u=new ct({props:{text:"Quit to Main Menu"}}),u.$on("click",e[7]),{c(){n=v("div"),l.c(),r=x(),w.c(),c=x(),X(s.$$.fragment),a=x(),X(u.$$.fragment),T(n,"class","list svelte-g9yx2d")},m(t,e){m(t,n,e),$[o].m(n,null),p(n,r),w.m(n,null),p(n,c),tt(s,n,null),p(n,a),tt(u,n,null),f=!0},p(e,s){let a=o;o=b(e),o===a?$[o].p(e,s):(V(),Q($[a],1,1,(()=>{$[a]=null})),J(),l=$[o],l?l.p(e,s):(l=$[o]=g[o](e),l.c()),Y(l,1),l.m(n,r)),4&s&&i(d,d=e[2])?(V(),Q(w,1,1,t),J(),w=ke(e),w.c(),Y(w,1),w.m(n,c)):w.p(e,s)},i(t){f||(Y(l),Y(w),Y(s.$$.fragment,t),Y(u.$$.fragment,t),f=!0)},o(t){Q(l),Q(w),Q(s.$$.fragment,t),Q(u.$$.fragment,t),f=!1},d(t){t&&h(n),$[o].d(),w.d(t),et(s),et(u)}}}function be(e){let n;return{c(){n=v("p"),n.textContent="Something went wrong loading assets",A(n,"color","red")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function ve(e){let n,o,l,r,i,c,s,a,u,f,d,g=e[8]&&function(e){let n,o;return n=new ct({props:{text:"Resume Last Run"}}),n.$on("click",e[15]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);l=new ct({props:{text:"New Run"}}),l.$on("click",e[5]),i=new ct({props:{text:"Multiplayer"}}),i.$on("click",e[6]),s=new ct({props:{text:"Settings"}}),s.$on("click",e[16]);let $=globalThis.isElectron&&function(e){let n,o;return n=new ct({props:{text:"Quit Game"}}),n.$on("click",e[17]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return{c(){n=v("div"),g&&g.c(),o=x(),X(l.$$.fragment),r=x(),X(i.$$.fragment),c=x(),X(s.$$.fragment),a=x(),$&&$.c(),u=x(),f=v("br"),T(n,"class","list svelte-g9yx2d")},m(t,e){m(t,n,e),g&&g.m(n,null),p(n,o),tt(l,n,null),p(n,r),tt(i,n,null),p(n,c),tt(s,n,null),p(n,a),$&&$.m(n,null),m(t,u,e),m(t,f,e),d=!0},p(t,e){t[8]&&g.p(t,e),globalThis.isElectron&&$.p(t,e)},i(t){d||(Y(g),Y(l.$$.fragment,t),Y(i.$$.fragment,t),Y(s.$$.fragment,t),Y($),d=!0)},o(t){Q(g),Q(l.$$.fragment,t),Q(i.$$.fragment,t),Q(s.$$.fragment,t),Q($),d=!1},d(t){t&&h(n),g&&g.d(),et(l),et(i),et(s),$&&$.d(),t&&h(u),t&&h(f)}}}function we(e){let n;return{c(){n=w("loading assets...")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function xe(e){let n,o;return n=new ct({props:{text:"Resume Game"}}),n.$on("click",Ce),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ye(e){let n,o;return n=new ct({props:{text:"Back to Lobby"}}),n.$on("click",e[12]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ke(e){let n,o,l=globalThis.skipTutorial&&void 0!==globalThis.isTutorialComplete&&!globalThis.isTutorialComplete(),r=l&&function(e){let n,o;return n=new ct({props:{text:"Skip Tutorial"}}),n.$on("click",e[13]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return{c(){r&&r.c(),n=y()},m(t,e){r&&r.m(t,e),m(t,n,e),o=!0},p(t,e){l&&r.p(t,e)},i(t){o||(Y(r),o=!0)},o(t){Q(r),o=!1},d(t){r&&r.d(t),t&&h(n)}}}function Te(t){let e,n,o,l,r,i,c,s,a,u,f,d,g,$,b,w,k;n=new ct({props:{text:"Help"}}),n.$on("click",t[9]),r=new ct({props:{text:"Credits"}}),r.$on("click",t[10]),s=new pt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2"}}),u=new pt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2"}}),d=new kt({props:{class:"button-wrapper-bg-2",$$slots:{default:[pe]},$$scope:{ctx:t}}}),d.$on("click",t[11]);const C=[he,me],_=[];function E(t,e){return t[1]?0:1}return $=E(t),b=_[$]=C[$](t),{c(){e=v("div"),X(n.$$.fragment),o=x(),l=v("div"),X(r.$$.fragment),i=x(),c=v("div"),X(s.$$.fragment),a=x(),X(u.$$.fragment),f=x(),X(d.$$.fragment),g=x(),b.c(),w=y(),T(e,"id","corner-left"),T(e,"class","flex gap svelte-g9yx2d"),A(e,"flex-direction","column"),T(c,"class","flex gap svelte-g9yx2d"),T(l,"id","corner"),T(l,"class","flex gap svelte-g9yx2d"),A(l,"flex-direction","column")},m(t,h){m(t,e,h),tt(n,e,null),m(t,o,h),m(t,l,h),tt(r,l,null),p(l,i),p(l,c),tt(s,c,null),p(c,a),tt(u,c,null),p(c,f),tt(d,c,null),m(t,g,h),_[$].m(t,h),m(t,w,h),k=!0},p(t,[e]){const n={};524288&e&&(n.$$scope={dirty:e,ctx:t}),d.$set(n);let o=$;$=E(t),$===o?_[$].p(t,e):(V(),Q(_[o],1,1,(()=>{_[o]=null})),J(),b=_[$],b?b.p(t,e):(b=_[$]=C[$](t),b.c()),Y(b,1),b.m(w.parentNode,w))},i(t){k||(Y(n.$$.fragment,t),Y(r.$$.fragment,t),Y(s.$$.fragment,t),Y(u.$$.fragment,t),Y(d.$$.fragment,t),Y(b),k=!0)},o(t){Q(n.$$.fragment,t),Q(r.$$.fragment,t),Q(s.$$.fragment,t),Q(u.$$.fragment,t),Q(d.$$.fragment,t),Q(b),k=!1},d(t){t&&h(e),et(n),t&&h(o),t&&h(l),et(r),et(s),et(u),et(d),t&&h(g),_[$].d(t),t&&h(w)}}}function Ce(){window.closeMenu()}function _e(t,e,n){let o,l,r;u(t,Nt,(t=>n(18,o=t))),u(t,Ht,(t=>n(3,l=t))),u(t,Ft,(t=>n(4,r=t)));let{setRoute:i}=e,{inGame:c}=e;if(globalThis.STORAGE_ID_UI_ZOOM){const t=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM));t&&globalThis.electronSettings.setUIZoom(t)}else console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");const s=!!globalThis.storageGet(`${globalThis.savePrefix}${globalThis.quicksaveKey}`);let a=0;return t.$$set=t=>{"setRoute"in t&&n(0,i=t.setRoute),"inGame"in t&&n(1,c=t.inGame)},[i,c,a,l,r,function(){window.playMusic(),$(Nt,o=!0,o),window.startSingleplayer().then((()=>{Kt()}))},function(){window.playMusic(),o&&Vt(),$(Nt,o=!1,o),i(St)},function(){if(confirm("Are you sure you want to quit to Main Menu?")){const t=new URL(location.href);t.searchParams.delete("game"),t.searchParams.delete("pieUrl"),window.history.pushState(null,null,t),window.exitCurrentGame().then(Kt)}},s,()=>i(Et),()=>i(_t),()=>{i(Ct)},()=>{i(St)},()=>{globalThis.skipTutorial(),n(2,a++,a)},()=>i(Tt),()=>{globalThis.load(globalThis.quicksaveKey)},()=>i(Tt),()=>{window.fullyExitGame()}]}class Ee extends lt{constructor(t){super(),ot(this,t,_e,Te,i,{setRoute:0,inGame:1})}}function Ae(t,e,n){const o=t.slice();return o[4]=e[n].language,o[5]=e[n].code,o[7]=n,o}function Se(t){let e,n;return e=new ct({props:{text:t[4],isActive:t[1]==t[5],doLocalizeText:!1}}),e.$on("click",(function(){return t[3](t[5])})),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(n,o){t=n;const l={};2&o&&(l.isActive=t[1]==t[5]),e.$set(l)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Me(t){let e,n,o,l,r,i,c,s,a,u,f;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[2]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=Se(Ae(t,d,e));const $=t=>Q(g[t],1,1,(()=>{g[t]=null}));return{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(r.$$.fragment),i=x(),c=v("h1"),c.textContent=`${globalThis.i18n("Localization")}`,s=x(),a=v("main"),u=v("div");for(let t=0;t<g.length;t+=1)g[t].c();T(c,"class","options-title svelte-exei4x"),T(l,"class","flex align-items-center gap-20"),T(o,"class","flex flex-direction-column gap-15 pad-20"),T(n,"class","svelte-exei4x"),T(u,"class","pad-20 flex flex-direction-column gap-15"),T(e,"class","flex")},m(t,d){m(t,e,d),p(e,n),p(n,o),p(o,l),tt(r,l,null),p(l,i),p(l,c),p(e,s),p(e,a),p(a,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(3&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=Ae(t,d,n);g[n]?(g[n].p(o,e),Y(g[n],1)):(g[n]=Se(o),g[n].c(),Y(g[n],1),g[n].m(u,null))}for(V(),n=d.length;n<g.length;n+=1)$(n);J()}},i(t){if(!f){Y(r.$$.fragment,t);for(let t=0;t<d.length;t+=1)Y(g[t]);f=!0}},o(t){Q(r.$$.fragment,t),g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)Q(g[t]);f=!1},d(t){t&&h(e),et(r),b(g,t)}}}function Oe(t,e,n){const o=globalThis.getSupportedLanguages();let l=globalThis.getChosenLanguageCode();return[o,l,()=>window.goBack(),t=>{globalThis.setLanguage(t,!0),n(1,l=t),window.goBack()}]}class Le extends lt{constructor(t){super(),ot(this,t,Oe,Me,i,{languages:0})}get languages(){return this.$$.ctx[0]}}function Ie(e){let n,o,l,r;return l=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),l.$on("click",e[0]),{c(){n=v("h1"),n.textContent="This page is still being built",o=x(),X(l.$$.fragment),T(n,"class","svelte-1n2jha3")},m(t,e){m(t,n,e),m(t,o,e),tt(l,t,e),r=!0},p:t,i(t){r||(Y(l.$$.fragment,t),r=!0)},o(t){Q(l.$$.fragment,t),r=!1},d(t){t&&h(n),t&&h(o),et(l,t)}}}function Re(t){return[()=>window.goBack()]}class Ge extends lt{constructor(t){super(),ot(this,t,Re,Ie,i,{})}}function Be(t,e,n){const o=t.slice();return o[3]=e[n].name,o[4]=e[n].status,o[5]=e[n].color,o[6]=e[n].ready,o}function Pe(t){let e,n,o,l,r,i,c,s,a,u,f,d,g,$=t[3]+"",b=t[4]+"",y=t[6]+"";return{c(){e=v("tr"),n=v("td"),o=w($),l=x(),r=v("td"),i=w(b),c=x(),s=v("td"),u=x(),f=v("td"),d=w(y),g=x(),T(s,"class","lobby-player-color svelte-g23pjw"),T(s,"style",a=`background-color:${t[5]};`)},m(t,a){m(t,e,a),p(e,n),p(n,o),p(e,l),p(e,r),p(r,i),p(e,c),p(e,s),p(e,u),p(e,f),p(f,d),p(e,g)},p(t,e){1&e&&$!==($=t[3]+"")&&_(o,$),1&e&&b!==(b=t[4]+"")&&_(i,b),1&e&&a!==(a=`background-color:${t[5]};`)&&T(s,"style",a),1&e&&y!==(y=t[6]+"")&&_(d,y)},d(t){t&&h(e)}}}function Ue(t){let e,n,o,l,r,i,c,s,a,u,f;o=new Qt({}),r=new ct({props:{type:"button",text:"Ready",class:"sm"}}),r.$on("click",t[1]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=Pe(Be(t,d,e));return{c(){e=v("h1"),e.textContent=`${globalThis.i18n("Game Lobby")}`,n=x(),X(o.$$.fragment),l=x(),X(r.$$.fragment),i=x(),c=v("table"),s=v("thead"),s.innerHTML="<tr></tr>",a=x(),u=v("tbody");for(let t=0;t<g.length;t+=1)g[t].c();T(c,"id","lobby-player-list"),T(c,"class","svelte-g23pjw")},m(t,d){m(t,e,d),m(t,n,d),tt(o,t,d),m(t,l,d),tt(r,t,d),m(t,i,d),m(t,c,d),p(c,s),p(c,a),p(c,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=Be(t,d,n);g[n]?g[n].p(o,e):(g[n]=Pe(o),g[n].c(),g[n].m(u,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},i(t){f||(Y(o.$$.fragment,t),Y(r.$$.fragment,t),f=!0)},o(t){Q(o.$$.fragment,t),Q(r.$$.fragment,t),f=!1},d(t){t&&h(e),t&&h(n),et(o,t),t&&h(l),et(r,t),t&&h(i),t&&h(c),b(g,t)}}}function qe(t,e,n){let o;u(t,zt,(t=>n(0,o=t))),L((()=>{setInterval((()=>{$(zt,o=globalThis.lobbyPlayerList,o)}),500)})),I((()=>{clearInterval(undefined)}));return[o,()=>{globalThis.configPlayer({lobbyReady:!0})}]}class De extends lt{constructor(t){super(),ot(this,t,qe,Ue,i,{})}}function je(t){let e,n;return{c(){e=w("Connecting...\r\n                "),n=v("div"),n.innerHTML='<div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div>',T(n,"class","lds-ellipsis svelte-qcde2c")},m(t,o){m(t,e,o),m(t,n,o)},d(t){t&&h(e),t&&h(n)}}}function Ne(t){let e,n,o,r,i,c,s,a,u,f;const d=[Fe,He,ze],g=[];function $(t,e){return t[0]?0:t[4]?1:2}return i=$(t),c=g[i]=d[i](t),{c(){e=v("p"),e.textContent=`${globalThis.i18n("Game name")}`,n=x(),o=v("input"),r=x(),c.c(),s=y(),T(o,"class","svelte-qcde2c")},m(l,c){m(l,e,c),m(l,n,c),m(l,o,c),E(o,t[2]),m(l,r,c),g[i].m(l,c),m(l,s,c),a=!0,u||(f=[k(o,"input",t[13]),k(o,"keypress",t[14])],u=!0)},p(t,e){4&e&&o.value!==t[2]&&E(o,t[2]);let n=i;i=$(t),i===n?g[i].p(t,e):(V(),Q(g[n],1,1,(()=>{g[n]=null})),J(),c=g[i],c?c.p(t,e):(c=g[i]=d[i](t),c.c()),Y(c,1),c.m(s.parentNode,s))},i(t){a||(Y(c),a=!0)},o(t){Q(c),a=!1},d(t){t&&h(e),t&&h(n),t&&h(o),t&&h(r),g[i].d(t),t&&h(s),u=!1,l(f)}}}function ze(t){let e,n,o,l,r,i,c,s;return n=new ct({props:{text:"Host"}}),n.$on("click",t[9]),l=new ct({props:{text:"Join"}}),l.$on("click",t[9]),{c(){e=v("div"),X(n.$$.fragment),o=x(),X(l.$$.fragment),r=x(),i=v("div"),c=w(t[3]),T(e,"class","flex gap-15"),A(i,"color","red")},m(t,a){m(t,e,a),tt(n,e,null),p(e,o),tt(l,e,null),m(t,r,a),m(t,i,a),p(i,c),s=!0},p(t,e){(!s||8&e)&&_(c,t[3])},i(t){s||(Y(n.$$.fragment,t),Y(l.$$.fragment,t),s=!0)},o(t){Q(n.$$.fragment,t),Q(l.$$.fragment,t),s=!1},d(t){t&&h(e),et(n),et(l),t&&h(r),t&&h(i)}}}function He(e){let n,o;return n=new ct({props:{text:"Leave Room"}}),n.$on("click",e[8]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function Fe(e){let n,o;return{c(){n=w("Joining...\r\n                    "),o=v("div"),o.innerHTML='<div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div>',T(o,"class","lds-ellipsis svelte-qcde2c")},m(t,e){m(t,n,e),m(t,o,e)},p:t,i:t,o:t,d(t){t&&h(n),t&&h(o)}}}function Ze(t){let e,n;return e=new De({}),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Ke(t){let e,n,o,r,i,c,s,a,u,f,d,g,$,b,y,C,_,S,M,O,L,I,R,G,B,P=globalThis.i18n("Server Url")+"";i=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),i.$on("click",t[10]),_=new ct({props:{disabled:t[6],text:"Connect"}}),_.$on("click",t[7]),M=new ct({props:{disabled:!t[6],text:"Disconnect"}}),M.$on("click",Vt);let U=t[5]&&je(),q=t[6]&&Ne(t),D=t[4]&&Ze();return{c(){e=v("div"),n=v("aside"),o=v("div"),r=v("div"),X(i.$$.fragment),c=x(),s=v("h1"),s.textContent=`${globalThis.i18n("Multiplayer")}`,a=x(),u=v("main"),f=v("div"),d=w(P),g=x(),$=v("div"),b=v("input"),y=x(),C=v("div"),X(_.$$.fragment),S=x(),X(M.$$.fragment),O=x(),U&&U.c(),L=x(),q&&q.c(),I=x(),D&&D.c(),T(s,"class","options-title"),T(r,"class","flex align-items-center gap-20"),T(o,"class","flex flex-direction-column gap-15 pad-20"),T(b,"class","svelte-qcde2c"),T(C,"class","flex gap-15"),T(f,"class","pad-20"),A(f,"min-width","400px"),T(e,"class","flex")},m(l,h){m(l,e,h),p(e,n),p(n,o),p(o,r),tt(i,r,null),p(r,c),p(r,s),p(e,a),p(e,u),p(u,f),p(f,d),p(f,g),p(f,$),p($,b),E(b,t[1]),p($,y),p($,C),tt(_,C,null),p(C,S),tt(M,C,null),p(f,O),U&&U.m(f,null),p(f,L),q&&q.m(f,null),p(f,I),D&&D.m(f,null),R=!0,G||(B=[k(b,"input",t[11]),k(b,"keypress",t[12])],G=!0)},p(t,[e]){2&e&&b.value!==t[1]&&E(b,t[1]);const n={};64&e&&(n.disabled=t[6]),_.$set(n);const o={};64&e&&(o.disabled=!t[6]),M.$set(o),t[5]?U||(U=je(),U.c(),U.m(f,L)):U&&(U.d(1),U=null),t[6]?q?(q.p(t,e),64&e&&Y(q,1)):(q=Ne(t),q.c(),Y(q,1),q.m(f,I)):q&&(V(),Q(q,1,1,(()=>{q=null})),J()),t[4]?D?16&e&&Y(D,1):(D=Ze(),D.c(),Y(D,1),D.m(f,null)):D&&(V(),Q(D,1,1,(()=>{D=null})),J())},i(t){R||(Y(i.$$.fragment,t),Y(_.$$.fragment,t),Y(M.$$.fragment,t),Y(q),Y(D),R=!0)},o(t){Q(i.$$.fragment,t),Q(_.$$.fragment,t),Q(M.$$.fragment,t),Q(q),Q(D),R=!1},d(t){t&&h(e),et(i),et(_),et(M),U&&U.d(),q&&q.d(),D&&D.d(),G=!1,l(B)}}}function Ve(t,e,n){let o,l,r;u(t,Ft,(t=>n(4,o=t))),u(t,Zt,(t=>n(5,l=t))),u(t,Ht,(t=>n(6,r=t)));let i=!1,c=new URLSearchParams(location.search),s=c.get("pieUrl"),a=c.get("game"),f="";function d(){if(s){console.log("Menu: Connect to server",s),$(Zt,l=!0,l);const t=new URL(location.href);return t.searchParams.set("pieUrl",s),window.history.pushState(null,null,t),window.connect_to_wsPie_server(s).catch(console.error).then(Kt)}return Promise.reject("No wsUrl defined to connect to")}function g(){a?window.isConnected()?(console.log("Menu: Connect to game name",a),n(0,i=!0),n(3,f=""),window.joinRoom({name:a}).then((()=>{const t=new URL(location.href);t.searchParams.set("game",a),window.history.pushState(null,null,t),$(Ft,o=!0,o)})).catch((t=>{console.error("Could not join room",t),n(3,f=t)})).then((()=>{n(0,i=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer"):console.log("Cannot join game until a gameName is provided")}L((()=>{Kt()}));return[i,s,a,f,o,l,r,d,function(){window.pieLeaveRoom(),$(Ft,o=!1,o)},g,()=>{window.goBack()},function(){s=this.value,n(1,s)},t=>{"Enter"==t.key&&d()},function(){a=this.value,n(2,a)},t=>{"Enter"==t.key&&g()}]}class Je extends lt{constructor(t){super(),ot(this,t,Ve,Ke,i,{})}}function Ye(e){let n,o;return n=new Ge({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function Qe(e){let n,o;return n=new wt({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function We(e){let n,o;return n=new dt({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function Xe(e){let n,o;return n=new $e({props:{route:!0,setRoute:e[3]}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function tn(e){let n,o;return n=new Le({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function en(e){let n,o;return n=new Je({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function nn(t){let e,n,o,l,r,i,c;return i=new Ee({props:{setRoute:t[3],inGame:t[1]}}),{c(){e=v("div"),n=v("div"),o=v("img"),r=x(),X(i.$$.fragment),T(o,"id","logo"),a(o.src,l="ui/logo.png")||T(o,"src","ui/logo.png"),T(o,"alt","Spellmasons logo"),T(o,"width","800"),T(n,"id","main-menu-inner"),T(e,"id","main-menu")},m(t,l){m(t,e,l),p(e,n),p(n,o),p(n,r),tt(i,n,null),c=!0},p(t,e){const n={};2&e&&(n.inGame=t[1]),i.$set(n)},i(t){c||(Y(i.$$.fragment,t),c=!0)},o(t){Q(i.$$.fragment,t),c=!1},d(t){t&&h(e),et(i)}}}function on(t){let e,n,o,l,r,i;const c=[nn,en,tn,Xe,We,Qe,Ye],s=[];function a(t,e){return t[0]==At?0:t[0]==St?1:t[0]==Ct?2:t[0]==Tt?3:t[0]==_t?4:t[0]==Et?5:"TODO"==t[0]?6:-1}return~(l=a(t))&&(r=s[l]=c[l](t)),{c(){e=v("div"),n=v("div"),o=v("div"),r&&r.c(),T(o,"class","decorative-border"),T(n,"class","full-fill"),T(e,"id","menu")},m(t,r){m(t,e,r),p(e,n),p(n,o),~l&&s[l].m(o,null),i=!0},p(t,e){let n=l;l=a(t),l===n?~l&&s[l].p(t,e):(r&&(V(),Q(s[n],1,1,(()=>{s[n]=null})),J()),~l?(r=s[l],r?r.p(t,e):(r=s[l]=c[l](t),r.c()),Y(r,1),r.m(o,null)):r=null)},i(t){i||(Y(r),i=!0)},o(t){Q(r),i=!1},d(t){t&&h(e),~l&&s[l].d()}}}function ln(e){let n,o,l=e[2],r=on(e);return{c(){r.c(),n=y()},m(t,e){r.m(t,e),m(t,n,e),o=!0},p(e,[o]){4&o&&i(l,l=e[2])?(V(),Q(r,1,1,t),J(),r=on(e),r.c(),Y(r,1),r.m(n.parentNode,n)):r.p(e,o)},i(t){o||(Y(r),o=!0)},o(t){Q(r),o=!1},d(t){t&&h(n),r.d(t)}}}function rn(t){if("Escape"===t.code)goBack()}function cn(t,e,n){let o;console.log("Menu: Svelte menu is running");let l=!1,r=0;function i(t){console.log("Menu: Route:",t),n(0,o=t),window.updateInGameMenuStatus()}return window.refreshMenu=()=>{console.log("Force refresh menu"),n(2,r++,r)},window.updateInGameMenuStatus=()=>{n(1,l=void 0!==window.player)},i(At),window.goBack=function(){i(At)},L((()=>{document.body.addEventListener("keydown",rn)})),I((()=>{document.body.removeEventListener("keydown",rn)})),window.setMenu=i,[o,l,r,i]}return new class extends lt{constructor(t){super(),ot(this,t,cn,ln,i,{})}}({target:document.getElementById("menu-app")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
