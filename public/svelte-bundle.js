var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(){return a("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){t.value=null==n?"":n}function g(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}let $;function b(t){$=t}function w(){if(!$)throw new Error("Function called outside component initialization");return $}const v=[],k=[],x=[],y=[],_=Promise.resolve();let C=!1;function S(t){x.push(t)}const A=new Set;let E=0;function L(){const t=$;do{for(;E<v.length;){const t=v[E];E++,b(t),M(t.$$)}for(b(null),v.length=0,E=0;k.length;)k.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];A.has(n)||(A.add(n),n())}x.length=0}while(v.length);for(;y.length;)y.pop()();C=!1,A.clear(),b(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(S)}}const N=new Set;let P;function O(){P={r:0,c:[],p:P}}function R(){P.r||o(P.c),P=P.p}function G(t,n){t&&t.i&&(N.delete(t),t.i(n))}function j(t,n,e,o){if(t&&t.o){if(N.has(t))return;N.add(t),P.c.push((()=>{N.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function D(t,n){const e=n.token={};function o(t,o,c,r){if(n.token!==e)return;n.resolved=r;let i=n.ctx;void 0!==c&&(i=i.slice(),i[c]=r);const u=t&&(n.current=t)(i);let l=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(O(),j(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),R())})):n.block.d(1),u.c(),G(u,1),u.m(n.mount(),n.anchor),l=!0),n.block=u,n.blocks&&(n.blocks[o]=u),l&&L()}if((c=t)&&"object"==typeof c&&"function"==typeof c.then){const e=w();if(t.then((t=>{b(e),o(n.then,1,n.value,t),b(null)}),(t=>{if(b(e),o(n.catch,2,n.error,t),b(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var c}function U(t){t&&t.c()}function B(t,e,r,i){const{fragment:u,on_mount:l,on_destroy:s,after_update:a}=t.$$;u&&u.m(e,r),i||S((()=>{const e=l.map(n).filter(c);s?s.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(S)}function I(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function q(t,n){-1===t.$$.dirty[0]&&(v.push(t),C||(C=!0,_.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function z(n,c,r,i,u,s,a,d=[-1]){const f=$;b(n);const p=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(f?f.$$.context:[])),callbacks:e(),dirty:d,skip_bound:!1,root:c.target||f.$$.root};a&&a(p.root);let m=!1;if(p.ctx=r?r(n,c.props||{},((t,e,...o)=>{const c=o.length?o[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=c)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](c),m&&q(n,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();c.intro&&G(n.$$.fragment),B(n,c.target,c.anchor,c.customElement),L()}b(f)}class F{$destroy(){I(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function T(n){let e,o,c,r,d;return{c(){e=s("div"),o=a("Volume:\r\n    "),c=s("input"),m(c,"type","range"),c.value="100",m(c,"min","0"),m(c,"max","100")},m(t,n){u(t,e,n),i(e,o),i(e,c),r||(d=p(c,"input",V),r=!0)},p:t,i:t,o:t,d(t){t&&l(e),r=!1,d()}}}function V(t){window.changeVolume(t.target.value)}class H extends F{constructor(t){super(),z(this,t,null,T,r,{})}}function J(t){let n,e,c,r,i,a,h,g,$,b,w,v={ctx:t,current:null,token:null,hasCatch:!0,pending:tt,then:K,catch:Y};return D(window.setupPixiPromise,v),{c(){n=s("div"),e=d(),c=s("button"),c.textContent="Singleplayer",r=d(),i=s("button"),i.textContent="Multiplayer",a=d(),h=s("br"),g=d(),$=f(),v.block.c(),m(n,"id","websocket-pie-connection-status")},m(o,l){u(o,n,l),u(o,e,l),u(o,c,l),u(o,r,l),u(o,i,l),u(o,a,l),u(o,h,l),u(o,g,l),u(o,$,l),v.block.m(o,v.anchor=l),v.mount=()=>$.parentNode,v.anchor=$,b||(w=[p(c,"click",t[8]),p(i,"click",t[9])],b=!0)},p(n,e){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}(v,t=n,e)},d(t){t&&l(n),t&&l(e),t&&l(c),t&&l(r),t&&l(i),t&&l(a),t&&l(h),t&&l(g),t&&l($),v.block.d(t),v.token=null,v=null,b=!1,o(w)}}}function Q(n){let e,c,r,a,f,h,$,b,w,v,k;return{c(){e=s("div"),c=s("button"),c.textContent="Resume Game",r=d(),a=s("div"),f=s("button"),f.textContent="Save",h=d(),$=s("button"),$.textContent="Load",b=d(),w=s("button"),w.textContent="Quits Game",m(c,"class","svelte-1snxd9a"),m(f,"class","svelte-1snxd9a"),m($,"class","svelte-1snxd9a"),g(a,"display","flex"),m(w,"class","svelte-1snxd9a"),m(e,"class","list svelte-1snxd9a")},m(t,o){u(t,e,o),i(e,c),i(e,r),i(e,a),i(a,f),i(a,h),i(a,$),i(e,b),i(e,w),v||(k=[p(c,"click",et),p(f,"click",ot),p($,"click",n[14]),p(w,"click",n[13])],v=!0)},p:t,d(t){t&&l(e),v=!1,o(k)}}}function Y(n){let e;return{c(){e=s("p"),e.textContent="Something went wrong loading assets",g(e,"color","red")},m(t,n){u(t,e,n)},p:t,d(t){t&&l(e)}}}function K(t){let n,e=!1===t[3]&&W(t);return{c(){e&&e.c(),n=f()},m(t,o){e&&e.m(t,o),u(t,n,o)},p(t,o){!1===t[3]?e?e.p(t,o):(e=W(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&l(n)}}}function W(t){let n,e,c,r,m,g,$,b,w,v,k,x,y,_,C,S=t[2]&&X(),A=t[5]&&Z(t);return{c(){n=a("Server Url\r\n            "),e=s("div"),c=s("input"),r=d(),m=s("button"),g=a("Connect"),$=d(),b=s("button"),w=a("Disconnect"),k=d(),S&&S.c(),x=d(),A&&A.c(),y=f(),m.disabled=t[5],b.disabled=v=!t[5]},m(o,l){u(o,n,l),u(o,e,l),i(e,c),h(c,t[4]),i(e,r),i(e,m),i(m,g),i(e,$),i(e,b),i(b,w),u(o,k,l),S&&S.m(o,l),u(o,x,l),A&&A.m(o,l),u(o,y,l),_||(C=[p(c,"input",t[15]),p(c,"keypress",t[16]),p(m,"click",t[10]),p(b,"click",t[11])],_=!0)},p(t,n){16&n&&c.value!==t[4]&&h(c,t[4]),32&n&&(m.disabled=t[5]),32&n&&v!==(v=!t[5])&&(b.disabled=v),t[2]?S||(S=X(),S.c(),S.m(x.parentNode,x)):S&&(S.d(1),S=null),t[5]?A?A.p(t,n):(A=Z(t),A.c(),A.m(y.parentNode,y)):A&&(A.d(1),A=null)},d(t){t&&l(n),t&&l(e),t&&l(k),S&&S.d(t),t&&l(x),A&&A.d(t),t&&l(y),_=!1,o(C)}}}function X(t){let n;return{c(){n=a("Connecting...")},m(t,e){u(t,n,e)},d(t){t&&l(n)}}}function Z(t){let n,e,c,r,a,f,m,$,b,w;return{c(){n=s("p"),n.textContent="Game name",e=d(),c=s("input"),r=d(),a=s("div"),f=s("button"),f.textContent="Host",m=d(),$=s("button"),$.textContent="Join",g(a,"display","flex")},m(o,l){u(o,n,l),u(o,e,l),u(o,c,l),h(c,t[6]),u(o,r,l),u(o,a,l),i(a,f),i(a,m),i(a,$),b||(w=[p(c,"input",t[17]),p(c,"keypress",t[18]),p(f,"click",t[12]),p($,"click",t[12])],b=!0)},p(t,n){64&n&&c.value!==t[6]&&h(c,t[6])},d(t){t&&l(n),t&&l(e),t&&l(c),t&&l(r),t&&l(a),b=!1,o(w)}}}function tt(n){let e;return{c(){e=a("loading assets...")},m(t,n){u(t,e,n)},p:t,d(t){t&&l(e)}}}function nt(n){let e;function o(t,n){return t[7]?Q:J}let c=o(n),r=c(n);return{c(){r.c(),e=f()},m(t,n){r.m(t,n),u(t,e,n)},p(t,[n]){c===(c=o(t))&&r?r.p(t,n):(r.d(1),r=c(t),r&&(r.c(),r.m(e.parentNode,e)))},i:t,o:t,d(t){r.d(t),t&&l(e)}}}function et(){window.closeMenu()}function ot(){const t=prompt("Name your save file");console.log("saving...",t),window.save(t)}function ct(t,n,e){let o,{setRoute:c}=n,{LOAD_GAMES:r}=n,i=!1;function u(){window.playMusic(),o&&p(),e(3,o=!1)}let l,s,a=new URLSearchParams(location.search).get("pieUrl");function d(){e(5,l=window.pie.isConnected()),e(2,i=!1)}function f(){if(a){e(2,i=!0),window.connect_to_wsPie_server(a).then(d);const t=new URLSearchParams(location.search);t.set("pieUrl",a),urlSearch=t.toString()}}function p(){window.pie.disconnect().then(d)}a&&(u(),f());let m=!1;function h(){window.pie.isConnected()?(console.log("Setup: Loading complete.. initialize game"),window.joinRoom({name:s}).then((()=>{const t=new URLSearchParams(location.search);t.set("game",s),urlSearch=t.toString(),e(7,m=!0)})).catch((()=>{e(7,m=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer")}return t.$$set=t=>{"setRoute"in t&&e(0,c=t.setRoute),"LOAD_GAMES"in t&&e(1,r=t.LOAD_GAMES)},[c,r,i,o,a,l,s,m,function(){window.playMusic(),e(3,o=!0),window.connect_to_wsPie_server().then((()=>{window.joinRoom().then((()=>{e(7,m=!0)})).catch((()=>{e(7,m=!1)})),d()}))},u,f,p,h,function(){confirm("Are you sure you want to quit?")&&(window.exitCurrentGame(),e(7,m=!1))},()=>c(r),function(){a=this.value,e(4,a)},t=>{"Enter"==t.key&&f()},function(){s=this.value,e(6,s)},t=>{"Enter"==t.key&&h()}]}class rt extends F{constructor(t){super(),z(this,t,ct,nt,r,{setRoute:0,LOAD_GAMES:1})}}function it(t,n,e){const o=t.slice();return o[1]=n[e],o}function ut(n){let e,o,c,r,f,h,g,$=n[1]+"";return{c(){e=s("div"),o=s("button"),c=a($),f=d(),m(o,"data-file",r=n[1]),m(o,"class","svelte-18c0lnc")},m(t,n){u(t,e,n),i(e,o),i(o,c),i(e,f),h||(g=p(o,"click",st),h=!0)},p:t,d(t){t&&l(e),h=!1,g()}}}function lt(n){let e,o=n[0],c=[];for(let t=0;t<o.length;t+=1)c[t]=ut(it(n,o,t));return{c(){e=s("div");for(let t=0;t<c.length;t+=1)c[t].c();m(e,"id","saved-games-list"),m(e,"class","svelte-18c0lnc")},m(t,n){u(t,e,n);for(let t=0;t<c.length;t+=1)c[t].m(e,null)},p(t,[n]){if(1&n){let r;for(o=t[0],r=0;r<o.length;r+=1){const i=it(t,o,r);c[r]?c[r].p(i,n):(c[r]=ut(i),c[r].c(),c[r].m(e,null))}for(;r<c.length;r+=1)c[r].d(1);c.length=o.length}},i:t,o:t,d(t){t&&l(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(c,t)}}}function st(t){const n=t.target.dataset.file;console.log("Loading...",n),window.load(n)}function at(t){return[window.getAllSaveFiles()]}class dt extends F{constructor(t){super(),z(this,t,at,lt,r,{})}}function ft(t){let n,e,o,c,r,a,m,h,g;const $=[gt,ht,mt],b=[];function w(t,n){return t[0]==wt?0:t[0]==vt?1:t[0]==kt?2:-1}return~(c=w(t))&&(r=b[c]=$[c](t)),{c(){n=s("div"),e=s("button"),e.textContent="Back to main menu",o=d(),r&&r.c(),a=f()},m(r,l){u(r,n,l),i(n,e),u(r,o,l),~c&&b[c].m(r,l),u(r,a,l),m=!0,h||(g=p(e,"click",t[4]),h=!0)},p(t,n){let e=c;c=w(t),c===e?~c&&b[c].p(t,n):(r&&(O(),j(b[e],1,1,(()=>{b[e]=null})),R()),~c?(r=b[c],r?r.p(t,n):(r=b[c]=$[c](t),r.c()),G(r,1),r.m(a.parentNode,a)):r=null)},i(t){m||(G(r),m=!0)},o(t){j(r),m=!1},d(t){t&&l(n),t&&l(o),~c&&b[c].d(t),t&&l(a),h=!1,g()}}}function pt(n){let e,c,r,a,f,h,g,$;return{c(){e=s("h1"),e.textContent="Main Menu",c=d(),r=s("div"),a=s("button"),a.textContent="Play",f=d(),h=s("button"),h.textContent="Options",m(r,"class","list")},m(t,o){u(t,e,o),u(t,c,o),u(t,r,o),i(r,a),i(r,f),i(r,h),g||($=[p(a,"click",n[2]),p(h,"click",n[3])],g=!0)},p:t,i:t,o:t,d(t){t&&l(e),t&&l(c),t&&l(r),g=!1,o($)}}}function mt(n){let e,o;return e=new dt({}),{c(){U(e.$$.fragment)},m(t,n){B(e,t,n),o=!0},p:t,i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){j(e.$$.fragment,t),o=!1},d(t){I(e,t)}}}function ht(n){let e,o;return e=new H({}),{c(){U(e.$$.fragment)},m(t,n){B(e,t,n),o=!0},p:t,i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){j(e.$$.fragment,t),o=!1},d(t){I(e,t)}}}function gt(n){let e,o;return e=new rt({props:{setRoute:n[1],LOAD_GAMES:kt}}),{c(){U(e.$$.fragment)},m(t,n){B(e,t,n),o=!0},p:t,i(t){o||(G(e.$$.fragment,t),o=!0)},o(t){j(e.$$.fragment,t),o=!1},d(t){I(e,t)}}}function $t(t){let n,e,o,c;const r=[pt,ft],i=[];function s(t,n){return t[0]==bt?0:1}return n=s(t),e=i[n]=r[n](t),{c(){e.c(),o=f()},m(t,e){i[n].m(t,e),u(t,o,e),c=!0},p(t,[c]){let u=n;n=s(t),n===u?i[n].p(t,c):(O(),j(i[u],1,1,(()=>{i[u]=null})),R(),e=i[n],e?e.p(t,c):(e=i[n]=r[n](t),e.c()),G(e,1),e.m(o.parentNode,o))},i(t){c||(G(e),c=!0)},o(t){j(e),c=!1},d(t){i[n].d(t),t&&l(o)}}}const bt="MAIN",wt="PLAY",vt="OPTIONS",kt="LOAD_GAMES";function xt(t,n,e){let o=bt;return[o,function(t){e(0,o=t)},()=>e(0,o=wt),()=>e(0,o=vt),()=>e(0,o=bt)]}return new class extends F{constructor(t){super(),z(this,t,xt,$t,r,{})}}({target:document.getElementById("menu-inner")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
