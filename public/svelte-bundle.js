var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function u(t,n){t.appendChild(n)}function i(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(){return a("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){t.value=null==n?"":n}function g(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}let $;function b(t){$=t}function w(){if(!$)throw new Error("Function called outside component initialization");return $}const k=[],y=[],x=[],v=[],R=Promise.resolve();let C=!1;function O(t){x.push(t)}const S=new Set;let P=0;function _(){const t=$;do{for(;P<k.length;){const t=k[P];P++,b(t),N(t.$$)}for(b(null),k.length=0,P=0;y.length;)y.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];S.has(n)||(S.add(n),n())}x.length=0}while(k.length);for(;v.length;)v.pop()();C=!1,S.clear(),b(t)}function N(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(O)}}const T=new Set;let E;function I(){E={r:0,c:[],p:E}}function M(){E.r||o(E.c),E=E.p}function A(t,n){t&&t.i&&(T.delete(t),t.i(n))}function L(t,n,e,o){if(t&&t.o){if(T.has(t))return;T.add(t),E.c.push((()=>{T.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function U(t,n){const e=n.token={};function o(t,o,c,r){if(n.token!==e)return;n.resolved=r;let u=n.ctx;void 0!==c&&(u=u.slice(),u[c]=r);const i=t&&(n.current=t)(u);let s=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==o&&t&&(I(),L(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),M())})):n.block.d(1),i.c(),A(i,1),i.m(n.mount(),n.anchor),s=!0),n.block=i,n.blocks&&(n.blocks[o]=i),s&&_()}if((c=t)&&"object"==typeof c&&"function"==typeof c.then){const e=w();if(t.then((t=>{b(e),o(n.then,1,n.value,t),b(null)}),(t=>{if(b(e),o(n.catch,2,n.error,t),b(null),!n.hasCatch)throw t})),n.current!==n.pending)return o(n.pending,0),!0}else{if(n.current!==n.then)return o(n.then,1,n.value,t),!0;n.resolved=t}var c}function j(t){t&&t.c()}function G(t,e,r,u){const{fragment:i,on_mount:s,on_destroy:l,after_update:a}=t.$$;i&&i.m(e,r),u||O((()=>{const e=s.map(n).filter(c);l?l.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(O)}function B(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function q(t,n){-1===t.$$.dirty[0]&&(k.push(t),C||(C=!0,R.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function z(n,c,r,u,i,l,a,d=[-1]){const f=$;b(n);const p=n.$$={fragment:null,ctx:null,props:l,update:t,not_equal:i,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(f?f.$$.context:[])),callbacks:e(),dirty:d,skip_bound:!1,root:c.target||f.$$.root};a&&a(p.root);let m=!1;if(p.ctx=r?r(n,c.props||{},((t,e,...o)=>{const c=o.length?o[0]:e;return p.ctx&&i(p.ctx[t],p.ctx[t]=c)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](c),m&&q(n,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!u&&u(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();c.intro&&A(n.$$.fragment),G(n,c.target,c.anchor,c.customElement),_()}b(f)}class V{$destroy(){B(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function D(n){let e,c,r,f,h,g,$,b,w;return{c(){e=l("button"),e.textContent="ðŸ ” Back",c=d(),r=l("div"),f=a("Volume:\r\n    "),h=l("input"),g=d(),$=l("button"),$.textContent="Re-prompt Cookie Consent",m(e,"type","button"),m(h,"type","range"),h.value="100",m(h,"min","0"),m(h,"max","100"),m($,"type","button")},m(t,o){i(t,e,o),i(t,c,o),i(t,r,o),u(r,f),u(r,h),i(t,g,o),i(t,$,o),b||(w=[p(e,"click",n[2]),p(h,"input",F),p($,"click",n[3])],b=!0)},p:t,i:t,o:t,d(t){t&&s(e),t&&s(c),t&&s(r),t&&s(g),t&&s($),b=!1,o(w)}}}function F(t){window.changeVolume(t.target.value)}function H(t,n,e){let{setRoute:o}=n,{lastRoute:c}=n;return t.$$set=t=>{"setRoute"in t&&e(0,o=t.setRoute),"lastRoute"in t&&e(1,c=t.lastRoute)},[o,c,()=>o(c),()=>window.cookieConsentPopup(!0)]}class J extends V{constructor(t){super(),z(this,t,H,D,r,{setRoute:0,lastRoute:1})}}function Q(t){let n,e,c,r,u,a,h,g,$,b,w,k={ctx:t,current:null,token:null,hasCatch:!0,pending:nt,then:W,catch:K};return U(window.setupPixiPromise,k),{c(){n=l("div"),e=d(),c=l("button"),c.textContent="Singleplayer",r=d(),u=l("button"),u.textContent="Multiplayer",a=d(),h=l("br"),g=d(),$=f(),k.block.c(),m(n,"id","websocket-pie-connection-status")},m(o,s){i(o,n,s),i(o,e,s),i(o,c,s),i(o,r,s),i(o,u,s),i(o,a,s),i(o,h,s),i(o,g,s),i(o,$,s),k.block.m(o,k.anchor=s),k.mount=()=>$.parentNode,k.anchor=$,b||(w=[p(c,"click",t[8]),p(u,"click",t[9])],b=!0)},p(n,e){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}(k,t=n,e)},d(t){t&&s(n),t&&s(e),t&&s(c),t&&s(r),t&&s(u),t&&s(a),t&&s(h),t&&s(g),t&&s($),k.block.d(t),k.token=null,k=null,b=!1,o(w)}}}function Y(n){let e,c,r,a,f,h,g,$;return{c(){e=l("div"),c=l("button"),c.textContent="Resume Game",r=d(),a=l("button"),a.textContent="Options",f=d(),h=l("button"),h.textContent="Quit to Main Menu",m(c,"class","svelte-1snxd9a"),m(a,"class","svelte-1snxd9a"),m(h,"class","svelte-1snxd9a"),m(e,"class","list svelte-1snxd9a")},m(t,o){i(t,e,o),u(e,c),u(e,r),u(e,a),u(e,f),u(e,h),g||($=[p(c,"click",ct),p(a,"click",n[13]),p(h,"click",ot)],g=!0)},p:t,d(t){t&&s(e),g=!1,o($)}}}function K(n){let e;return{c(){e=l("p"),e.textContent="Something went wrong loading assets",g(e,"color","red")},m(t,n){i(t,e,n)},p:t,d(t){t&&s(e)}}}function W(t){let n,e=!1===t[3]&&X(t);return{c(){e&&e.c(),n=f()},m(t,o){e&&e.m(t,o),i(t,n,o)},p(t,o){!1===t[3]?e?e.p(t,o):(e=X(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&s(n)}}}function X(t){let n,e,c,r,m,g,$,b,w,k,y,x,v,R,C,O=t[2]&&Z(),S=t[5]&&tt(t);return{c(){n=a("Server Url\r\n            "),e=l("div"),c=l("input"),r=d(),m=l("button"),g=a("Connect"),$=d(),b=l("button"),w=a("Disconnect"),y=d(),O&&O.c(),x=d(),S&&S.c(),v=f(),m.disabled=t[5],b.disabled=k=!t[5]},m(o,s){i(o,n,s),i(o,e,s),u(e,c),h(c,t[4]),u(e,r),u(e,m),u(m,g),u(e,$),u(e,b),u(b,w),i(o,y,s),O&&O.m(o,s),i(o,x,s),S&&S.m(o,s),i(o,v,s),R||(C=[p(c,"input",t[14]),p(c,"keypress",t[15]),p(m,"click",t[10]),p(b,"click",t[11])],R=!0)},p(t,n){16&n&&c.value!==t[4]&&h(c,t[4]),32&n&&(m.disabled=t[5]),32&n&&k!==(k=!t[5])&&(b.disabled=k),t[2]?O||(O=Z(),O.c(),O.m(x.parentNode,x)):O&&(O.d(1),O=null),t[5]?S?S.p(t,n):(S=tt(t),S.c(),S.m(v.parentNode,v)):S&&(S.d(1),S=null)},d(t){t&&s(n),t&&s(e),t&&s(y),O&&O.d(t),t&&s(x),S&&S.d(t),t&&s(v),R=!1,o(C)}}}function Z(t){let n;return{c(){n=a("Connecting...")},m(t,e){i(t,n,e)},d(t){t&&s(n)}}}function tt(t){let n,e,c,r,a,f,m,$,b,w;return{c(){n=l("p"),n.textContent="Game name",e=d(),c=l("input"),r=d(),a=l("div"),f=l("button"),f.textContent="Host",m=d(),$=l("button"),$.textContent="Join",g(a,"display","flex")},m(o,s){i(o,n,s),i(o,e,s),i(o,c,s),h(c,t[6]),i(o,r,s),i(o,a,s),u(a,f),u(a,m),u(a,$),b||(w=[p(c,"input",t[16]),p(c,"keypress",t[17]),p(f,"click",t[12]),p($,"click",t[12])],b=!0)},p(t,n){64&n&&c.value!==t[6]&&h(c,t[6])},d(t){t&&s(n),t&&s(e),t&&s(c),t&&s(r),t&&s(a),b=!1,o(w)}}}function nt(n){let e;return{c(){e=a("loading assets...")},m(t,n){i(t,e,n)},p:t,d(t){t&&s(e)}}}function et(n){let e;function o(t,n){return t[7]?Y:Q}let c=o(n),r=c(n);return{c(){r.c(),e=f()},m(t,n){r.m(t,n),i(t,e,n)},p(t,[n]){c===(c=o(t))&&r?r.p(t,n):(r.d(1),r=c(t),r&&(r.c(),r.m(e.parentNode,e)))},i:t,o:t,d(t){r.d(t),t&&s(e)}}}function ot(){confirm("Are you sure you want to quit to Main Menu?")&&window.exitCurrentGame()}function ct(){window.closeMenu()}function rt(t,n,e){let o,{setRoute:c}=n,{OPTIONS:r}=n,u=!1;function i(){window.playMusic(),o&&p(),e(3,o=!1)}let s,l,a=new URLSearchParams(location.search).get("pieUrl");function d(){e(5,s=window.pie.isConnected()),e(2,u=!1)}function f(){if(a){e(2,u=!0),window.connect_to_wsPie_server(a).then(d);const t=new URLSearchParams(location.search);t.set("pieUrl",a),urlSearch=t.toString()}}function p(){window.pie.disconnect().then(d)}a&&(i(),f());let m=!1;function h(){window.pie.isConnected()?(console.log("Setup: Loading complete.. initialize game"),window.joinRoom({name:l}).then((()=>{const t=new URLSearchParams(location.search);t.set("game",l),urlSearch=t.toString(),e(7,m=!0)})).catch((()=>{e(7,m=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer")}return t.$$set=t=>{"setRoute"in t&&e(0,c=t.setRoute),"OPTIONS"in t&&e(1,r=t.OPTIONS)},[c,r,u,o,a,s,l,m,function(){window.playMusic(),e(3,o=!0),window.startSingleplayer().then((()=>{e(7,m=!0)})).catch((()=>{e(7,m=!1)})).then((()=>{d()}))},i,f,p,h,()=>c(r),function(){a=this.value,e(4,a)},t=>{"Enter"==t.key&&f()},function(){l=this.value,e(6,l)},t=>{"Enter"==t.key&&h()}]}class ut extends V{constructor(t){super(),z(this,t,rt,et,r,{setRoute:0,OPTIONS:1})}}function it(n){let e,c,r,a,f,h,g,$;return{c(){e=l("div"),c=l("button"),c.textContent="Resume Tutorial",r=d(),a=l("button"),a.textContent="Options",f=d(),h=l("button"),h.textContent="Skip Tutorial",m(e,"class","list")},m(t,o){i(t,e,o),u(e,c),u(e,r),u(e,a),u(e,f),u(e,h),g||($=[p(c,"click",lt),p(a,"click",n[2]),p(h,"click",st)],g=!0)},p:t,i:t,o:t,d(t){t&&s(e),g=!1,o($)}}}function st(){confirm("Are you sure you want to skip the tutorial?")&&(window.skipTutorial(),window.exitCurrentGame())}function lt(){window.closeMenu()}function at(t,n,e){let{OPTIONS:o}=n,{setRoute:c}=n;return t.$$set=t=>{"OPTIONS"in t&&e(0,o=t.OPTIONS),"setRoute"in t&&e(1,c=t.setRoute)},[o,c,()=>c(o)]}class dt extends V{constructor(t){super(),z(this,t,at,it,r,{OPTIONS:0,setRoute:1})}}function ft(n){let e,o;return e=new dt({props:{setRoute:n[2],OPTIONS:gt}}),{c(){j(e.$$.fragment)},m(t,n){G(e,t,n),o=!0},p:t,i(t){o||(A(e.$$.fragment,t),o=!0)},o(t){L(e.$$.fragment,t),o=!1},d(t){B(e,t)}}}function pt(t){let n,e;return n=new J({props:{setRoute:t[2],lastRoute:t[0]}}),{c(){j(n.$$.fragment)},m(t,o){G(n,t,o),e=!0},p(t,e){const o={};1&e&&(o.lastRoute=t[0]),n.$set(o)},i(t){e||(A(n.$$.fragment,t),e=!0)},o(t){L(n.$$.fragment,t),e=!1},d(t){B(n,t)}}}function mt(n){let e,o;return e=new ut({props:{setRoute:n[2],OPTIONS:gt}}),{c(){j(e.$$.fragment)},m(t,n){G(e,t,n),o=!0},p:t,i(t){o||(A(e.$$.fragment,t),o=!0)},o(t){L(e.$$.fragment,t),o=!1},d(t){B(e,t)}}}function ht(t){let n,e,o,c;const r=[mt,pt,ft],u=[];function l(t,n){return t[1]==$t?0:t[1]==gt?1:t[1]==bt?2:-1}return~(n=l(t))&&(e=u[n]=r[n](t)),{c(){e&&e.c(),o=f()},m(t,e){~n&&u[n].m(t,e),i(t,o,e),c=!0},p(t,[c]){let i=n;n=l(t),n===i?~n&&u[n].p(t,c):(e&&(I(),L(u[i],1,1,(()=>{u[i]=null})),M()),~n?(e=u[n],e?e.p(t,c):(e=u[n]=r[n](t),e.c()),A(e,1),e.m(o.parentNode,o)):e=null)},i(t){c||(A(e),c=!0)},o(t){L(e),c=!1},d(t){~n&&u[n].d(t),t&&s(o)}}}const gt="OPTIONS",$t="PLAY",bt="TUTORIAL";function wt(t,n,e){let o,c;function r(t){console.log("Menu: setRoute",t),e(0,o=c),e(1,c=t)}return console.log("Svelte menu is running"),r(window.startMenu||o),window.setMenu=r,[o,c,r]}return new class extends V{constructor(t){super(),z(this,t,wt,ht,r,{})}}({target:document.getElementById("menu-inner")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
