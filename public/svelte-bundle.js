var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function r(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function d(){return s(" ")}function f(){return s("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){t.value=null==n?"":n}function b(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}let g;function v(t){g=t}function k(){if(!g)throw new Error("Function called outside component initialization");return g}const w=[],$=[],y=[],x=[],_=Promise.resolve();let C=!1;function E(t){y.push(t)}const S=new Set;let P=0;function N(){const t=g;do{for(;P<w.length;){const t=w[P];P++,v(t),j(t.$$)}for(v(null),w.length=0,P=0;$.length;)$.pop()();for(let t=0;t<y.length;t+=1){const n=y[t];S.has(n)||(S.add(n),n())}y.length=0}while(w.length);for(;x.length;)x.pop()();C=!1,S.clear(),v(t)}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const L=new Set;let U;function A(t,n){t&&t.i&&(L.delete(t),t.i(n))}function M(t,n){const e=n.token={};function c(t,c,i,r){if(n.token!==e)return;n.resolved=r;let l=n.ctx;void 0!==i&&(l=l.slice(),l[i]=r);const u=t&&(n.current=t)(l);let a=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==c&&t&&(U={r:0,c:[],p:U},function(t,n,e,o){if(t&&t.o){if(L.has(t))return;L.add(t),U.c.push((()=>{L.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),U.r||o(U.c),U=U.p)})):n.block.d(1),u.c(),A(u,1),u.m(n.mount(),n.anchor),a=!0),n.block=u,n.blocks&&(n.blocks[c]=u),a&&N()}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const e=k();if(t.then((t=>{v(e),c(n.then,1,n.value,t),v(null)}),(t=>{if(v(e),c(n.catch,2,n.error,t),v(null),!n.hasCatch)throw t})),n.current!==n.pending)return c(n.pending,0),!0}else{if(n.current!==n.then)return c(n.then,1,n.value,t),!0;n.resolved=t}var i}function R(t,n){-1===t.$$.dirty[0]&&(w.push(t),C||(C=!0,_.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function B(i,r,l,a,s,d,f,p=[-1]){const m=g;v(i);const h=i.$$={fragment:null,ctx:null,props:d,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(m?m.$$.context:[])),callbacks:e(),dirty:p,skip_bound:!1,root:r.target||m.$$.root};f&&f(h.root);let b=!1;if(h.ctx=l?l(i,r.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),b&&R(i,t)),n})):[],h.update(),b=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();r.intro&&A(i.$$.fragment),function(t,e,i,r){const{fragment:l,on_mount:u,on_destroy:a,after_update:s}=t.$$;l&&l.m(e,i),r||E((()=>{const e=u.map(n).filter(c);a?a.push(...e):o(e),t.$$.on_mount=[]})),s.forEach(E)}(i,r.target,r.anchor,r.customElement),N()}v(m)}function G(t){let n,e,c,i,r,s,h,b,g,v,k,w={ctx:t,current:null,token:null,hasCatch:!0,pending:H,then:V,catch:z};return M(window.setupPixiPromise,w),{c(){n=a("div"),e=d(),c=a("button"),c.textContent="Singleplayer",i=d(),r=a("button"),r.textContent="Multiplayer",s=d(),h=a("br"),b=d(),g=f(),w.block.c(),m(n,"id","websocket-pie-connection-status"),m(c,"class","svelte-ilablm"),m(r,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),l(o,c,u),l(o,i,u),l(o,r,u),l(o,s,u),l(o,h,u),l(o,b,u),l(o,g,u),w.block.m(o,w.anchor=u),w.mount=()=>g.parentNode,w.anchor=g,v||(k=[p(c,"click",t[7]),p(r,"click",t[8])],v=!0)},p(n,e){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}(w,t=n,e)},d(t){t&&u(n),t&&u(e),t&&u(c),t&&u(i),t&&u(r),t&&u(s),t&&u(h),t&&u(b),t&&u(g),w.block.d(t),w.token=null,w=null,v=!1,o(k)}}}function O(n){let e,o,c;return{c(){e=a("button"),e.textContent="Exit Game / Back to main menu",m(e,"class","svelte-ilablm")},m(t,i){l(t,e,i),o||(c=p(e,"click",n[12]),o=!0)},p:t,d(t){t&&u(e),o=!1,c()}}}function z(n){let e;return{c(){e=a("p"),e.textContent="Something went wrong loading assets",b(e,"color","red")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function V(t){let n,e=!1===t[1]&&q(t);return{c(){e&&e.c(),n=f()},m(t,o){e&&e.m(t,o),l(t,n,o)},p(t,o){!1===t[1]?e?e.p(t,o):(e=q(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&u(n)}}}function q(t){let n,e,c,i,b,g,v,k,w,$,y,x,_,C,E,S=t[0]&&D(),P=t[4]&&F(t);return{c(){n=s("Server Url\n      "),e=a("div"),c=a("input"),i=d(),b=a("button"),g=s("Connect"),v=d(),k=a("button"),w=s("Disconnect"),y=d(),S&&S.c(),x=d(),P&&P.c(),_=f(),m(c,"class","svelte-ilablm"),b.disabled=t[4],m(b,"class","svelte-ilablm"),k.disabled=$=!t[4],m(k,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),r(e,c),h(c,t[3]),r(e,i),r(e,b),r(b,g),r(e,v),r(e,k),r(k,w),l(o,y,u),S&&S.m(o,u),l(o,x,u),P&&P.m(o,u),l(o,_,u),C||(E=[p(c,"input",t[13]),p(c,"keypress",t[14]),p(b,"click",t[9]),p(k,"click",t[10])],C=!0)},p(t,n){8&n&&c.value!==t[3]&&h(c,t[3]),16&n&&(b.disabled=t[4]),16&n&&$!==($=!t[4])&&(k.disabled=$),t[0]?S||(S=D(),S.c(),S.m(x.parentNode,x)):S&&(S.d(1),S=null),t[4]?P?P.p(t,n):(P=F(t),P.c(),P.m(_.parentNode,_)):P&&(P.d(1),P=null)},d(t){t&&u(n),t&&u(e),t&&u(y),S&&S.d(t),t&&u(x),P&&P.d(t),t&&u(_),C=!1,o(E)}}}function D(t){let n;return{c(){n=s("Connecting...")},m(t,e){l(t,n,e)},d(t){t&&u(n)}}}function F(t){let n,e,c,i,f,g,v,k,w,$,y,x,_,C,E,S;return{c(){n=a("p"),e=s("Send this link to friends to play together:\n          "),c=a("a"),i=s("Quick invite link"),g=d(),v=a("p"),v.textContent="Game name",k=d(),w=a("input"),$=d(),y=a("div"),x=a("button"),x.textContent="Host",_=d(),C=a("button"),C.textContent="Join",m(c,"href",f=location.origin+location.pathname+"?"+t[2]),m(c,"class","svelte-ilablm"),m(w,"class","svelte-ilablm"),m(x,"class","svelte-ilablm"),m(C,"class","svelte-ilablm"),b(y,"display","flex")},m(o,u){l(o,n,u),r(n,e),r(n,c),r(c,i),l(o,g,u),l(o,v,u),l(o,k,u),l(o,w,u),h(w,t[5]),l(o,$,u),l(o,y,u),r(y,x),r(y,_),r(y,C),E||(S=[p(w,"input",t[15]),p(w,"keypress",t[16]),p(x,"click",t[11]),p(C,"click",t[11])],E=!0)},p(t,n){4&n&&f!==(f=location.origin+location.pathname+"?"+t[2])&&m(c,"href",f),32&n&&w.value!==t[5]&&h(w,t[5])},d(t){t&&u(n),t&&u(g),t&&u(v),t&&u(k),t&&u(w),t&&u($),t&&u(y),E=!1,o(S)}}}function H(n){let e;return{c(){e=s("loading assets...")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function I(n){let e,o,c,i,f,h;function b(t,n){return t[6]?O:G}let g=b(n),v=g(n);return{c(){v.c(),e=d(),o=a("div"),c=s("Volume:\n  "),i=a("input"),m(i,"type","range"),i.value="100",m(i,"min","0"),m(i,"max","100"),m(i,"class","svelte-ilablm")},m(t,n){v.m(t,n),l(t,e,n),l(t,o,n),r(o,c),r(o,i),f||(h=p(i,"input",J),f=!0)},p(t,[n]){g===(g=b(t))&&v?v.p(t,n):(v.d(1),v=g(t),v&&(v.c(),v.m(e.parentNode,e)))},i:t,o:t,d(t){v.d(t),t&&u(e),t&&u(o),f=!1,h()}}}function J(t){window.changeVolume(t.target.value)}function Q(t,n,e){let o,c=!1;function i(){window.playMusic(),o&&p(),e(1,o=!1)}let r,l,u=new URLSearchParams(location.search),a=u.toString(),s=u.get("pieUrl");function d(){e(4,r=window.pie.isConnected()),e(0,c=!1)}function f(){if(s){e(0,c=!0),window.connect_to_wsPie_server(s).then(d);const t=new URLSearchParams(location.search);t.append("pieUrl",s),e(2,a=t.toString())}}function p(){window.pie.disconnect().then(d)}s&&(i(),f());let m=!1;function h(){window.pie.isConnected()?(console.log("Setup: Loading complete.. initialize game"),window.joinRoom({name:l}).then((()=>{e(6,m=!0)})).catch((()=>{e(6,m=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer")}return[c,o,a,s,r,l,m,function(){window.playMusic(),e(1,o=!0),window.connect_to_wsPie_server().then((()=>{window.joinRoom().then((()=>{e(6,m=!0)})).catch((()=>{e(6,m=!1)})),d()}))},i,f,p,h,function(){window.exitCurrentGame(),e(6,m=!1)},function(){s=this.value,e(3,s)},t=>{"Enter"==t.key&&f()},function(){l=this.value,e(5,l)},t=>{"Enter"==t.key&&h()}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),B(this,t,Q,I,i,{})}}({target:document.getElementById("menu-inner")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
