var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(){return a("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){t.value=null==n?"":n}function b(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}let g;function k(t){g=t}function v(){if(!g)throw new Error("Function called outside component initialization");return g}const $=[],y=[],w=[],x=[],_=Promise.resolve();let C=!1;function E(t){w.push(t)}const j=new Set;let N=0;function P(){const t=g;do{for(;N<$.length;){const t=$[N];N++,k(t),S(t.$$)}for(k(null),$.length=0,N=0;y.length;)y.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];j.has(n)||(j.add(n),n())}w.length=0}while($.length);for(;x.length;)x.pop()();C=!1,j.clear(),k(t)}function S(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const A=new Set;let B;function G(t,n){t&&t.i&&(A.delete(t),t.i(n))}function L(t,n){const e=n.token={};function c(t,c,r,i){if(n.token!==e)return;n.resolved=i;let l=n.ctx;void 0!==r&&(l=l.slice(),l[r]=i);const u=t&&(n.current=t)(l);let s=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==c&&t&&(B={r:0,c:[],p:B},function(t,n,e,o){if(t&&t.o){if(A.has(t))return;A.add(t),B.c.push((()=>{A.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),B.r||o(B.c),B=B.p)})):n.block.d(1),u.c(),G(u,1),u.m(n.mount(),n.anchor),s=!0),n.block=u,n.blocks&&(n.blocks[c]=u),s&&P()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=v();if(t.then((t=>{k(e),c(n.then,1,n.value,t),k(null)}),(t=>{if(k(e),c(n.catch,2,n.error,t),k(null),!n.hasCatch)throw t})),n.current!==n.pending)return c(n.pending,0),!0}else{if(n.current!==n.then)return c(n.then,1,n.value,t),!0;n.resolved=t}var r}function O(t,n){-1===t.$$.dirty[0]&&($.push(t),C||(C=!0,_.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function z(r,i,l,s,a,d,f,p=[-1]){const m=g;k(r);const h=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:e(),dirty:p,skip_bound:!1,root:i.target||m.$$.root};f&&f(h.root);let b=!1;if(h.ctx=l?l(r,i.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),b&&O(r,t)),n})):[],h.update(),b=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();i.intro&&G(r.$$.fragment),function(t,e,r,i){const{fragment:l,on_mount:u,on_destroy:s,after_update:a}=t.$$;l&&l.m(e,r),i||E((()=>{const e=u.map(n).filter(c);s?s.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(E)}(r,i.target,i.anchor,i.customElement),P()}k(m)}function M(t){let n,e,c,r,i,a,h,b,g,k,v,$={ctx:t,current:null,token:null,hasCatch:!0,pending:I,then:D,catch:q};return L(window.setupPixiPromise,$),{c(){n=s("div"),e=d(),c=s("button"),c.textContent="Singleplayer",r=d(),i=s("button"),i.textContent="Multiplayer",a=d(),h=s("br"),b=d(),g=f(),$.block.c(),m(n,"id","websocket-pie-connection-status"),m(c,"class","svelte-ilablm"),m(i,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),l(o,c,u),l(o,r,u),l(o,i,u),l(o,a,u),l(o,h,u),l(o,b,u),l(o,g,u),$.block.m(o,$.anchor=u),$.mount=()=>g.parentNode,$.anchor=g,k||(v=[p(c,"click",t[5]),p(i,"click",t[6])],k=!0)},p(n,e){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}($,t=n,e)},d(t){t&&u(n),t&&u(e),t&&u(c),t&&u(r),t&&u(i),t&&u(a),t&&u(h),t&&u(b),t&&u(g),$.block.d(t),$.token=null,$=null,k=!1,o(v)}}}function R(n){let e,o,c;return{c(){e=s("button"),e.textContent="Exit Game / Back to main menu",m(e,"class","svelte-ilablm")},m(t,r){l(t,e,r),o||(c=p(e,"click",n[10]),o=!0)},p:t,d(t){t&&u(e),o=!1,c()}}}function q(n){let e;return{c(){e=s("p"),e.textContent="Something went wrong loading assets",b(e,"color","red")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function D(t){let n,e=!1===t[0]&&F(t);return{c(){e&&e.c(),n=f()},m(t,o){e&&e.m(t,o),l(t,n,o)},p(t,o){!1===t[0]?e?e.p(t,o):(e=F(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&u(n)}}}function F(t){let n,e,c,r,b,g,k,v,$,y,w,x,_,C,E=t[2]&&H(t);return{c(){n=a("Server Url\n      "),e=s("div"),c=s("input"),r=d(),b=s("button"),g=a("Connect"),k=d(),v=s("button"),$=a("Disconnect"),w=d(),E&&E.c(),x=f(),m(c,"class","svelte-ilablm"),b.disabled=t[2],m(b,"class","svelte-ilablm"),v.disabled=y=!t[2],m(v,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),i(e,c),h(c,t[1]),i(e,r),i(e,b),i(b,g),i(e,k),i(e,v),i(v,$),l(o,w,u),E&&E.m(o,u),l(o,x,u),_||(C=[p(c,"input",t[11]),p(c,"keypress",t[12]),p(b,"click",t[7]),p(v,"click",t[8])],_=!0)},p(t,n){2&n&&c.value!==t[1]&&h(c,t[1]),4&n&&(b.disabled=t[2]),4&n&&y!==(y=!t[2])&&(v.disabled=y),t[2]?E?E.p(t,n):(E=H(t),E.c(),E.m(x.parentNode,x)):E&&(E.d(1),E=null)},d(t){t&&u(n),t&&u(e),t&&u(w),E&&E.d(t),t&&u(x),_=!1,o(C)}}}function H(t){let n,e,c,r,f,g,k,v,$;return{c(){n=a("Game name\n        "),e=s("input"),c=d(),r=s("div"),f=s("button"),f.textContent="Host",g=d(),k=s("button"),k.textContent="Join",m(e,"class","svelte-ilablm"),m(f,"class","svelte-ilablm"),m(k,"class","svelte-ilablm"),b(r,"display","flex")},m(o,u){l(o,n,u),l(o,e,u),h(e,t[3]),l(o,c,u),l(o,r,u),i(r,f),i(r,g),i(r,k),v||($=[p(e,"input",t[13]),p(e,"keypress",t[14]),p(f,"click",t[9]),p(k,"click",t[9])],v=!0)},p(t,n){8&n&&e.value!==t[3]&&h(e,t[3])},d(t){t&&u(n),t&&u(e),t&&u(c),t&&u(r),v=!1,o($)}}}function I(n){let e;return{c(){e=a("loading assets...")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function J(n){let e;function o(t,n){return t[4]?R:M}let c=o(n),r=c(n);return{c(){r.c(),e=f()},m(t,n){r.m(t,n),l(t,e,n)},p(t,[n]){c===(c=o(t))&&r?r.p(t,n):(r.d(1),r=c(t),r&&(r.c(),r.m(e.parentNode,e)))},i:t,o:t,d(t){r.d(t),t&&u(e)}}}function T(t,n,e){let o,c,r,i;function l(){e(2,r=window.pie.isConnected())}function u(){c&&window.connect_to_wsPie_server(c).then(l)}function s(){window.pie.disconnect().then(l)}let a=!1;function d(){window.pie.isConnected()?(console.log("Setup: Loading complete.. initialize game"),window.joinRoom({name:i}).then((()=>{e(4,a=!0)})).catch((()=>{e(4,a=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer")}return[o,c,r,i,a,function(){e(0,o=!0),window.connect_to_wsPie_server().then((()=>{window.joinRoom().then((()=>{e(4,a=!0)})).catch((()=>{e(4,a=!1)})),l()}))},function(){o&&s(),e(0,o=!1)},u,s,d,function(){window.exitCurrentGame(),e(4,a=!1)},function(){c=this.value,e(1,c)},t=>{"Enter"==t.key&&u()},function(){i=this.value,e(3,i)},t=>{"Enter"==t.key&&d()}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),z(this,t,T,J,r,{})}}({target:document.getElementById("menu-inner")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
