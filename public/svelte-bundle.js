var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function l(t){t.forEach(n)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,c;function a(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function u(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function f(t,n,o,l){return t[1]&&l?e(o.ctx.slice(),t[1](l(n))):o.ctx}function g(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function d(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function p(t,e,n){return t.set(n),e}function $(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function w(t){return document.createTextNode(t)}function x(){return w(" ")}function y(){return w("")}function T(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function k(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set?t[o]=e[o]:k(t,o,e[o])}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function S(t,e){t.value=null==e?"":e}function M(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function E(t,e,n){t.classList[n?"add":"remove"](e)}function L(t){c=t}function A(){if(!c)throw new Error("Function called outside component initialization");return c}function P(t){A().$$.on_mount.push(t)}function O(t){A().$$.on_destroy.push(t)}function I(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const R=[],B=[],G=[],U=[],D=Promise.resolve();let q=!1;function j(t){G.push(t)}const z=new Set;let N=0;function H(){const t=c;do{for(;N<R.length;){const t=R[N];N++,L(t),F(t.$$)}for(L(null),R.length=0,N=0;B.length;)B.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];z.has(e)||(z.add(e),e())}G.length=0}while(R.length);for(;U.length;)U.pop()();q=!1,z.clear(),L(t)}function F(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const Z=new Set;let K;function V(){K={r:0,c:[],p:K}}function J(){K.r||l(K.c),K=K.p}function Y(t,e){t&&t.i&&(Z.delete(t),t.i(e))}function Q(t,e,n,o){if(t&&t.o){if(Z.has(t))return;Z.add(t),K.c.push((()=>{Z.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function W(t,e){const n={},o={},l={$$scope:1};let i=t.length;for(;i--;){const r=t[i],s=e[i];if(s){for(const t in r)t in s||(o[t]=1);for(const t in s)l[t]||(n[t]=s[t],l[t]=1);t[i]=s}else for(const t in r)l[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function X(t){t&&t.c()}function tt(t,e,o,r){const{fragment:s,after_update:c}=t.$$;s&&s.m(e,o),r||j((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):l(e),t.$$.on_mount=[]})),c.forEach(j)}function et(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(R.push(t),q||(q=!0,D.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,n,i,r,s,a,u,f=[-1]){const g=c;L(e);const d=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(g?g.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||g.$$.root};u&&u(d.root);let p=!1;if(d.ctx=i?i(e,n.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return d.ctx&&s(d.ctx[t],d.ctx[t]=l)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](l),p&&nt(e,t)),n})):[],d.update(),p=!0,l(d.before_update),d.fragment=!!r&&r(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();n.intro&&Y(e.$$.fragment),tt(e,n.target,n.anchor,n.customElement),H()}L(g)}class lt{$destroy(){et(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function it(t){let e,n;return{c(){e=v("div"),k(e,"class","icon svelte-17dwdft"),k(e,"style",n=`background-image: url('ui/icons/${t[2]}')`)},m(t,n){m(t,e,n)},p(t,o){4&o&&n!==(n=`background-image: url('ui/icons/${t[2]}')`)&&k(e,"style",n)},d(t){t&&h(e)}}}function rt(n){let o,l,i,r,s,c,a,u,f=(n[4]?globalThis.i18n(n[0]):n[0])+"",g=n[2]&&it(n),d=[{class:c=`button-wrapper ${n[5]} ${n[3]?"is-active":""}`},{style:n[1]},n[6]],p={};for(let t=0;t<d.length;t+=1)p=e(p,d[t]);return{c(){o=v("button"),l=v("div"),g&&g.c(),i=x(),r=v("span"),s=w(f),k(r,"class","button-text svelte-17dwdft"),k(l,"class","button-inner svelte-17dwdft"),C(o,p),E(o,"svelte-17dwdft",!0)},m(t,e){m(t,o,e),$(o,l),g&&g.m(l,null),$(l,i),$(l,r),$(r,s),o.autofocus&&o.focus(),a||(u=T(o,"click",n[7]),a=!0)},p(t,[e]){t[2]?g?g.p(t,e):(g=it(t),g.c(),g.m(l,i)):g&&(g.d(1),g=null),17&e&&f!==(f=(t[4]?globalThis.i18n(t[0]):t[0])+"")&&_(s,f),C(o,p=W(d,[40&e&&c!==(c=`button-wrapper ${t[5]} ${t[3]?"is-active":""}`)&&{class:c},2&e&&{style:t[1]},64&e&&t[6]])),E(o,"svelte-17dwdft",!0)},i:t,o:t,d(t){t&&h(o),g&&g.d(),a=!1,u()}}}function st(t,n,o){const l=["text","style","iconPath","isActive","doLocalizeText","class"];let i=d(n,l),{text:r}=n,{style:s}=n,{iconPath:c}=n,{isActive:a}=n,{doLocalizeText:u=!0}=n,{class:f=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(6,i=d(n,l)),"text"in t&&o(0,r=t.text),"style"in t&&o(1,s=t.style),"iconPath"in t&&o(2,c=t.iconPath),"isActive"in t&&o(3,a=t.isActive),"doLocalizeText"in t&&o(4,u=t.doLocalizeText),"class"in t&&o(5,f=t.class)},[r,s,c,a,u,f,i,function(e){I.call(this,t,e)}]}class ct extends lt{constructor(t){super(),ot(this,t,st,rt,r,{text:0,style:1,iconPath:2,isActive:3,doLocalizeText:4,class:5})}}function at(t,e,n){const o=t.slice();return o[2]=e[n][0],o[3]=e[n][1],o[5]=n,o}function ut(e){let n,o,l,i,r,s=e[2]+"",c=e[3]+"";return{c(){n=v("tr"),o=v("td"),l=w(s),i=v("td"),r=w(c),k(o,"class","svelte-177f09k"),k(i,"class","svelte-177f09k")},m(t,e){m(t,n,e),$(n,o),$(o,l),$(n,i),$(i,r)},p:t,d(t){t&&h(n)}}}function ft(t){let e,n,o,l,i,r,s,c,a,u,f,g,d,p,w,y,T,C;l=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),l.$on("click",t[1]);let _=t[0],S=[];for(let e=0;e<_.length;e+=1)S[e]=ut(at(t,_,e));return{c(){e=v("div"),n=v("aside"),o=v("div"),X(l.$$.fragment),i=x(),r=v("main"),s=v("div"),c=v("h2"),c.textContent="Credits",a=x(),u=v("table"),f=v("tbody");for(let t=0;t<S.length;t+=1)S[t].c();g=x(),d=v("p"),d.textContent="And huge thanks to the many others unnamed above who were\r\n                helpful to me during the process of creating this game!",p=x(),w=v("h2"),w.textContent="Inspiration",y=x(),T=v("p"),T.textContent="Spellmasons drew inspiration from a number of incredible indie\r\n                titles including: Nuclear Throne, Magicka, Into the Breach, and\r\n                Hoplite",k(o,"class","flex align-items-center gap-20 svelte-177f09k"),k(n,"class","flex flex-direction-column gap-15 pad-20"),k(s,"class","pad-20 svelte-177f09k"),k(e,"class","flex svelte-177f09k")},m(t,h){m(t,e,h),$(e,n),$(n,o),tt(l,o,null),$(e,i),$(e,r),$(r,s),$(s,c),$(s,a),$(s,u),$(u,f);for(let t=0;t<S.length;t+=1)S[t].m(f,null);$(s,g),$(s,d),$(s,p),$(s,w),$(s,y),$(s,T),C=!0},p(t,[e]){if(1&e){let n;for(_=t[0],n=0;n<_.length;n+=1){const o=at(t,_,n);S[n]?S[n].p(o,e):(S[n]=ut(o),S[n].c(),S[n].m(f,null))}for(;n<S.length;n+=1)S[n].d(1);S.length=_.length}},i(t){C||(Y(l.$$.fragment,t),C=!0)},o(t){Q(l.$$.fragment,t),C=!1},d(t){t&&h(e),et(l),b(S,t)}}}function gt(t){return[[["Jordan O'Leary","Game Design and Development"],["theBlurryBox","Art and Animation"],["Valentin Cochet @coc_val","Sound Effect Design"],["Jake O'Connell","UI Design and Video Production"],["BananaMilk","Music"],["Lost Lumens / Brad Clark","Audio Mastering and Playtesting"],["Matt Sweda","Brainstorming"],["Kacey Misskelley","User Experience Research"],["Russell Champoux","Playtesting"],["Rachel Bruhn","Playtesting"],["Jakob Free","Playtesting"],["Lochlan O'Leary","Playtesting"],["https://www.kenney.nl/","Some Icons"]],()=>window.goBack()]}class dt extends lt{constructor(t){super(),ot(this,t,gt,ft,r,{})}}const pt="spellmasons-save-";function $t(t,e,n){const o=t.slice();return o[3]=e[n],o}function mt(t){let e,n,o,l;return n=new ct({props:{type:"button",text:t[3]}}),n.$on("click",(function(){return t[2](t[3])})),{c(){e=v("div"),X(n.$$.fragment),o=x()},m(t,i){m(t,e,i),tt(n,e,null),$(e,o),l=!0},p(e,n){t=e},i(t){l||(Y(n.$$.fragment,t),l=!0)},o(t){Q(n.$$.fragment,t),l=!1},d(t){t&&h(e),et(n)}}}function ht(t){let e,n,o,l,i,r,s,c,a,u,f;i=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",t[1]);let g=t[0],d=[];for(let e=0;e<g.length;e+=1)d[e]=mt($t(t,g,e));const p=t=>Q(d[t],1,1,(()=>{d[t]=null}));return{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(i.$$.fragment),r=x(),s=v("h1"),s.textContent=`${globalThis.i18n("Previous Games")}`,c=x(),a=v("main"),u=v("div");for(let t=0;t<d.length;t+=1)d[t].c();k(s,"class","options-title svelte-z47k4j"),k(l,"class","flex align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-z47k4j"),k(u,"class","pad-20 flex flex-direction-column gap-15"),k(e,"class","flex")},m(t,g){m(t,e,g),$(e,n),$(n,o),$(o,l),tt(i,l,null),$(l,r),$(l,s),$(e,c),$(e,a),$(a,u);for(let t=0;t<d.length;t+=1)d[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(g=t[0],n=0;n<g.length;n+=1){const o=$t(t,g,n);d[n]?(d[n].p(o,e),Y(d[n],1)):(d[n]=mt(o),d[n].c(),Y(d[n],1),d[n].m(u,null))}for(V(),n=g.length;n<d.length;n+=1)p(n);J()}},i(t){if(!f){Y(i.$$.fragment,t);for(let t=0;t<g.length;t+=1)Y(d[t]);f=!0}},o(t){Q(i.$$.fragment,t),d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)Q(d[t]);f=!1},d(t){t&&h(e),et(i),b(d,t)}}}function bt(t){return[Object.keys(localStorage).filter((t=>t.includes(pt))).map((t=>t.split(pt).join(""))).reverse(),()=>window.goBack(),t=>window.load(t)]}class vt extends lt{constructor(t){super(),ot(this,t,bt,ht,r,{})}}function wt(n){let o,l,i,r,s,c,u,f,g,d,p,b=[{class:g=`button-wrapper ${n[6]} ${n[4]?"is-active":""}`},n[7]],y={};for(let t=0;t<b.length;t+=1)y=e(y,b[t]);return{c(){o=v("a"),l=v("button"),i=v("div"),r=v("img"),c=x(),u=v("span"),f=w(n[5]),a(r.src,s=n[0])||k(r,"src",s),k(r,"width",n[3]),k(r,"alt",n[1]),k(i,"class","svelte-pxurxu"),C(l,y),E(l,"svelte-pxurxu",!0),k(o,"target","_blank"),k(o,"rel","noreferrer"),k(o,"href",n[2])},m(t,e){m(t,o,e),$(o,l),$(l,i),$(i,r),$(i,c),$(i,u),$(u,f),l.autofocus&&l.focus(),d||(p=T(l,"click",n[8]),d=!0)},p(t,[e]){1&e&&!a(r.src,s=t[0])&&k(r,"src",s),8&e&&k(r,"width",t[3]),2&e&&k(r,"alt",t[1]),32&e&&_(f,t[5]),C(l,y=W(b,[80&e&&g!==(g=`button-wrapper ${t[6]} ${t[4]?"is-active":""}`)&&{class:g},128&e&&t[7]])),E(l,"svelte-pxurxu",!0),4&e&&k(o,"href",t[2])},i:t,o:t,d(t){t&&h(o),d=!1,p()}}}function xt(t,n,o){const l=["src","alt","href","width","isActive","text","class"];let i=d(n,l),{src:r}=n,{alt:s}=n,{href:c}=n,{width:a}=n,{isActive:u}=n,{text:f=""}=n,{class:p=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(7,i=d(n,l)),"src"in t&&o(0,r=t.src),"alt"in t&&o(1,s=t.alt),"href"in t&&o(2,c=t.href),"width"in t&&o(3,a=t.width),"isActive"in t&&o(4,u=t.isActive),"text"in t&&o(5,f=t.text),"class"in t&&o(6,p=t.class)},[r,s,c,a,u,f,p,i,function(e){I.call(this,t,e)}]}class yt extends lt{constructor(t){super(),ot(this,t,xt,wt,r,{src:0,alt:1,href:2,width:3,isActive:4,text:5,class:6})}}function Tt(t,e,n){const o=t.slice();return o[2]=e[n],o}function kt(t){let e,n;return e=new ct({props:{type:"button",text:t[2]}}),e.$on("click",(function(){return t[1](t[2])})),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(e,n){t=e},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Ct(t){let e,n,o,l,i,r,s,c,a,u,f,g,d,p,w,y,T,C,_,S,E,L,A,P,O,I;i=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",t[0]),y=new yt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2",text:"@spellmasons"}}),S=new yt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2",text:"Discord"}});let R=window.explainKeys||[],B=[];for(let e=0;e<R.length;e+=1)B[e]=kt(Tt(t,R,e));const G=t=>Q(B[t],1,1,(()=>{B[t]=null}));return{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(i.$$.fragment),r=x(),s=v("h1"),s.textContent=`${globalThis.i18n("Help")}`,c=x(),a=v("div"),u=x(),f=v("main"),g=v("div"),d=v("div"),p=v("h1"),p.textContent="Contact Me!",w=x(),X(y.$$.fragment),T=x(),C=v("h1"),C.textContent="Join our Discord Community!",_=x(),X(S.$$.fragment),E=x(),L=v("h1"),L.textContent="How to",A=x();for(let t=0;t<B.length;t+=1)B[t].c();P=x(),O=v("div"),k(s,"class","options-title svelte-z08h7l"),k(l,"class","flex align-items-center gap-20"),k(a,"class","flex flex-direction-column gap-15"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-z08h7l"),k(d,"class","pad-20 flex flex-direction-column gap-15 overflowyscroll"),M(d,"min-width","300px"),k(O,"id","explain-portal"),k(O,"class","svelte-z08h7l"),k(g,"class","flex gap-15 height100"),k(e,"class","flex height100")},m(t,h){m(t,e,h),$(e,n),$(n,o),$(o,l),tt(i,l,null),$(l,r),$(l,s),$(o,c),$(o,a),$(e,u),$(e,f),$(f,g),$(g,d),$(d,p),$(d,w),tt(y,d,null),$(d,T),$(d,C),$(d,_),tt(S,d,null),$(d,E),$(d,L),$(d,A);for(let t=0;t<B.length;t+=1)B[t].m(d,null);$(g,P),$(g,O),I=!0},p(t,[e]){if(0&e){let n;for(R=window.explainKeys||[],n=0;n<R.length;n+=1){const o=Tt(t,R,n);B[n]?(B[n].p(o,e),Y(B[n],1)):(B[n]=kt(o),B[n].c(),Y(B[n],1),B[n].m(d,null))}for(V(),n=R.length;n<B.length;n+=1)G(n);J()}},i(t){if(!I){Y(i.$$.fragment,t),Y(y.$$.fragment,t),Y(S.$$.fragment,t);for(let t=0;t<R.length;t+=1)Y(B[t]);I=!0}},o(t){Q(i.$$.fragment,t),Q(y.$$.fragment,t),Q(S.$$.fragment,t),B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)Q(B[t]);I=!1},d(t){t&&h(e),et(i),et(y),et(S),b(B,t)}}}function _t(t){return[()=>window.goBack(),t=>window.menuExplain(t,!0)]}class St extends lt{constructor(t){super(),ot(this,t,_t,Ct,r,{})}}function Mt(t){let n,o,l,i,r,s;const c=t[5].default,a=function(t,e,n,o){if(t){const l=f(t,e,n,o);return t[0](l)}}(c,t,t[4],null);let u=[{class:l=`button-wrapper ${t[2]} ${t[0]?"is-active":""} ${void 0!==t[1]?t[1]:""}`},t[3]],g={};for(let t=0;t<u.length;t+=1)g=e(g,u[t]);return{c(){n=v("button"),o=v("div"),a&&a.c(),k(o,"class","svelte-1q3uust"),C(n,g),E(n,"svelte-1q3uust",!0)},m(e,l){m(e,n,l),$(n,o),a&&a.m(o,null),n.autofocus&&n.focus(),i=!0,r||(s=T(n,"click",t[6]),r=!0)},p(t,[e]){a&&a.p&&(!i||16&e)&&function(t,e,n,o,l,i){if(l){const r=f(e,n,o,i);t.p(r,l)}}(a,c,t,t[4],i?function(t,e,n,o){if(t[2]&&o){const l=t[2](o(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|l[o];return t}return e.dirty|l}return e.dirty}(c,t[4],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[4]),null),C(n,g=W(u,[(!i||7&e&&l!==(l=`button-wrapper ${t[2]} ${t[0]?"is-active":""} ${void 0!==t[1]?t[1]:""}`))&&{class:l},8&e&&t[3]])),E(n,"svelte-1q3uust",!0)},i(t){i||(Y(a,t),i=!0)},o(t){Q(a,t),i=!1},d(t){t&&h(n),a&&a.d(t),r=!1,s()}}}function Et(t,n,o){const l=["isActive","align","class"];let i=d(n,l),{$$slots:r={},$$scope:s}=n,{isActive:c}=n,{align:a}=n,{class:u=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(3,i=d(n,l)),"isActive"in t&&o(0,c=t.isActive),"align"in t&&o(1,a=t.align),"class"in t&&o(2,u=t.class),"$$scope"in t&&o(4,s=t.$$scope)},[c,a,u,i,s,r,function(e){I.call(this,t,e)}]}class Lt extends lt{constructor(t){super(),ot(this,t,Et,Mt,r,{isActive:0,align:1,class:2})}}const At="OPTIONS",Pt="LOAD",Ot="LOCALIZATION",It="CREDITS",Rt="HELP",Bt="PLAY",Gt="MULTIPLAYER_SERVER_CHOOSER";function Ut(t,e,n){const o=t.slice();return o[9]=e[n][0],o[10]=e[n][1],o}function Dt(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function qt(e){let n,o=(e[13]||"").split("Key").join("").split("Digit").join("").toLowerCase()+"";return{c(){n=w(o)},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function jt(e){let n,o=globalThis.i18n("reassign")+"";return{c(){n=w(o)},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function zt(t){let e,n,o,l;function i(t,e){return t[0]==t[9]&&t[1]==t[15]?jt:qt}let r=i(t),s=r(t);function c(){return t[5](t[9],t[15])}return{c(){e=v("td"),n=v("button"),s.c(),k(n,"class","reassignKey svelte-bp9ml1")},m(t,i){m(t,e,i),$(e,n),s.m(n,null),o||(l=T(n,"click",c),o=!0)},p(e,o){r===(r=i(t=e))&&s?s.p(t,o):(s.d(1),s=r(t),s&&(s.c(),s.m(n,null)))},d(t){t&&h(e),s.d(),o=!1,l()}}}function Nt(t){let e,n,o,l,i,r=globalThis.i18n(t[9])+"",s=Object.assign(["","",""],t[10]),c=[];for(let e=0;e<s.length;e+=1)c[e]=zt(Dt(t,s,e));return{c(){e=v("tr"),n=v("td"),o=w(r),l=x();for(let t=0;t<c.length;t+=1)c[t].c();i=x()},m(t,r){m(t,e,r),$(e,n),$(n,o),$(e,l);for(let t=0;t<c.length;t+=1)c[t].m(e,null);$(e,i)},p(t,n){if(19&n){let o;for(s=Object.assign(["","",""],t[10]),o=0;o<s.length;o+=1){const l=Dt(t,s,o);c[o]?c[o].p(l,n):(c[o]=zt(l),c[o].c(),c[o].m(e,i))}for(;o<c.length;o+=1)c[o].d(1);c.length=s.length}},d(t){t&&h(e),b(c,t)}}}function Ht(t){let e,n,o,l=Object.entries(globalThis.controlMap||{}),i=[];for(let e=0;e<l.length;e+=1)i[e]=Nt(Ut(t,l,e));return{c(){e=v("tr"),e.innerHTML="<td></td> \n            <td>Option 1</td> \n            <td>Option 2</td> \n            <td>Option 3</td>",n=x();for(let t=0;t<i.length;t+=1)i[t].c();o=y()},m(t,l){m(t,e,l),m(t,n,l);for(let e=0;e<i.length;e+=1)i[e].m(t,l);m(t,o,l)},p(t,e){if(19&e){let n;for(l=Object.entries(globalThis.controlMap||{}),n=0;n<l.length;n+=1){const r=Ut(t,l,n);i[n]?i[n].p(r,e):(i[n]=Nt(r),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=l.length}},d(t){t&&h(e),t&&h(n),b(i,t),t&&h(o)}}}function Ft(e){let n,o,l,i,s,c=e[2],a=Ht(e);return{c(){n=v("h2"),o=w(" "),l=w(e[3]),i=x(),s=v("table"),a.c(),M(n,"color","red"),k(s,"id","keymapping")},m(t,e){m(t,n,e),$(n,o),$(n,l),m(t,i,e),m(t,s,e),a.m(s,null)},p(t,[e]){8&e&&_(l,t[3]),4&e&&r(c,c=t[2])?(a.d(1),a=Ht(t),a.c(),a.m(s,null)):a.p(t,e)},i:t,o:t,d(t){t&&h(n),t&&h(i),t&&h(s),a.d(t)}}}function Zt(t,e,n){function o(t,e,o){globalThis.controlMap[r][s]=o,globalThis.persistControls(),n(2,c++,c),a("",0)}function l(t){r&&(globalThis.controlMap?o(0,0,t.code):console.error("Cannot set key, no globalThis.controlMap"))}function i(t){if(globalThis.mouseButtonToKeyCode||console.error("mouseButtonToKeyCode is undefined"),void 0!==t.button){const e=globalThis.mouseButtonToKeyCode(t.button);r&&(globalThis.controlMap?0==t.button||1==t.button||2==t.button?n(3,u=globalThis.i18n("mouseRebindError")):o(0,0,e):console.error("Cannot set key, no globalThis.controlMap"))}}P((()=>{document.body.addEventListener("keydown",l),document.body.addEventListener("mousedown",i)})),O((()=>{document.body.removeEventListener("keydown",l),document.body.removeEventListener("mousedown",i)}));let r="",s=0,c=0;function a(t,e){n(0,r=t),n(1,s=e),n(3,u="")}let u="";return[r,s,c,u,a,(t,e)=>a(t,e)]}class Kt extends lt{constructor(t){super(),ot(this,t,Zt,Ft,r,{})}}const Vt=[];function Jt(e,n=t){let o;const l=new Set;function i(t){if(r(e,t)&&(e=t,o)){const t=!Vt.length;for(const t of l)t[1](),Vt.push(t,e);if(t){for(let t=0;t<Vt.length;t+=2)Vt[t][0](Vt[t+1]);Vt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,s=t){const c=[r,s];return l.add(c),1===l.size&&(o=n(i)||t),r(e),()=>{l.delete(c),0===l.size&&(o(),o=null)}}}}const Yt=Jt([]),Qt=Jt(!1),Wt=Jt(!1),Xt=Jt(!1);function te(){const t=window.isConnected();Qt.set(t),t||Wt.set(!1),Xt.set(!1)}function ee(){return window.pieDisconnect().then(te)}function ne(e){let n,o,i,r,s,c,a,u,f,g,d,p;return{c(){n=v("div"),o=v("div"),i=v("label"),i.textContent=`${globalThis.i18n("Player Name")}`,r=x(),s=v("input"),c=x(),a=v("div"),u=v("label"),u.textContent=`${globalThis.i18n("Robe Color")}`,f=x(),g=v("input"),k(i,"for","player-name"),k(s,"type","text"),k(s,"name","player-name"),k(o,"class","flex flex-direction-column gap-15"),k(u,"for","robe"),k(g,"type","color"),k(g,"name","robe"),k(a,"class","flex flex-direction-column gap-15"),k(n,"class","flex gap-15")},m(t,l){m(t,n,l),$(n,o),$(o,i),$(o,r),$(o,s),S(s,e[0]),$(n,c),$(n,a),$(a,u),$(a,f),$(a,g),S(g,e[1]),d||(p=[T(s,"input",e[4]),T(s,"input",e[5]),T(g,"input",e[6]),T(g,"blur",e[7])],d=!0)},p(t,[e]){1&e&&s.value!==t[0]&&S(s,t[0]),2&e&&S(g,t[1])},i:t,o:t,d(t){t&&h(n),d=!1,l(p)}}}function oe(t,e,n){let o;u(t,Yt,(t=>n(8,o=t)));let l=globalThis.storageGet("player-name"),i=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`,r=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`;const s=t=>parseInt(t.slice(1),16);function c(t,e,n){window.configPlayer({color:s(t),colorMagic:s(e),name:n}),p(Yt,o=globalThis.lobbyPlayerList,o)}P((()=>{setTimeout((()=>{c(i,r,l)}),200)}));return[l,i,r,c,function(){l=this.value,n(0,l)},()=>{c(i,r,l)},function(){i=this.value,n(1,i)},()=>{c(i,r,l)}]}class le extends lt{constructor(t){super(),ot(this,t,oe,ne,r,{})}}function ie(e){let n,o,l,i,r=globalThis.i18n("Language")+"";return{c(){n=v("img"),l=w("\r\n                       \r\n                    "),i=w(r),a(n.src,o="ui/localizationIcon.png")||k(n,"src","ui/localizationIcon.png"),k(n,"alt","language options"),k(n,"width","24"),k(n,"height","24"),M(n,"transform","scale(1.4)")},m(t,e){m(t,n,e),m(t,l,e),m(t,i,e)},p:t,d(t){t&&h(n),t&&h(l),t&&h(i)}}}function re(e){let n,o,l,i,r;return o=new ct({props:{text:"Toggle FPS / Latency Monitor"}}),o.$on("click",e[21]),i=new ct({props:{text:"Toggle Console"}}),i.$on("click",e[22]),{c(){n=v("div"),X(o.$$.fragment),l=x(),X(i.$$.fragment),k(n,"class","flex flex-direction-column gap-15")},m(t,e){m(t,n,e),tt(o,n,null),$(n,l),tt(i,n,null),r=!0},p:t,i(t){r||(Y(o.$$.fragment,t),Y(i.$$.fragment,t),r=!0)},o(t){Q(o.$$.fragment,t),Q(i.$$.fragment,t),r=!1},d(t){t&&h(n),et(o),et(i)}}}function se(e){let n,o;return n=new Kt({}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ce(e){let n,o;return n=new le({}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ae(t){let e,n,o,i,r,s,c,a,u,f,g,d,p,b=globalThis.i18n("Enable Cinematic Camera")+"";n=new ct({props:{text:"Set Fullscreen"}}),n.$on("click",t[16]),i=new ct({props:{text:"Set Windowed Mode"}}),i.$on("click",t[17]);let y=globalThis.isElectron&&function(t){let e,n,o,l,i,r,s,c,a,u=globalThis.i18n("UI Scale")+"";return r=new ct({props:{text:"Smaller"}}),r.$on("click",t[19]),c=new ct({props:{text:"Bigger"}}),c.$on("click",t[20]),{c(){e=w(u),n=w(": "),o=w(t[3]),l=x(),i=v("div"),X(r.$$.fragment),s=x(),X(c.$$.fragment),k(i,"class","flex gap-15")},m(t,u){m(t,e,u),m(t,n,u),m(t,o,u),m(t,l,u),m(t,i,u),tt(r,i,null),$(i,s),tt(c,i,null),a=!0},p(t,e){(!a||8&e)&&_(o,t[3])},i(t){a||(Y(r.$$.fragment,t),Y(c.$$.fragment,t),a=!0)},o(t){Q(r.$$.fragment,t),Q(c.$$.fragment,t),a=!1},d(t){t&&h(e),t&&h(n),t&&h(o),t&&h(l),t&&h(i),et(r),et(c)}}}(t);return{c(){e=v("div"),X(n.$$.fragment),o=x(),X(i.$$.fragment),r=x(),s=v("label"),c=v("input"),a=x(),u=w(b),f=x(),y&&y.c(),k(c,"type","checkbox"),k(e,"class","flex flex-direction-column gap-15")},m(l,h){m(l,e,h),tt(n,e,null),$(e,o),tt(i,e,null),$(e,r),$(e,s),$(s,c),c.checked=t[2],$(s,a),$(s,u),$(e,f),y&&y.m(e,null),g=!0,d||(p=[T(c,"change",t[18]),T(c,"click",t[5])],d=!0)},p(t,e){4&e&&(c.checked=t[2]),globalThis.isElectron&&y.p(t,e)},i(t){g||(Y(n.$$.fragment,t),Y(i.$$.fragment,t),Y(y),g=!0)},o(t){Q(n.$$.fragment,t),Q(i.$$.fragment,t),Q(y),g=!1},d(t){t&&h(e),et(n),et(i),y&&y.d(),d=!1,l(p)}}}function ue(e){let n,o,i,r,s,c,a,u,f,g,d,p,b,y,C,_,S,M=globalThis.i18n("Total Volume")+"",E=globalThis.i18n("Music Volume")+"",L=globalThis.i18n("Sound Effects Volume")+"";return y=new ct({props:{text:"Play next song"}}),y.$on("click",e[15]),{c(){n=v("div"),o=w(M),i=x(),r=v("input"),s=x(),c=w(E),a=x(),u=v("input"),f=x(),g=w(L),d=x(),p=v("input"),b=x(),X(y.$$.fragment),k(r,"type","range"),r.value=100*window.volume,k(r,"min","0"),k(r,"max","100"),k(u,"type","range"),u.value=100*window.volumeMusic,k(u,"min","0"),k(u,"max","100"),k(p,"type","range"),p.value=100*window.volumeGame,k(p,"min","0"),k(p,"max","100"),k(n,"class","flex flex-direction-column gap-15")},m(t,e){m(t,n,e),$(n,o),$(n,i),$(n,r),$(n,s),$(n,c),$(n,a),$(n,u),$(n,f),$(n,g),$(n,d),$(n,p),$(n,b),tt(y,n,null),C=!0,_||(S=[T(r,"input",he),T(u,"input",be),T(p,"input",ve)],_=!0)},p:t,i(t){C||(Y(y.$$.fragment,t),C=!0)},o(t){Q(y.$$.fragment,t),C=!1},d(t){t&&h(n),et(y),_=!1,l(S)}}}function fe(e){let n,o,l,i,r,s,c,a,u,f,g,d,p,b,y,C,_,S,M,E,L,A,P,O,I,R,B,G,U,D,q,j,z,N=globalThis.skipTutorial&&void 0!==globalThis.isTutorialComplete&&!globalThis.isTutorialComplete();r=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),r.$on("click",e[6]),f=new ct({props:{isActive:e[1]==$e,type:"button",text:`🔊 ${globalThis.i18n("Audio")}`,style:"text-align:left",doLocalizeText:!1}}),f.$on("click",e[7]),d=new ct({props:{isActive:e[1]==me,type:"button",text:`🖥️ ${globalThis.i18n("Video")}`,style:"text-align:left",doLocalizeText:!1}}),d.$on("click",e[8]),b=new ct({props:{isActive:e[1]==pe,type:"button",text:`🧙 ${globalThis.i18n("Player")}`,style:"text-align:left",doLocalizeText:!1}}),b.$on("click",e[9]),C=new ct({props:{isActive:e[1]==ge,type:"button",text:`⌨️ ${globalThis.i18n("Controls")}`,style:"text-align:left",doLocalizeText:!1}}),C.$on("click",e[10]);let H=N&&function(e){let n,o;return n=new ct({props:{text:"Skip Tutorial",style:"text-align:left"}}),n.$on("click",e[11]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);M=new ct({props:{type:"button",text:`❓ ${globalThis.i18n("Reset Tutorial")}`,style:"text-align:left",doLocalizeText:!1}}),M.$on("click",e[12]),L=new Lt({props:{class:"button-wrapper-bg-2",align:"left",$$slots:{default:[ie]},$$scope:{ctx:e}}}),L.$on("click",e[13]);const F=[ue,ae,ce,se,re],Z=[];function K(t,e){return t[1]==$e?0:t[1]==me?1:t[1]==pe?2:t[1]==ge?3:t[1]==de?4:-1}return~(U=K(e))&&(D=Z[U]=F[U](e)),{c(){n=v("div"),o=v("aside"),l=v("div"),i=v("div"),X(r.$$.fragment),s=x(),c=v("h1"),c.textContent=`${globalThis.i18n("Settings")}`,a=x(),u=v("div"),X(f.$$.fragment),g=x(),X(d.$$.fragment),p=x(),X(b.$$.fragment),y=x(),X(C.$$.fragment),_=x(),H&&H.c(),S=x(),X(M.$$.fragment),E=x(),X(L.$$.fragment),A=x(),P=v("button"),O=w("Developer Settings"),R=x(),B=v("main"),G=v("div"),D&&D.c(),k(c,"class","options-title svelte-5pyo49"),k(i,"class","flex align-items-center gap-20"),k(u,"class","flex flex-direction-column gap-15"),k(l,"class","flex flex-direction-column gap-15 pad-20"),k(P,"id","devSettings"),k(P,"isactive",I=e[1]==de),k(P,"type","button"),k(P,"class","svelte-5pyo49"),k(o,"class","svelte-5pyo49"),k(G,"class","pad-20"),k(n,"class","flex")},m(t,h){m(t,n,h),$(n,o),$(o,l),$(l,i),tt(r,i,null),$(i,s),$(i,c),$(l,a),$(l,u),tt(f,u,null),$(u,g),tt(d,u,null),$(u,p),tt(b,u,null),$(u,y),tt(C,u,null),$(u,_),H&&H.m(u,null),$(u,S),tt(M,u,null),$(u,E),tt(L,u,null),$(o,A),$(o,P),$(P,O),$(n,R),$(n,B),$(B,G),~U&&Z[U].m(G,null),q=!0,j||(z=T(P,"click",e[14]),j=!0)},p(t,[e]){const n={};2&e&&(n.isActive=t[1]==$e),f.$set(n);const o={};2&e&&(o.isActive=t[1]==me),d.$set(o);const l={};2&e&&(l.isActive=t[1]==pe),b.$set(l);const i={};2&e&&(i.isActive=t[1]==ge),C.$set(i),N&&H.p(t,e);const r={};16777216&e&&(r.$$scope={dirty:e,ctx:t}),L.$set(r),(!q||2&e&&I!==(I=t[1]==de))&&k(P,"isactive",I);let s=U;U=K(t),U===s?~U&&Z[U].p(t,e):(D&&(V(),Q(Z[s],1,1,(()=>{Z[s]=null})),J()),~U?(D=Z[U],D?D.p(t,e):(D=Z[U]=F[U](t),D.c()),Y(D,1),D.m(G,null)):D=null)},i(t){q||(Y(r.$$.fragment,t),Y(f.$$.fragment,t),Y(d.$$.fragment,t),Y(b.$$.fragment,t),Y(C.$$.fragment,t),Y(H),Y(M.$$.fragment,t),Y(L.$$.fragment,t),Y(D),q=!0)},o(t){Q(r.$$.fragment,t),Q(f.$$.fragment,t),Q(d.$$.fragment,t),Q(b.$$.fragment,t),Q(C.$$.fragment,t),Q(H),Q(M.$$.fragment,t),Q(L.$$.fragment,t),Q(D),q=!1},d(t){t&&h(n),et(r),et(f),et(d),et(b),et(C),H&&H.d(),et(M),et(L),~U&&Z[U].d(),j=!1,z()}}}const ge="KEY_MAPPING",de="EXTRAS",pe="PLAYER_CONFIG",$e="AUDIO",me="VIDEO";function he(t){window.changeVolume(t.target.value/100)}function be(t){window.changeVolumeMusic(t.target.value/100)}function ve(t){window.changeVolumeGame(t.target.value/100)}function we(t,e,n){let{setRoute:o}=e,l=$e;function i(t){n(1,l=t)}let r=globalThis.cinematicCameraEnabled;let s=NaN;globalThis.STORAGE_ID_UI_ZOOM?s=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM)):console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");let c=isNaN(s)?1:s;return t.$$set=t=>{"setRoute"in t&&n(0,o=t.setRoute)},[o,l,r,c,i,function(t){globalThis.setCinematicCameraEnabled(t.target.checked),n(2,r=globalThis.cinematicCameraEnabled)},()=>window.goBack(),()=>i($e),()=>i(me),()=>i(pe),()=>i(ge),()=>{globalThis.skipTutorial()},()=>globalThis.resetTutorial(),()=>{o(Ot)},()=>i(de),()=>window.playNextSong(),()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!0):document.body.requestFullscreen().catch((t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message} (${t.name})`)}))},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!1):document.exitFullscreen()},function(){r=this.checked,n(2,r)},()=>{n(3,c-=.1),n(3,c=Math.round(10*c)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,c),globalThis.electronSettings.setUIZoom(c)},()=>{n(3,c+=.1),n(3,c=Math.round(10*c)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,c),globalThis.electronSettings.setUIZoom(c)},()=>{window.monitorFPS()},()=>{window.electronSettings.toggleDevTools()}]}class xe extends lt{constructor(t){super(),ot(this,t,we,fe,r,{setRoute:0})}}function ye(e){let n,o;return{c(){n=v("img"),a(n.src,o="ui/localizationIcon.png")||k(n,"src","ui/localizationIcon.png"),k(n,"alt","language options"),k(n,"width","24"),k(n,"height","24"),M(n,"transform","scale(1.4)")},m(t,e){m(t,n,e)},p:t,d(t){t&&h(n)}}}function Te(t){let e,n,o={ctx:t,current:null,token:null,hasCatch:!0,pending:Se,then:_e,catch:Ce,blocks:[,,,]};return function(t,e){const n=e.token={};function o(t,o,l,i){if(e.token!==n)return;e.resolved=i;let r=e.ctx;void 0!==l&&(r=r.slice(),r[l]=i);const s=t&&(e.current=t)(r);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(V(),Q(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),J())})):e.block.d(1),s.c(),Y(s,1),s.m(e.mount(),e.anchor),c=!0),e.block=s,e.blocks&&(e.blocks[o]=s),c&&H()}if((l=t)&&"object"==typeof l&&"function"==typeof l.then){const n=A();if(t.then((t=>{L(n),o(e.then,1,e.value,t),L(null)}),(t=>{if(L(n),o(e.catch,2,e.error,t),L(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var l}(window.setupPixiPromise,o),{c(){e=y(),o.block.c()},m(t,l){m(t,e,l),o.block.m(t,o.anchor=l),o.mount=()=>e.parentNode,o.anchor=e,n=!0},p(e,n){!function(t,e,n){const o=e.slice(),{resolved:l}=t;t.current===t.then&&(o[t.value]=l),t.current===t.catch&&(o[t.error]=l),t.block.p(o,n)}(o,t=e,n)},i(t){n||(Y(o.block),n=!0)},o(t){for(let t=0;t<3;t+=1){Q(o.blocks[t])}n=!1},d(t){t&&h(e),o.block.d(t),o.token=null,o=null}}}function ke(e){let n,o,l,i,s,c,a,u,f,g,d=e[2],p=Pe();const b=[Ee,Me],w=[];function y(t,e){return t[3]&&t[4]&&!globalThis.player.lobbyReady?0:1}o=y(e),l=w[o]=b[o](e);let T=Le(e),C=p&&function(e){let n,o;return n=new ct({props:{text:"Load",iconPath:"open.png"}}),n.$on("click",e[15]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return a=new ct({props:{text:"Settings",iconPath:"gear.png"}}),a.$on("click",e[16]),f=new ct({props:{text:"Quit to Main Menu",iconPath:"exitLeft.png"}}),f.$on("click",e[7]),{c(){n=v("div"),l.c(),i=x(),T.c(),s=x(),C&&C.c(),c=x(),X(a.$$.fragment),u=x(),X(f.$$.fragment),k(n,"class","list svelte-g9yx2d")},m(t,e){m(t,n,e),w[o].m(n,null),$(n,i),T.m(n,null),$(n,s),C&&C.m(n,null),$(n,c),tt(a,n,null),$(n,u),tt(f,n,null),g=!0},p(e,c){let a=o;o=y(e),o===a?w[o].p(e,c):(V(),Q(w[a],1,1,(()=>{w[a]=null})),J(),l=w[o],l?l.p(e,c):(l=w[o]=b[o](e),l.c()),Y(l,1),l.m(n,i)),4&c&&r(d,d=e[2])?(V(),Q(T,1,1,t),J(),T=Le(e),T.c(),Y(T,1),T.m(n,s)):T.p(e,c),p&&C.p(e,c)},i(t){g||(Y(l),Y(T),Y(C),Y(a.$$.fragment,t),Y(f.$$.fragment,t),g=!0)},o(t){Q(l),Q(T),Q(C),Q(a.$$.fragment,t),Q(f.$$.fragment,t),g=!1},d(t){t&&h(n),w[o].d(),T.d(t),C&&C.d(),et(a),et(f)}}}function Ce(e){let n;return{c(){n=v("p"),n.textContent="Something went wrong loading assets",M(n,"color","red")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function _e(e){let n,o,l,i,r,s,c,a,u,f,g,d,p,b=e[9]&&function(e){let n,o;return n=new ct({props:{text:"Resume Last Run",iconPath:"forward.png"}}),n.$on("click",e[17]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);l=new ct({props:{text:"New Run",iconPath:"singleplayer.png"}}),l.$on("click",e[5]),r=new ct({props:{text:"Multiplayer",iconPath:"massiveMultiplayer.png"}}),r.$on("click",e[6]),c=new ct({props:{text:"Load",iconPath:"open.png"}}),c.$on("click",e[18]),u=new ct({props:{text:"Settings",iconPath:"gear.png"}}),u.$on("click",e[19]);let w=globalThis.isElectron&&function(e){let n,o;return n=new ct({props:{text:"Quit Game",iconPath:"door.png"}}),n.$on("click",e[20]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return{c(){n=v("div"),b&&b.c(),o=x(),X(l.$$.fragment),i=x(),X(r.$$.fragment),s=x(),X(c.$$.fragment),a=x(),X(u.$$.fragment),f=x(),w&&w.c(),g=x(),d=v("br"),k(n,"class","list svelte-g9yx2d")},m(t,e){m(t,n,e),b&&b.m(n,null),$(n,o),tt(l,n,null),$(n,i),tt(r,n,null),$(n,s),tt(c,n,null),$(n,a),tt(u,n,null),$(n,f),w&&w.m(n,null),m(t,g,e),m(t,d,e),p=!0},p(t,e){t[9]&&b.p(t,e),globalThis.isElectron&&w.p(t,e)},i(t){p||(Y(b),Y(l.$$.fragment,t),Y(r.$$.fragment,t),Y(c.$$.fragment,t),Y(u.$$.fragment,t),Y(w),p=!0)},o(t){Q(b),Q(l.$$.fragment,t),Q(r.$$.fragment,t),Q(c.$$.fragment,t),Q(u.$$.fragment,t),Q(w),p=!1},d(t){t&&h(n),b&&b.d(),et(l),et(r),et(c),et(u),w&&w.d(),t&&h(g),t&&h(d)}}}function Se(e){let n;return{c(){n=w("loading assets...")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}function Me(e){let n,o,l,i,r=Pe();n=new ct({props:{text:"Resume Game",iconPath:"forward.png"}}),n.$on("click",Oe);let s=r&&function(e){let n,o;return n=new ct({props:{text:"Save",iconPath:"save.png"}}),n.$on("click",e[8]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return{c(){X(n.$$.fragment),o=x(),s&&s.c(),l=y()},m(t,e){tt(n,t,e),m(t,o,e),s&&s.m(t,e),m(t,l,e),i=!0},p(t,e){r&&s.p(t,e)},i(t){i||(Y(n.$$.fragment,t),Y(s),i=!0)},o(t){Q(n.$$.fragment,t),Q(s),i=!1},d(t){et(n,t),t&&h(o),s&&s.d(t),t&&h(l)}}}function Ee(e){let n,o;return n=new ct({props:{text:"Back to Lobby"}}),n.$on("click",e[13]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function Le(e){let n,o,l=globalThis.skipTutorial&&void 0!==globalThis.isTutorialComplete&&!globalThis.isTutorialComplete(),i=l&&function(e){let n,o;return n=new ct({props:{text:"Skip Tutorial"}}),n.$on("click",e[14]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}(e);return{c(){i&&i.c(),n=y()},m(t,e){i&&i.m(t,e),m(t,n,e),o=!0},p(t,e){l&&i.p(t,e)},i(t){o||(Y(i),o=!0)},o(t){Q(i),o=!1},d(t){i&&i.d(t),t&&h(n)}}}function Ae(t){let e,n,o,l,i,r,s,c,a,u,f,g,d,p,b,w,T;n=new ct({props:{text:"Help",iconPath:"question.png"}}),n.$on("click",t[10]),i=new ct({props:{text:"Credits"}}),i.$on("click",t[11]),c=new yt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2"}}),u=new yt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2"}}),g=new Lt({props:{class:"button-wrapper-bg-2",$$slots:{default:[ye]},$$scope:{ctx:t}}}),g.$on("click",t[12]);const C=[ke,Te],_=[];function S(t,e){return t[1]?0:1}return p=S(t),b=_[p]=C[p](t),{c(){e=v("div"),X(n.$$.fragment),o=x(),l=v("div"),X(i.$$.fragment),r=x(),s=v("div"),X(c.$$.fragment),a=x(),X(u.$$.fragment),f=x(),X(g.$$.fragment),d=x(),b.c(),w=y(),k(e,"id","corner-left"),k(e,"class","flex gap svelte-g9yx2d"),M(e,"flex-direction","column"),k(s,"class","flex gap svelte-g9yx2d"),k(l,"id","corner"),k(l,"class","flex gap svelte-g9yx2d"),M(l,"flex-direction","column")},m(t,h){m(t,e,h),tt(n,e,null),m(t,o,h),m(t,l,h),tt(i,l,null),$(l,r),$(l,s),tt(c,s,null),$(s,a),tt(u,s,null),$(s,f),tt(g,s,null),m(t,d,h),_[p].m(t,h),m(t,w,h),T=!0},p(t,[e]){const n={};2097152&e&&(n.$$scope={dirty:e,ctx:t}),g.$set(n);let o=p;p=S(t),p===o?_[p].p(t,e):(V(),Q(_[o],1,1,(()=>{_[o]=null})),J(),b=_[p],b?b.p(t,e):(b=_[p]=C[p](t),b.c()),Y(b,1),b.m(w.parentNode,w))},i(t){T||(Y(n.$$.fragment,t),Y(i.$$.fragment,t),Y(c.$$.fragment,t),Y(u.$$.fragment,t),Y(g.$$.fragment,t),Y(b),T=!0)},o(t){Q(n.$$.fragment,t),Q(i.$$.fragment,t),Q(c.$$.fragment,t),Q(u.$$.fragment,t),Q(g.$$.fragment,t),Q(b),T=!1},d(t){t&&h(e),et(n),t&&h(o),t&&h(l),et(i),et(c),et(u),et(g),t&&h(d),_[p].d(t),t&&h(w)}}}function Pe(){return"solomode_client_id"==globalThis.clientId}function Oe(){window.closeMenu()}function Ie(t,e,n){let o,l;u(t,Qt,(t=>n(3,o=t))),u(t,Wt,(t=>n(4,l=t)));let{setRoute:i}=e,{inGame:r}=e;if(globalThis.STORAGE_ID_UI_ZOOM){const t=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM));t&&globalThis.electronSettings.setUIZoom(t)}else console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");const s=!!globalThis.storageGet(`${globalThis.savePrefix}${globalThis.quicksaveKey}`);let c=0;return t.$$set=t=>{"setRoute"in t&&n(0,i=t.setRoute),"inGame"in t&&n(1,r=t.inGame)},[i,r,c,o,l,function(){window.playMusic(),window.startSingleplayer().then((()=>{te()}))},function(){window.playMusic(),Pe()&&ee(),i(Gt)},function(){if(confirm("Are you sure you want to quit to Main Menu?")){const t=new URL(location.href);t.searchParams.delete("game"),t.searchParams.delete("pieUrl"),window.history.pushState(null,null,t),window.exitCurrentGame().then(te)}},function(){const t=prompt(i18n("Enter a name for the saved game"));if(t){if(localStorage.getItem(pt+t)){if(!confirm(i18n("A save file with this name already exists.  Are you sure you want to overwrite it?")))return}window.save(t),alert("Game saved!")}},s,()=>i(Rt),()=>i(It),()=>{i(Ot)},()=>{i(Gt)},()=>{globalThis.skipTutorial(),n(2,c++,c)},()=>i(Pt),()=>i(At),()=>{globalThis.load(globalThis.quicksaveKey)},()=>i(Pt),()=>i(At),()=>{window.fullyExitGame()}]}class Re extends lt{constructor(t){super(),ot(this,t,Ie,Ae,r,{setRoute:0,inGame:1})}}function Be(t,e,n){const o=t.slice();return o[4]=e[n].language,o[5]=e[n].code,o[7]=n,o}function Ge(t){let e,n;return e=new ct({props:{text:t[4],isActive:t[1]==t[5],doLocalizeText:!1}}),e.$on("click",(function(){return t[3](t[5])})),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(n,o){t=n;const l={};2&o&&(l.isActive=t[1]==t[5]),e.$set(l)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Ue(t){let e,n,o,l,i,r,s,c,a,u,f;i=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",t[2]);let g=t[0],d=[];for(let e=0;e<g.length;e+=1)d[e]=Ge(Be(t,g,e));const p=t=>Q(d[t],1,1,(()=>{d[t]=null}));return{c(){e=v("div"),n=v("aside"),o=v("div"),l=v("div"),X(i.$$.fragment),r=x(),s=v("h1"),s.textContent=`${globalThis.i18n("Localization")}`,c=x(),a=v("main"),u=v("div");for(let t=0;t<d.length;t+=1)d[t].c();k(s,"class","options-title svelte-exei4x"),k(l,"class","flex align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-exei4x"),k(u,"class","pad-20 flex flex-direction-column gap-15"),k(e,"class","flex")},m(t,g){m(t,e,g),$(e,n),$(n,o),$(o,l),tt(i,l,null),$(l,r),$(l,s),$(e,c),$(e,a),$(a,u);for(let t=0;t<d.length;t+=1)d[t].m(u,null);f=!0},p(t,[e]){if(3&e){let n;for(g=t[0],n=0;n<g.length;n+=1){const o=Be(t,g,n);d[n]?(d[n].p(o,e),Y(d[n],1)):(d[n]=Ge(o),d[n].c(),Y(d[n],1),d[n].m(u,null))}for(V(),n=g.length;n<d.length;n+=1)p(n);J()}},i(t){if(!f){Y(i.$$.fragment,t);for(let t=0;t<g.length;t+=1)Y(d[t]);f=!0}},o(t){Q(i.$$.fragment,t),d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)Q(d[t]);f=!1},d(t){t&&h(e),et(i),b(d,t)}}}function De(t,e,n){const o=globalThis.getSupportedLanguages();let l=globalThis.getChosenLanguageCode();return[o,l,()=>window.goBack(),t=>{globalThis.setLanguage(t,!0),n(1,l=t),window.goBack()}]}class qe extends lt{constructor(t){super(),ot(this,t,De,Ue,r,{languages:0})}get languages(){return this.$$.ctx[0]}}function je(e){let n,o,l,i;return l=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),l.$on("click",e[0]),{c(){n=v("h1"),n.textContent="This page is still being built",o=x(),X(l.$$.fragment),k(n,"class","svelte-1n2jha3")},m(t,e){m(t,n,e),m(t,o,e),tt(l,t,e),i=!0},p:t,i(t){i||(Y(l.$$.fragment,t),i=!0)},o(t){Q(l.$$.fragment,t),i=!1},d(t){t&&h(n),t&&h(o),et(l,t)}}}function ze(t){return[()=>window.goBack()]}class Ne extends lt{constructor(t){super(),ot(this,t,ze,je,r,{})}}function He(t,e,n){const o=t.slice();return o[3]=e[n].name,o[4]=e[n].status,o[5]=e[n].color,o[6]=e[n].ready,o}function Fe(t){let e,n,o,l,i,r,s,c,a,u,f,g,d,p=t[3]+"",b=t[4]+"",y=t[6]+"";return{c(){e=v("tr"),n=v("td"),o=w(p),l=x(),i=v("td"),r=w(b),s=x(),c=v("td"),u=x(),f=v("td"),g=w(y),d=x(),k(c,"class","lobby-player-color svelte-g23pjw"),k(c,"style",a=`background-color:${t[5]};`)},m(t,a){m(t,e,a),$(e,n),$(n,o),$(e,l),$(e,i),$(i,r),$(e,s),$(e,c),$(e,u),$(e,f),$(f,g),$(e,d)},p(t,e){1&e&&p!==(p=t[3]+"")&&_(o,p),1&e&&b!==(b=t[4]+"")&&_(r,b),1&e&&a!==(a=`background-color:${t[5]};`)&&k(c,"style",a),1&e&&y!==(y=t[6]+"")&&_(g,y)},d(t){t&&h(e)}}}function Ze(t){let e,n,o,l,i,r,s,c,a,u,f;o=new le({}),i=new ct({props:{type:"button",text:"Ready",class:"sm"}}),i.$on("click",t[1]);let g=t[0],d=[];for(let e=0;e<g.length;e+=1)d[e]=Fe(He(t,g,e));return{c(){e=v("h1"),e.textContent=`${globalThis.i18n("Game Lobby")}`,n=x(),X(o.$$.fragment),l=x(),X(i.$$.fragment),r=x(),s=v("table"),c=v("thead"),c.innerHTML="<tr></tr>",a=x(),u=v("tbody");for(let t=0;t<d.length;t+=1)d[t].c();k(s,"id","lobby-player-list"),k(s,"class","svelte-g23pjw")},m(t,g){m(t,e,g),m(t,n,g),tt(o,t,g),m(t,l,g),tt(i,t,g),m(t,r,g),m(t,s,g),$(s,c),$(s,a),$(s,u);for(let t=0;t<d.length;t+=1)d[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(g=t[0],n=0;n<g.length;n+=1){const o=He(t,g,n);d[n]?d[n].p(o,e):(d[n]=Fe(o),d[n].c(),d[n].m(u,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=g.length}},i(t){f||(Y(o.$$.fragment,t),Y(i.$$.fragment,t),f=!0)},o(t){Q(o.$$.fragment,t),Q(i.$$.fragment,t),f=!1},d(t){t&&h(e),t&&h(n),et(o,t),t&&h(l),et(i,t),t&&h(r),t&&h(s),b(d,t)}}}function Ke(t,e,n){let o;u(t,Yt,(t=>n(0,o=t))),P((()=>{setInterval((()=>{p(Yt,o=globalThis.lobbyPlayerList,o)}),500)})),O((()=>{clearInterval(undefined)}));return[o,()=>{globalThis.configPlayer({lobbyReady:!0})}]}class Ve extends lt{constructor(t){super(),ot(this,t,Ke,Ze,r,{})}}function Je(t){let e,n;return{c(){e=w("Connecting...\r\n                "),n=v("div"),n.innerHTML='<div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div>',k(n,"class","lds-ellipsis svelte-qcde2c")},m(t,o){m(t,e,o),m(t,n,o)},d(t){t&&h(e),t&&h(n)}}}function Ye(t){let e,n,o,i,r,s,c,a,u,f;const g=[Xe,We,Qe],d=[];function p(t,e){return t[0]?0:t[4]?1:2}return r=p(t),s=d[r]=g[r](t),{c(){e=v("p"),e.textContent=`${globalThis.i18n("Game name")}`,n=x(),o=v("input"),i=x(),s.c(),c=y(),k(o,"class","svelte-qcde2c")},m(l,s){m(l,e,s),m(l,n,s),m(l,o,s),S(o,t[2]),m(l,i,s),d[r].m(l,s),m(l,c,s),a=!0,u||(f=[T(o,"input",t[13]),T(o,"keypress",t[14])],u=!0)},p(t,e){4&e&&o.value!==t[2]&&S(o,t[2]);let n=r;r=p(t),r===n?d[r].p(t,e):(V(),Q(d[n],1,1,(()=>{d[n]=null})),J(),s=d[r],s?s.p(t,e):(s=d[r]=g[r](t),s.c()),Y(s,1),s.m(c.parentNode,c))},i(t){a||(Y(s),a=!0)},o(t){Q(s),a=!1},d(t){t&&h(e),t&&h(n),t&&h(o),t&&h(i),d[r].d(t),t&&h(c),u=!1,l(f)}}}function Qe(t){let e,n,o,l,i,r,s,c;return n=new ct({props:{text:"Host"}}),n.$on("click",t[9]),l=new ct({props:{text:"Join"}}),l.$on("click",t[9]),{c(){e=v("div"),X(n.$$.fragment),o=x(),X(l.$$.fragment),i=x(),r=v("div"),s=w(t[3]),k(e,"class","flex gap-15"),M(r,"color","red")},m(t,a){m(t,e,a),tt(n,e,null),$(e,o),tt(l,e,null),m(t,i,a),m(t,r,a),$(r,s),c=!0},p(t,e){(!c||8&e)&&_(s,t[3])},i(t){c||(Y(n.$$.fragment,t),Y(l.$$.fragment,t),c=!0)},o(t){Q(n.$$.fragment,t),Q(l.$$.fragment,t),c=!1},d(t){t&&h(e),et(n),et(l),t&&h(i),t&&h(r)}}}function We(e){let n,o;return n=new ct({props:{text:"Leave Room"}}),n.$on("click",e[8]),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function Xe(e){let n,o;return{c(){n=w("Joining...\r\n                    "),o=v("div"),o.innerHTML='<div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div>',k(o,"class","lds-ellipsis svelte-qcde2c")},m(t,e){m(t,n,e),m(t,o,e)},p:t,i:t,o:t,d(t){t&&h(n),t&&h(o)}}}function tn(t){let e,n;return e=new Ve({}),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function en(t){let e,n,o,i,r,s,c,a,u,f,g,d,p,b,y,C,_,E,L,A,P,O,I,R,B,G=globalThis.i18n("Server Url")+"";r=new ct({props:{type:"button",text:"🠔 Back",class:"sm"}}),r.$on("click",t[10]),_=new ct({props:{disabled:t[6],text:"Connect"}}),_.$on("click",t[7]),L=new ct({props:{disabled:!t[6],text:"Disconnect"}}),L.$on("click",ee);let U=t[5]&&Je(),D=t[6]&&Ye(t),q=t[4]&&tn();return{c(){e=v("div"),n=v("aside"),o=v("div"),i=v("div"),X(r.$$.fragment),s=x(),c=v("h1"),c.textContent=`${globalThis.i18n("Multiplayer")}`,a=x(),u=v("main"),f=v("div"),g=w(G),d=x(),p=v("div"),b=v("input"),y=x(),C=v("div"),X(_.$$.fragment),E=x(),X(L.$$.fragment),A=x(),U&&U.c(),P=x(),D&&D.c(),O=x(),q&&q.c(),k(c,"class","options-title"),k(i,"class","flex align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(b,"class","svelte-qcde2c"),k(C,"class","flex gap-15"),k(f,"class","pad-20"),M(f,"min-width","400px"),k(e,"class","flex")},m(l,h){m(l,e,h),$(e,n),$(n,o),$(o,i),tt(r,i,null),$(i,s),$(i,c),$(e,a),$(e,u),$(u,f),$(f,g),$(f,d),$(f,p),$(p,b),S(b,t[1]),$(p,y),$(p,C),tt(_,C,null),$(C,E),tt(L,C,null),$(f,A),U&&U.m(f,null),$(f,P),D&&D.m(f,null),$(f,O),q&&q.m(f,null),I=!0,R||(B=[T(b,"input",t[11]),T(b,"keypress",t[12])],R=!0)},p(t,[e]){2&e&&b.value!==t[1]&&S(b,t[1]);const n={};64&e&&(n.disabled=t[6]),_.$set(n);const o={};64&e&&(o.disabled=!t[6]),L.$set(o),t[5]?U||(U=Je(),U.c(),U.m(f,P)):U&&(U.d(1),U=null),t[6]?D?(D.p(t,e),64&e&&Y(D,1)):(D=Ye(t),D.c(),Y(D,1),D.m(f,O)):D&&(V(),Q(D,1,1,(()=>{D=null})),J()),t[4]?q?16&e&&Y(q,1):(q=tn(),q.c(),Y(q,1),q.m(f,null)):q&&(V(),Q(q,1,1,(()=>{q=null})),J())},i(t){I||(Y(r.$$.fragment,t),Y(_.$$.fragment,t),Y(L.$$.fragment,t),Y(D),Y(q),I=!0)},o(t){Q(r.$$.fragment,t),Q(_.$$.fragment,t),Q(L.$$.fragment,t),Q(D),Q(q),I=!1},d(t){t&&h(e),et(r),et(_),et(L),U&&U.d(),D&&D.d(),q&&q.d(),R=!1,l(B)}}}function nn(t,e,n){let o,l,i;u(t,Wt,(t=>n(4,o=t))),u(t,Xt,(t=>n(5,l=t))),u(t,Qt,(t=>n(6,i=t)));let r=!1,s=new URLSearchParams(location.search),c=s.get("pieUrl"),a=s.get("game"),f="";function g(){if(c){console.log("Menu: Connect to server",c),p(Xt,l=!0,l);const t=new URL(location.href);return t.searchParams.set("pieUrl",c),window.history.pushState(null,null,t),window.connect_to_wsPie_server(c).catch(console.error).then(te)}return Promise.reject("No wsUrl defined to connect to")}function d(){a?window.isConnected()?(console.log("Menu: Connect to game name",a),n(0,r=!0),n(3,f=""),window.joinRoom({name:a}).then((()=>{const t=new URL(location.href);t.searchParams.set("game",a),window.history.pushState(null,null,t),p(Wt,o=!0,o)})).catch((t=>{console.error("Could not join room",t),n(3,f=t)})).then((()=>{n(0,r=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer"):console.log("Cannot join game until a gameName is provided")}P((()=>{te()}));return[r,c,a,f,o,l,i,g,function(){window.pieLeaveRoom(),p(Wt,o=!1,o)},d,()=>{window.goBack()},function(){c=this.value,n(1,c)},t=>{"Enter"==t.key&&g()},function(){a=this.value,n(2,a)},t=>{"Enter"==t.key&&d()}]}class on extends lt{constructor(t){super(),ot(this,t,nn,en,r,{})}}function ln(e){let n,o;return n=new Ne({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function rn(e){let n,o;return n=new St({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function sn(e){let n,o;return n=new dt({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function cn(e){let n,o;return n=new xe({props:{route:!0,setRoute:e[5]}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function an(e){let n,o;return n=new vt({props:{route:!0,setRoute:e[5]}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function un(e){let n,o;return n=new qe({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function fn(e){let n,o;return n=new on({props:{route:!0}}),{c(){X(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(Y(n.$$.fragment,t),o=!0)},o(t){Q(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function gn(t){let e,n,o,l,i,r,s,c;const u=[pn,dn],f=[];function g(t,e){return t[4]?0:1}return r=g(t),s=f[r]=u[r](t),{c(){e=v("div"),n=v("div"),o=v("img"),i=x(),s.c(),k(o,"id","logo"),a(o.src,l="ui/logo.png")||k(o,"src","ui/logo.png"),k(o,"alt","Spellmasons logo"),k(o,"width","800"),k(n,"id","main-menu-inner"),k(e,"id","main-menu")},m(t,l){m(t,e,l),$(e,n),$(n,o),$(n,i),f[r].m(n,null),c=!0},p(t,e){let o=r;r=g(t),r===o?f[r].p(t,e):(V(),Q(f[o],1,1,(()=>{f[o]=null})),J(),s=f[r],s?s.p(t,e):(s=f[r]=u[r](t),s.c()),Y(s,1),s.m(n,null))},i(t){c||(Y(s),c=!0)},o(t){Q(s),c=!1},d(t){t&&h(e),f[r].d()}}}function dn(e){let n,o,l,i,r,s,c,a=Math.floor(100*e[3])+"";return{c(){n=v("span"),n.textContent="Update progress:",o=x(),l=v("div"),i=v("div"),r=w(a),s=w("%  "),k(i,"style",c=`width:${Math.max(15,Math.floor(100*e[3]))}%`),k(l,"class","progress")},m(t,e){m(t,n,e),m(t,o,e),m(t,l,e),$(l,i),$(i,r),$(i,s)},p(t,e){8&e&&a!==(a=Math.floor(100*t[3])+"")&&_(r,a),8&e&&c!==(c=`width:${Math.max(15,Math.floor(100*t[3]))}%`)&&k(i,"style",c)},i:t,o:t,d(t){t&&h(n),t&&h(o),t&&h(l)}}}function pn(t){let e,n;return e=new Re({props:{setRoute:t[5],inGame:t[1]}}),{c(){X(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.inGame=t[1]),e.$set(o)},i(t){n||(Y(e.$$.fragment,t),n=!0)},o(t){Q(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function $n(t){let e,n,o,l,i,r;const s=[gn,fn,un,an,cn,sn,rn,ln],c=[];function a(t,e){return t[0]==Bt?0:t[0]==Gt?1:t[0]==Ot?2:t[0]==Pt?3:t[0]==At?4:t[0]==It?5:t[0]==Rt?6:"TODO"==t[0]?7:-1}return~(l=a(t))&&(i=c[l]=s[l](t)),{c(){e=v("div"),n=v("div"),o=v("div"),i&&i.c(),k(o,"class","decorative-border"),k(n,"class","full-fill"),k(e,"id","menu")},m(t,i){m(t,e,i),$(e,n),$(n,o),~l&&c[l].m(o,null),r=!0},p(t,e){let n=l;l=a(t),l===n?~l&&c[l].p(t,e):(i&&(V(),Q(c[n],1,1,(()=>{c[n]=null})),J()),~l?(i=c[l],i?i.p(t,e):(i=c[l]=s[l](t),i.c()),Y(i,1),i.m(o,null)):i=null)},i(t){r||(Y(i),r=!0)},o(t){Q(i),r=!1},d(t){t&&h(e),~l&&c[l].d()}}}function mn(e){let n,o,l=e[2],i=$n(e);return{c(){i.c(),n=y()},m(t,e){i.m(t,e),m(t,n,e),o=!0},p(e,[o]){4&o&&r(l,l=e[2])?(V(),Q(i,1,1,t),J(),i=$n(e),i.c(),Y(i,1),i.m(n.parentNode,n)):i.p(e,o)},i(t){o||(Y(i),o=!0)},o(t){Q(i),o=!1},d(t){t&&h(n),i.d(t)}}}function hn(t){if("Escape"===t.code)goBack()}function bn(t,e,n){let o;console.log("Menu: Svelte menu is running");let l=!1,i=0;function r(t){console.log("Menu: Route:",t),n(0,o=t),window.updateInGameMenuStatus()}window.refreshMenu=()=>{console.log("Force refresh menu"),n(2,i++,i)},window.updateInGameMenuStatus=()=>{n(1,l=void 0!==window.player)},r(Bt),window.goBack=function(){r(Bt)};let s=0,c=!0;return P((()=>{document.body.addEventListener("keydown",hn),globalThis.isElectron&&(globalThis.update?(console.log("Register to receive Update events."),globalThis.update.onUpdateCounter(((t,e)=>{console.log("Electron app update:",e),void 0!==e.progress&&n(3,s=e.progress),void 0!==e.complete&&n(4,c=e.complete)}))):console.error("Update: Cannot track update state, no globalThis.update"))})),O((()=>{document.body.removeEventListener("keydown",hn)})),window.setMenu=r,[o,l,i,s,c,r]}return new class extends lt{constructor(t){super(),ot(this,t,bn,mn,r,{})}}({target:document.getElementById("menu-app")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
