var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function l(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let s,c;function a(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function u(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function f(t,e,n){t.$$.on_destroy.push(u(e,n))}function d(t,n,o,l){return t[1]&&l?e(o.ctx.slice(),t[1](l(n))):o.ctx}function g(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function $(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function p(t,e,n){return t.set(n),e}function m(t,e){t.appendChild(e)}function h(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode&&t.parentNode.removeChild(t)}function w(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function y(){return x(" ")}function k(){return x("")}function T(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set?t[o]=e[o]:C(t,o,e[o])}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function L(t,e){t.value=null==e?"":e}function S(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function M(t,e,n){t.classList[n?"add":"remove"](e)}function _(t){c=t}function R(){if(!c)throw new Error("Function called outside component initialization");return c}function P(t){R().$$.on_mount.push(t)}function B(t){R().$$.on_destroy.push(t)}function I(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const O=[],q=[],G=[],j=[],U=Promise.resolve();let z=!1;function N(t){G.push(t)}const D=new Set;let H=0;function F(){const t=c;do{for(;H<O.length;){const t=O[H];H++,_(t),K(t.$$)}for(_(null),O.length=0,H=0;q.length;)q.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];D.has(e)||(D.add(e),e())}G.length=0}while(O.length);for(;j.length;)j.pop()();z=!1,D.clear(),_(t)}function K(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(N)}}const V=new Set;let J;function Z(){J={r:0,c:[],p:J}}function Y(){J.r||l(J.c),J=J.p}function Q(t,e){t&&t.i&&(V.delete(t),t.i(e))}function W(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),J.c.push((()=>{V.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function X(t,e){const n={},o={},l={$$scope:1};let r=t.length;for(;r--;){const i=t[r],s=e[r];if(s){for(const t in i)t in s||(o[t]=1);for(const t in s)l[t]||(n[t]=s[t],l[t]=1);t[r]=s}else for(const t in i)l[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function tt(t){t&&t.c()}function et(t,e,o,i){const{fragment:s,after_update:c}=t.$$;s&&s.m(e,o),i||N((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):l(e),t.$$.on_mount=[]})),c.forEach(N)}function nt(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ot(t,e){-1===t.$$.dirty[0]&&(O.push(t),z||(z=!0,U.then(F)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function lt(e,n,r,i,s,a,u,f=[-1]){const d=c;_(e);const g=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:n.target||d.$$.root};u&&u(g.root);let $=!1;if(g.ctx=r?r(e,n.props||{},((t,n,...o)=>{const l=o.length?o[0]:n;return g.ctx&&s(g.ctx[t],g.ctx[t]=l)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](l),$&&ot(e,t)),n})):[],g.update(),$=!0,l(g.before_update),g.fragment=!!i&&i(g.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);g.fragment&&g.fragment.l(t),t.forEach(v)}else g.fragment&&g.fragment.c();n.intro&&Q(e.$$.fragment),et(e,n.target,n.anchor,n.customElement),F()}_(d)}class rt{$destroy(){nt(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function it(n){let o,l,r,i,s,c,a=(n[2]?globalThis.i18n(n[0]):n[0])+"",u=[{class:i=`button-wrapper ${n[3]} ${n[1]?"is-active":""}`},n[4]],f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return{c(){o=b("button"),l=b("div"),r=x(a),C(l,"class","button-inner svelte-1qawd2k"),A(o,f),M(o,"svelte-1qawd2k",!0)},m(t,e){h(t,o,e),m(o,l),m(l,r),o.autofocus&&o.focus(),s||(c=T(o,"click",n[5]),s=!0)},p(t,[e]){5&e&&a!==(a=(t[2]?globalThis.i18n(t[0]):t[0])+"")&&E(r,a),A(o,f=X(u,[10&e&&i!==(i=`button-wrapper ${t[3]} ${t[1]?"is-active":""}`)&&{class:i},16&e&&t[4]])),M(o,"svelte-1qawd2k",!0)},i:t,o:t,d(t){t&&v(o),s=!1,c()}}}function st(t,n,o){const l=["text","isActive","doLocalizeText","class"];let r=$(n,l),{text:i}=n,{isActive:s}=n,{doLocalizeText:c=!0}=n,{class:a=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(4,r=$(n,l)),"text"in t&&o(0,i=t.text),"isActive"in t&&o(1,s=t.isActive),"doLocalizeText"in t&&o(2,c=t.doLocalizeText),"class"in t&&o(3,a=t.class)},[i,s,c,a,r,function(e){I.call(this,t,e)}]}class ct extends rt{constructor(t){super(),lt(this,t,st,it,i,{text:0,isActive:1,doLocalizeText:2,class:3})}}function at(t,e,n){const o=t.slice();return o[2]=e[n][0],o[3]=e[n][1],o[5]=n,o}function ut(e){let n,o,l,r,i,s=e[2]+"",c=e[3]+"";return{c(){n=b("tr"),o=b("td"),l=x(s),r=b("td"),i=x(c)},m(t,e){h(t,n,e),m(n,o),m(o,l),m(n,r),m(r,i)},p:t,d(t){t&&v(n)}}}function ft(t){let e,n,o,l,r,i,s,c,a,u,f;l=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),l.$on("click",t[1]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=ut(at(t,d,e));return{c(){e=b("div"),n=b("aside"),o=b("div"),tt(l.$$.fragment),r=y(),i=b("span"),i.textContent="Credits",s=y(),c=b("main"),a=b("table"),u=b("tbody");for(let t=0;t<g.length;t+=1)g[t].c();C(o,"class","flex align-items-center gap-15 svelte-5yfd45"),C(n,"class","flex flex-direction-column gap-15"),C(e,"class","flex svelte-5yfd45")},m(t,d){h(t,e,d),m(e,n),m(n,o),et(l,o,null),m(o,r),m(o,i),m(e,s),m(e,c),m(c,a),m(a,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=at(t,d,n);g[n]?g[n].p(o,e):(g[n]=ut(o),g[n].c(),g[n].m(u,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},i(t){f||(Q(l.$$.fragment,t),f=!0)},o(t){W(l.$$.fragment,t),f=!1},d(t){t&&v(e),nt(l),w(g,t)}}}function dt(t){return[[["Jordan O'Leary","Programming, Game Design, and Concept"],["theBlurryBox","Art and Animation"],["Valentin Cochet","@coc_val | Sound Effect Design"],["Jake O'Connell","UI Design | Trailer"],["BananaMilk","Music"],["Lost Lumens, Brad Clark","Audio Mastering"],["Matt Sweda","Concept Ideation Assistance"]],()=>window.goBack()]}class gt extends rt{constructor(t){super(),lt(this,t,dt,ft,i,{})}}function $t(n){let o,l,r,i,s,c,u,f,d,g,$,p=[{class:d=`button-wrapper ${n[6]} ${n[4]?"is-active":""}`},n[7]],w={};for(let t=0;t<p.length;t+=1)w=e(w,p[t]);return{c(){o=b("a"),l=b("button"),r=b("div"),i=b("img"),c=y(),u=b("span"),f=x(n[5]),a(i.src,s=n[0])||C(i,"src",s),C(i,"width",n[3]),C(i,"alt",n[1]),C(r,"class","svelte-1c8t67o"),A(l,w),M(l,"svelte-1c8t67o",!0),C(o,"target","_blank"),C(o,"rel","noreferrer"),C(o,"href",n[2])},m(t,e){h(t,o,e),m(o,l),m(l,r),m(r,i),m(r,c),m(r,u),m(u,f),l.autofocus&&l.focus(),g||($=T(l,"click",n[8]),g=!0)},p(t,[e]){1&e&&!a(i.src,s=t[0])&&C(i,"src",s),8&e&&C(i,"width",t[3]),2&e&&C(i,"alt",t[1]),32&e&&E(f,t[5]),A(l,w=X(p,[80&e&&d!==(d=`button-wrapper ${t[6]} ${t[4]?"is-active":""}`)&&{class:d},128&e&&t[7]])),M(l,"svelte-1c8t67o",!0),4&e&&C(o,"href",t[2])},i:t,o:t,d(t){t&&v(o),g=!1,$()}}}function pt(t,n,o){const l=["src","alt","href","width","isActive","text","class"];let r=$(n,l),{src:i}=n,{alt:s}=n,{href:c}=n,{width:a}=n,{isActive:u}=n,{text:f=""}=n,{class:d=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(7,r=$(n,l)),"src"in t&&o(0,i=t.src),"alt"in t&&o(1,s=t.alt),"href"in t&&o(2,c=t.href),"width"in t&&o(3,a=t.width),"isActive"in t&&o(4,u=t.isActive),"text"in t&&o(5,f=t.text),"class"in t&&o(6,d=t.class)},[i,s,c,a,u,f,d,r,function(e){I.call(this,t,e)}]}class mt extends rt{constructor(t){super(),lt(this,t,pt,$t,i,{src:0,alt:1,href:2,width:3,isActive:4,text:5,class:6})}}function ht(t,e,n){const o=t.slice();return o[2]=e[n],o}function vt(t){let e,n;return e=new ct({props:{type:"button",text:t[2]}}),e.$on("click",(function(){return t[1](t[2])})),{c(){tt(e.$$.fragment)},m(t,o){et(e,t,o),n=!0},p(e,n){t=e},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function wt(t){let e,n,o,l,r,i,s,c,a,u,f,d,g,$,p,x,k,T,A,E,L,M,_,R,P,B;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[0]),x=new mt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2",text:"@spellmasons"}}),E=new mt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2",text:"Discord"}});let I=window.explainKeys||[],O=[];for(let e=0;e<I.length;e+=1)O[e]=vt(ht(t,I,e));const q=t=>W(O[t],1,1,(()=>{O[t]=null}));return{c(){e=b("div"),n=b("aside"),o=b("div"),l=b("div"),tt(r.$$.fragment),i=y(),s=b("h1"),s.textContent=`${globalThis.i18n("Help")}`,c=y(),a=b("div"),u=y(),f=b("main"),d=b("div"),g=b("div"),$=b("h1"),$.textContent="Contact Me!",p=y(),tt(x.$$.fragment),k=y(),T=b("h1"),T.textContent="Join our Discord Community!",A=y(),tt(E.$$.fragment),L=y(),M=b("h1"),M.textContent="How to",_=y();for(let t=0;t<O.length;t+=1)O[t].c();R=y(),P=b("div"),C(s,"class","options-title svelte-z08h7l"),C(l,"class","flex align-items-center gap-20"),C(a,"class","flex flex-direction-column gap-15"),C(o,"class","flex flex-direction-column gap-15 pad-20"),C(n,"class","svelte-z08h7l"),C(g,"class","pad-20 flex flex-direction-column gap-15 overflowyscroll"),S(g,"min-width","300px"),C(P,"id","explain-portal"),C(P,"class","svelte-z08h7l"),C(d,"class","flex gap-15 height100"),C(e,"class","flex height100")},m(t,v){h(t,e,v),m(e,n),m(n,o),m(o,l),et(r,l,null),m(l,i),m(l,s),m(o,c),m(o,a),m(e,u),m(e,f),m(f,d),m(d,g),m(g,$),m(g,p),et(x,g,null),m(g,k),m(g,T),m(g,A),et(E,g,null),m(g,L),m(g,M),m(g,_);for(let t=0;t<O.length;t+=1)O[t].m(g,null);m(d,R),m(d,P),B=!0},p(t,[e]){if(0&e){let n;for(I=window.explainKeys||[],n=0;n<I.length;n+=1){const o=ht(t,I,n);O[n]?(O[n].p(o,e),Q(O[n],1)):(O[n]=vt(o),O[n].c(),Q(O[n],1),O[n].m(g,null))}for(Z(),n=I.length;n<O.length;n+=1)q(n);Y()}},i(t){if(!B){Q(r.$$.fragment,t),Q(x.$$.fragment,t),Q(E.$$.fragment,t);for(let t=0;t<I.length;t+=1)Q(O[t]);B=!0}},o(t){W(r.$$.fragment,t),W(x.$$.fragment,t),W(E.$$.fragment,t),O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)W(O[t]);B=!1},d(t){t&&v(e),nt(r),nt(x),nt(E),w(O,t)}}}function bt(t){return[()=>window.goBack(),t=>window.menuExplain(t,!0)]}class xt extends rt{constructor(t){super(),lt(this,t,bt,wt,i,{})}}function yt(t){let n,o,l,r,i,s;const c=t[4].default,a=function(t,e,n,o){if(t){const l=d(t,e,n,o);return t[0](l)}}(c,t,t[3],null);let u=[{class:l=`button-wrapper ${t[1]} ${t[0]?"is-active":""}`},t[2]],f={};for(let t=0;t<u.length;t+=1)f=e(f,u[t]);return{c(){n=b("button"),o=b("div"),a&&a.c(),C(o,"class","svelte-1k1vcg6"),A(n,f),M(n,"svelte-1k1vcg6",!0)},m(e,l){h(e,n,l),m(n,o),a&&a.m(o,null),n.autofocus&&n.focus(),r=!0,i||(s=T(n,"click",t[5]),i=!0)},p(t,[e]){a&&a.p&&(!r||8&e)&&function(t,e,n,o,l,r){if(l){const i=d(e,n,o,r);t.p(i,l)}}(a,c,t,t[3],r?function(t,e,n,o){if(t[2]&&o){const l=t[2](o(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|l[o];return t}return e.dirty|l}return e.dirty}(c,t[3],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[3]),null),A(n,f=X(u,[(!r||3&e&&l!==(l=`button-wrapper ${t[1]} ${t[0]?"is-active":""}`))&&{class:l},4&e&&t[2]])),M(n,"svelte-1k1vcg6",!0)},i(t){r||(Q(a,t),r=!0)},o(t){W(a,t),r=!1},d(t){t&&v(n),a&&a.d(t),i=!1,s()}}}function kt(t,n,o){const l=["isActive","class"];let r=$(n,l),{$$slots:i={},$$scope:s}=n,{isActive:c}=n,{class:a=""}=n;return t.$$set=t=>{n=e(e({},n),g(t)),o(2,r=$(n,l)),"isActive"in t&&o(0,c=t.isActive),"class"in t&&o(1,a=t.class),"$$scope"in t&&o(3,s=t.$$scope)},[c,a,r,s,i,function(e){I.call(this,t,e)}]}class Tt extends rt{constructor(t){super(),lt(this,t,kt,yt,i,{isActive:0,class:1})}}const Ct="uiZoom",At="OPTIONS",Et="LOCALIZATION",Lt="CREDITS",St="HELP",Mt="PLAY",_t="MULTIPLAYER_SERVER_CHOOSER";function Rt(t,e,n){const o=t.slice();return o[9]=e[n][0],o[10]=e[n][1],o}function Pt(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function Bt(e){let n,o=(e[13]||"").split("Key").join("").split("Digit").join("").toLowerCase()+"";return{c(){n=x(o)},m(t,e){h(t,n,e)},p:t,d(t){t&&v(n)}}}function It(e){let n,o=globalThis.i18n("reassign")+"";return{c(){n=x(o)},m(t,e){h(t,n,e)},p:t,d(t){t&&v(n)}}}function Ot(t){let e,n,o,l;function r(t,e){return t[0]==t[9]&&t[1]==t[15]?It:Bt}let i=r(t),s=i(t);function c(){return t[5](t[9],t[15])}return{c(){e=b("td"),n=b("button"),s.c(),C(n,"class","reassignKey svelte-bp9ml1")},m(t,r){h(t,e,r),m(e,n),s.m(n,null),o||(l=T(n,"click",c),o=!0)},p(e,o){i===(i=r(t=e))&&s?s.p(t,o):(s.d(1),s=i(t),s&&(s.c(),s.m(n,null)))},d(t){t&&v(e),s.d(),o=!1,l()}}}function qt(t){let e,n,o,l,r,i=globalThis.i18n(t[9])+"",s=Object.assign(["","",""],t[10]),c=[];for(let e=0;e<s.length;e+=1)c[e]=Ot(Pt(t,s,e));return{c(){e=b("tr"),n=b("td"),o=x(i),l=y();for(let t=0;t<c.length;t+=1)c[t].c();r=y()},m(t,i){h(t,e,i),m(e,n),m(n,o),m(e,l);for(let t=0;t<c.length;t+=1)c[t].m(e,null);m(e,r)},p(t,n){if(19&n){let o;for(s=Object.assign(["","",""],t[10]),o=0;o<s.length;o+=1){const l=Pt(t,s,o);c[o]?c[o].p(l,n):(c[o]=Ot(l),c[o].c(),c[o].m(e,r))}for(;o<c.length;o+=1)c[o].d(1);c.length=s.length}},d(t){t&&v(e),w(c,t)}}}function Gt(t){let e,n,o,l=Object.entries(globalThis.controlMap||{}),r=[];for(let e=0;e<l.length;e+=1)r[e]=qt(Rt(t,l,e));return{c(){e=b("tr"),e.innerHTML="<td></td> \n            <td>Option 1</td> \n            <td>Option 2</td> \n            <td>Option 3</td>",n=y();for(let t=0;t<r.length;t+=1)r[t].c();o=k()},m(t,l){h(t,e,l),h(t,n,l);for(let e=0;e<r.length;e+=1)r[e].m(t,l);h(t,o,l)},p(t,e){if(19&e){let n;for(l=Object.entries(globalThis.controlMap||{}),n=0;n<l.length;n+=1){const i=Rt(t,l,n);r[n]?r[n].p(i,e):(r[n]=qt(i),r[n].c(),r[n].m(o.parentNode,o))}for(;n<r.length;n+=1)r[n].d(1);r.length=l.length}},d(t){t&&v(e),t&&v(n),w(r,t),t&&v(o)}}}function jt(e){let n,o,l,r,s,c=e[2],a=Gt(e);return{c(){n=b("h2"),o=x("Â "),l=x(e[3]),r=y(),s=b("table"),a.c(),S(n,"color","red"),C(s,"id","keymapping")},m(t,e){h(t,n,e),m(n,o),m(n,l),h(t,r,e),h(t,s,e),a.m(s,null)},p(t,[e]){8&e&&E(l,t[3]),4&e&&i(c,c=t[2])?(a.d(1),a=Gt(t),a.c(),a.m(s,null)):a.p(t,e)},i:t,o:t,d(t){t&&v(n),t&&v(r),t&&v(s),a.d(t)}}}function Ut(t,e,n){function o(t,e,o){globalThis.controlMap[i][s]=o,globalThis.persistControls(),n(2,c++,c),a("",0)}function l(t){i&&(globalThis.controlMap?o(0,0,t.code):console.error("Cannot set key, no globalThis.controlMap"))}function r(t){if(globalThis.mouseButtonToKeyCode||console.error("mouseButtonToKeyCode is undefined"),void 0!==t.button){const e=globalThis.mouseButtonToKeyCode(t.button);i&&(globalThis.controlMap?0==t.button||1==t.button||2==t.button?n(3,u=globalThis.i18n("mouseRebindError")):o(0,0,e):console.error("Cannot set key, no globalThis.controlMap"))}}P((()=>{document.body.addEventListener("keydown",l),document.body.addEventListener("mousedown",r)})),B((()=>{document.body.removeEventListener("keydown",l),document.body.removeEventListener("mousedown",r)}));let i="",s=0,c=0;function a(t,e){n(0,i=t),n(1,s=e),n(3,u="")}let u="";return[i,s,c,u,a,(t,e)=>a(t,e)]}class zt extends rt{constructor(t){super(),lt(this,t,Ut,jt,i,{})}}const Nt=[];function Dt(e,n=t){let o;const l=new Set;function r(t){if(i(e,t)&&(e=t,o)){const t=!Nt.length;for(const t of l)t[1](),Nt.push(t,e);if(t){for(let t=0;t<Nt.length;t+=2)Nt[t][0](Nt[t+1]);Nt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(i,s=t){const c=[i,s];return l.add(c),1===l.size&&(o=n(r)||t),i(e),()=>{l.delete(c),0===l.size&&(o(),o=null)}}}}const Ht=Dt(!1),Ft=Dt([]),Kt=Dt(!1),Vt=Dt(!1),Jt=Dt(!1);function Zt(){const t=window.isConnected();Kt.set(t),t||Vt.set(!1),Jt.set(!1)}function Yt(){return window.pieDisconnect().then(Zt)}function Qt(e){let n,o,r,i,s,c,a,u,f,d,g,$;return{c(){n=b("div"),o=b("div"),r=b("label"),r.textContent=`${globalThis.i18n("Player Name")}`,i=y(),s=b("input"),c=y(),a=b("div"),u=b("label"),u.textContent=`${globalThis.i18n("Robe Color")}`,f=y(),d=b("input"),C(r,"for","player-name"),C(s,"type","text"),C(s,"name","player-name"),C(o,"class","flex flex-direction-column gap-15"),C(u,"for","robe"),C(d,"type","color"),C(d,"name","robe"),C(a,"class","flex flex-direction-column gap-15"),C(n,"class","flex gap-15")},m(t,l){h(t,n,l),m(n,o),m(o,r),m(o,i),m(o,s),L(s,e[0]),m(n,c),m(n,a),m(a,u),m(a,f),m(a,d),L(d,e[1]),g||($=[T(s,"input",e[3]),T(s,"input",e[4]),T(d,"input",e[5]),T(d,"blur",e[6])],g=!0)},p(t,[e]){1&e&&s.value!==t[0]&&L(s,t[0]),2&e&&L(d,t[1])},i:t,o:t,d(t){t&&v(n),g=!1,l($)}}}function Wt(t,e,n){let o;f(t,Ft,(t=>n(7,o=t)));let l=globalThis.storageGet("player-name"),r=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`;function i(t,e){var n;window.configPlayer({color:(n=t,parseInt(n.slice(1),16)),name:e}),p(Ft,o=globalThis.lobbyPlayerList,o)}P((()=>{setTimeout((()=>{i(r,l)}),200)}));return[l,r,i,function(){l=this.value,n(0,l)},()=>{i(r,l)},function(){r=this.value,n(1,r)},()=>{i(r,l)}]}class Xt extends rt{constructor(t){super(),lt(this,t,Wt,Qt,i,{})}}function te(e){let n,o;return{c(){n=b("img"),a(n.src,o="ui/localizationIcon.png")||C(n,"src","ui/localizationIcon.png"),C(n,"alt","language options"),C(n,"width","24"),C(n,"height","24"),S(n,"transform","scale(1.4)")},m(t,e){h(t,n,e)},p:t,d(t){t&&v(n)}}}function ee(e){let n,o,l;return o=new ct({props:{text:"Toggle FPS / Latency Monitor"}}),o.$on("click",e[16]),{c(){n=b("div"),tt(o.$$.fragment)},m(t,e){h(t,n,e),et(o,n,null),l=!0},p:t,i(t){l||(Q(o.$$.fragment,t),l=!0)},o(t){W(o.$$.fragment,t),l=!1},d(t){t&&v(n),nt(o)}}}function ne(e){let n,o;return n=new zt({}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function oe(e){let n,o;return n=new Xt({}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function le(t){let e,n,o,l,r,i;n=new ct({props:{text:"Set Fullscreen"}}),n.$on("click",t[12]),l=new ct({props:{text:"Set Windowed Mode"}}),l.$on("click",t[13]);let s=globalThis.isElectron&&function(t){let e,n,o,l,r,i,s,c,a,u=globalThis.i18n("UI Scale")+"";return i=new ct({props:{text:"Smaller"}}),i.$on("click",t[14]),c=new ct({props:{text:"Bigger"}}),c.$on("click",t[15]),{c(){e=x(u),n=x(": "),o=x(t[2]),l=y(),r=b("div"),tt(i.$$.fragment),s=y(),tt(c.$$.fragment),C(r,"class","flex gap-15")},m(t,u){h(t,e,u),h(t,n,u),h(t,o,u),h(t,l,u),h(t,r,u),et(i,r,null),m(r,s),et(c,r,null),a=!0},p(t,e){(!a||4&e)&&E(o,t[2])},i(t){a||(Q(i.$$.fragment,t),Q(c.$$.fragment,t),a=!0)},o(t){W(i.$$.fragment,t),W(c.$$.fragment,t),a=!1},d(t){t&&v(e),t&&v(n),t&&v(o),t&&v(l),t&&v(r),nt(i),nt(c)}}}(t);return{c(){e=b("div"),tt(n.$$.fragment),o=y(),tt(l.$$.fragment),r=y(),s&&s.c(),C(e,"class","flex flex-direction-column gap-15")},m(t,c){h(t,e,c),et(n,e,null),m(e,o),et(l,e,null),m(e,r),s&&s.m(e,null),i=!0},p(t,e){globalThis.isElectron&&s.p(t,e)},i(t){i||(Q(n.$$.fragment,t),Q(l.$$.fragment,t),Q(s),i=!0)},o(t){W(n.$$.fragment,t),W(l.$$.fragment,t),W(s),i=!1},d(t){t&&v(e),nt(n),nt(l),s&&s.d()}}}function re(e){let n,o,r,i,s,c,a,u,f,d,g,$,p,w,k=globalThis.i18n("Total Volume")+"",A=globalThis.i18n("Music Volume")+"",E=globalThis.i18n("Sound Effects Volume")+"";return{c(){n=b("div"),o=x(k),r=y(),i=b("input"),s=y(),c=x(A),a=y(),u=b("input"),f=y(),d=x(E),g=y(),$=b("input"),C(i,"type","range"),i.value=100*window.volume,C(i,"min","0"),C(i,"max","100"),C(u,"type","range"),u.value=100*window.volumeMusic,C(u,"min","0"),C(u,"max","100"),C($,"type","range"),$.value=100*window.volumeGame,C($,"min","0"),C($,"max","100"),C(n,"class","flex flex-direction-column gap-15")},m(t,e){h(t,n,e),m(n,o),m(n,r),m(n,i),m(n,s),m(n,c),m(n,a),m(n,u),m(n,f),m(n,d),m(n,g),m(n,$),p||(w=[T(i,"input",de),T(u,"input",ge),T($,"input",$e)],p=!0)},p:t,i:t,o:t,d(t){t&&v(n),p=!1,l(w)}}}function ie(t){let e,n,o,l,r,i,s,c,a,u,f,d,g,$,p,w,x,k,T,A,E,L,S,M,_,R,P,B;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[4]),u=new ct({props:{isActive:t[1]==ue,type:"button",text:"Audio"}}),u.$on("click",t[5]),d=new ct({props:{isActive:t[1]==fe,type:"button",text:"Video"}}),d.$on("click",t[6]),$=new ct({props:{isActive:t[1]==ae,type:"button",text:"Player Configuration"}}),$.$on("click",t[7]),w=new ct({props:{isActive:t[1]==se,type:"button",text:"Controls"}}),w.$on("click",t[8]),k=new ct({props:{isActive:t[1]==ce,type:"button",text:"Extras"}}),k.$on("click",t[9]),A=new ct({props:{type:"button",text:"Reset Tutorial"}}),A.$on("click",t[10]),L=new Tt({props:{class:"button-wrapper-bg-2",$$slots:{default:[te]},$$scope:{ctx:t}}}),L.$on("click",t[11]);const I=[re,le,oe,ne,ee],O=[];function q(t,e){return t[1]==ue?0:t[1]==fe?1:t[1]==ae?2:t[1]==se?3:t[1]==ce?4:-1}return~(R=q(t))&&(P=O[R]=I[R](t)),{c(){e=b("div"),n=b("aside"),o=b("div"),l=b("div"),tt(r.$$.fragment),i=y(),s=b("h1"),s.textContent=`${globalThis.i18n("Settings")}`,c=y(),a=b("div"),tt(u.$$.fragment),f=y(),tt(d.$$.fragment),g=y(),tt($.$$.fragment),p=y(),tt(w.$$.fragment),x=y(),tt(k.$$.fragment),T=y(),tt(A.$$.fragment),E=y(),tt(L.$$.fragment),S=y(),M=b("main"),_=b("div"),P&&P.c(),C(s,"class","options-title svelte-z47k4j"),C(l,"class","flex align-items-center gap-20"),C(a,"class","flex flex-direction-column gap-15"),C(o,"class","flex flex-direction-column gap-15 pad-20"),C(n,"class","svelte-z47k4j"),C(_,"class","pad-20"),C(e,"class","flex")},m(t,v){h(t,e,v),m(e,n),m(n,o),m(o,l),et(r,l,null),m(l,i),m(l,s),m(o,c),m(o,a),et(u,a,null),m(a,f),et(d,a,null),m(a,g),et($,a,null),m(a,p),et(w,a,null),m(a,x),et(k,a,null),m(a,T),et(A,a,null),m(a,E),et(L,a,null),m(e,S),m(e,M),m(M,_),~R&&O[R].m(_,null),B=!0},p(t,[e]){const n={};2&e&&(n.isActive=t[1]==ue),u.$set(n);const o={};2&e&&(o.isActive=t[1]==fe),d.$set(o);const l={};2&e&&(l.isActive=t[1]==ae),$.$set(l);const r={};2&e&&(r.isActive=t[1]==se),w.$set(r);const i={};2&e&&(i.isActive=t[1]==ce),k.$set(i);const s={};262144&e&&(s.$$scope={dirty:e,ctx:t}),L.$set(s);let c=R;R=q(t),R===c?~R&&O[R].p(t,e):(P&&(Z(),W(O[c],1,1,(()=>{O[c]=null})),Y()),~R?(P=O[R],P?P.p(t,e):(P=O[R]=I[R](t),P.c()),Q(P,1),P.m(_,null)):P=null)},i(t){B||(Q(r.$$.fragment,t),Q(u.$$.fragment,t),Q(d.$$.fragment,t),Q($.$$.fragment,t),Q(w.$$.fragment,t),Q(k.$$.fragment,t),Q(A.$$.fragment,t),Q(L.$$.fragment,t),Q(P),B=!0)},o(t){W(r.$$.fragment,t),W(u.$$.fragment,t),W(d.$$.fragment,t),W($.$$.fragment,t),W(w.$$.fragment,t),W(k.$$.fragment,t),W(A.$$.fragment,t),W(L.$$.fragment,t),W(P),B=!1},d(t){t&&v(e),nt(r),nt(u),nt(d),nt($),nt(w),nt(k),nt(A),nt(L),~R&&O[R].d()}}}const se="KEY_MAPPING",ce="EXTRAS",ae="PLAYER_CONFIG",ue="AUDIO",fe="VIDEO";function de(t){window.changeVolume(t.target.value/100)}function ge(t){window.changeVolumeMusic(t.target.value/100)}function $e(t){window.changeVolumeGame(t.target.value/100)}function pe(t,e,n){let{setRoute:o}=e,l=ue;function r(t){n(1,l=t)}const i=parseFloat(globalThis.storageGet(Ct));let s=isNaN(i)?1:i;return t.$$set=t=>{"setRoute"in t&&n(0,o=t.setRoute)},[o,l,s,r,()=>window.goBack(),()=>r(ue),()=>r(fe),()=>r(ae),()=>r(se),()=>r(ce),()=>globalThis.resetTutorial(),()=>{o(Et)},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!0):document.body.requestFullscreen().catch((t=>{console.error(`Error attempting to enable fullscreen mode: ${t.message} (${t.name})`)}))},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!1):document.exitFullscreen()},()=>{n(2,s-=.1),n(2,s=Math.round(10*s)/10),globalThis.storageSet(Ct,s),globalThis.electronSettings.setUIZoom(s)},()=>{n(2,s+=.1),n(2,s=Math.round(10*s)/10),globalThis.storageSet(Ct,s),globalThis.electronSettings.setUIZoom(s)},()=>{window.monitorFPS()}]}class me extends rt{constructor(t){super(),lt(this,t,pe,ie,i,{setRoute:0})}}function he(e){let n,o;return{c(){n=b("img"),a(n.src,o="ui/localizationIcon.png")||C(n,"src","ui/localizationIcon.png"),C(n,"alt","language options"),C(n,"width","24"),C(n,"height","24"),S(n,"transform","scale(1.4)")},m(t,e){h(t,n,e)},p:t,d(t){t&&v(n)}}}function ve(t){let e,n,o,l,r={ctx:t,current:null,token:null,hasCatch:!0,pending:ye,then:xe,catch:be,blocks:[,,,]};return function(t,e){const n=e.token={};function o(t,o,l,r){if(e.token!==n)return;e.resolved=r;let i=e.ctx;void 0!==l&&(i=i.slice(),i[l]=r);const s=t&&(e.current=t)(i);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(Z(),W(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),Y())})):e.block.d(1),s.c(),Q(s,1),s.m(e.mount(),e.anchor),c=!0),e.block=s,e.blocks&&(e.blocks[o]=s),c&&F()}if((l=t)&&"object"==typeof l&&"function"==typeof l.then){const n=R();if(t.then((t=>{_(n),o(e.then,1,e.value,t),_(null)}),(t=>{if(_(n),o(e.catch,2,e.error,t),_(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var l}(window.setupPixiPromise,r),{c(){e=b("div"),n=y(),o=k(),r.block.c(),C(e,"id","websocket-pie-connection-status")},m(t,i){h(t,e,i),h(t,n,i),h(t,o,i),r.block.m(t,r.anchor=i),r.mount=()=>o.parentNode,r.anchor=o,l=!0},p(e,n){!function(t,e,n){const o=e.slice(),{resolved:l}=t;t.current===t.then&&(o[t.value]=l),t.current===t.catch&&(o[t.error]=l),t.block.p(o,n)}(r,t=e,n)},i(t){l||(Q(r.block),l=!0)},o(t){for(let t=0;t<3;t+=1){W(r.blocks[t])}l=!1},d(t){t&&v(e),t&&v(n),t&&v(o),r.block.d(t),r.token=null,r=null}}}function we(e){let n,o,l,r,i,s,c;return o=new ct({props:{text:"Resume Game"}}),o.$on("click",Te),r=new ct({props:{text:"Settings"}}),r.$on("click",e[9]),s=new ct({props:{text:"Quit to Main Menu"}}),s.$on("click",e[4]),{c(){n=b("div"),tt(o.$$.fragment),l=y(),tt(r.$$.fragment),i=y(),tt(s.$$.fragment),C(n,"class","list svelte-g9yx2d")},m(t,e){h(t,n,e),et(o,n,null),m(n,l),et(r,n,null),m(n,i),et(s,n,null),c=!0},p:t,i(t){c||(Q(o.$$.fragment,t),Q(r.$$.fragment,t),Q(s.$$.fragment,t),c=!0)},o(t){W(o.$$.fragment,t),W(r.$$.fragment,t),W(s.$$.fragment,t),c=!1},d(t){t&&v(n),nt(o),nt(r),nt(s)}}}function be(e){let n;return{c(){n=b("p"),n.textContent="Something went wrong loading assets",S(n,"color","red")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function xe(e){let n,o,l,r,i,s,c,a,u,f,d,g=e[5]&&function(e){let n,o;return n=new ct({props:{text:"Resume Last Run"}}),n.$on("click",e[10]),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}(e);l=new ct({props:{text:"New Run"}}),l.$on("click",e[2]),i=new ct({props:{text:"Multiplayer"}}),i.$on("click",e[3]),c=new ct({props:{text:"Settings"}}),c.$on("click",e[11]);let $=globalThis.isElectron&&function(e){let n,o;return n=new ct({props:{text:"Quit Game"}}),n.$on("click",e[12]),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}(e);return{c(){n=b("div"),g&&g.c(),o=y(),tt(l.$$.fragment),r=y(),tt(i.$$.fragment),s=y(),tt(c.$$.fragment),a=y(),$&&$.c(),u=y(),f=b("br"),C(n,"class","list svelte-g9yx2d")},m(t,e){h(t,n,e),g&&g.m(n,null),m(n,o),et(l,n,null),m(n,r),et(i,n,null),m(n,s),et(c,n,null),m(n,a),$&&$.m(n,null),h(t,u,e),h(t,f,e),d=!0},p(t,e){t[5]&&g.p(t,e),globalThis.isElectron&&$.p(t,e)},i(t){d||(Q(g),Q(l.$$.fragment,t),Q(i.$$.fragment,t),Q(c.$$.fragment,t),Q($),d=!0)},o(t){W(g),W(l.$$.fragment,t),W(i.$$.fragment,t),W(c.$$.fragment,t),W($),d=!1},d(t){t&&v(n),g&&g.d(),nt(l),nt(i),nt(c),$&&$.d(),t&&v(u),t&&v(f)}}}function ye(e){let n;return{c(){n=x("loading assets...")},m(t,e){h(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function ke(t){let e,n,o,l,r,i,s,c,a,u,f,d,g,$,p,w,x;n=new ct({props:{text:"Help"}}),n.$on("click",t[6]),r=new ct({props:{text:"Credits"}}),r.$on("click",t[7]),c=new mt({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2"}}),u=new mt({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2"}}),d=new Tt({props:{class:"button-wrapper-bg-2",$$slots:{default:[he]},$$scope:{ctx:t}}}),d.$on("click",t[8]);const T=[we,ve],A=[];function E(t,e){return t[1]?0:1}return $=E(t),p=A[$]=T[$](t),{c(){e=b("div"),tt(n.$$.fragment),o=y(),l=b("div"),tt(r.$$.fragment),i=y(),s=b("div"),tt(c.$$.fragment),a=y(),tt(u.$$.fragment),f=y(),tt(d.$$.fragment),g=y(),p.c(),w=k(),C(e,"id","corner-left"),C(e,"class","flex gap svelte-g9yx2d"),S(e,"flex-direction","column"),C(s,"class","flex gap svelte-g9yx2d"),C(l,"id","corner"),C(l,"class","flex gap svelte-g9yx2d"),S(l,"flex-direction","column")},m(t,p){h(t,e,p),et(n,e,null),h(t,o,p),h(t,l,p),et(r,l,null),m(l,i),m(l,s),et(c,s,null),m(s,a),et(u,s,null),m(s,f),et(d,s,null),h(t,g,p),A[$].m(t,p),h(t,w,p),x=!0},p(t,[e]){const n={};32768&e&&(n.$$scope={dirty:e,ctx:t}),d.$set(n);let o=$;$=E(t),$===o?A[$].p(t,e):(Z(),W(A[o],1,1,(()=>{A[o]=null})),Y(),p=A[$],p?p.p(t,e):(p=A[$]=T[$](t),p.c()),Q(p,1),p.m(w.parentNode,w))},i(t){x||(Q(n.$$.fragment,t),Q(r.$$.fragment,t),Q(c.$$.fragment,t),Q(u.$$.fragment,t),Q(d.$$.fragment,t),Q(p),x=!0)},o(t){W(n.$$.fragment,t),W(r.$$.fragment,t),W(c.$$.fragment,t),W(u.$$.fragment,t),W(d.$$.fragment,t),W(p),x=!1},d(t){t&&v(e),nt(n),t&&v(o),t&&v(l),nt(r),nt(c),nt(u),nt(d),t&&v(g),A[$].d(t),t&&v(w)}}}function Te(){window.closeMenu()}function Ce(t,e,n){let o;f(t,Ht,(t=>n(13,o=t)));let{setRoute:l}=e,{inGame:r}=e;const i=globalThis.storageGet(Ct);i&&globalThis.electronSettings.setUIZoom(parseFloat(i));const s=!!globalThis.storageGet(`${globalThis.savePrefix}${globalThis.quicksaveKey}`);return t.$$set=t=>{"setRoute"in t&&n(0,l=t.setRoute),"inGame"in t&&n(1,r=t.inGame)},[l,r,function(){window.playMusic(),p(Ht,o=!0,o),window.startSingleplayer().then((()=>{Zt()}))},function(){window.playMusic(),o&&Yt(),p(Ht,o=!1,o),l(_t)},function(){if(confirm("Are you sure you want to quit to Main Menu?")){const t=new URL(location.href);t.searchParams.delete("game"),t.searchParams.delete("pieUrl"),window.history.pushState(null,null,t),window.exitCurrentGame().then(Zt)}},s,()=>l(St),()=>l(Lt),()=>{l(Et)},()=>l(At),()=>{globalThis.load(globalThis.quicksaveKey)},()=>l(At),()=>{window.fullyExitGame()}]}class Ae extends rt{constructor(t){super(),lt(this,t,Ce,ke,i,{setRoute:0,inGame:1})}}function Ee(t,e,n){const o=t.slice();return o[4]=e[n].language,o[5]=e[n].code,o[7]=n,o}function Le(t){let e,n;return e=new ct({props:{text:t[4],isActive:t[1]==t[5],doLocalizeText:!1}}),e.$on("click",(function(){return t[3](t[5])})),{c(){tt(e.$$.fragment)},m(t,o){et(e,t,o),n=!0},p(n,o){t=n;const l={};2&o&&(l.isActive=t[1]==t[5]),e.$set(l)},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Se(t){let e,n,o,l,r,i,s,c,a,u,f;r=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[2]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=Le(Ee(t,d,e));const $=t=>W(g[t],1,1,(()=>{g[t]=null}));return{c(){e=b("div"),n=b("aside"),o=b("div"),l=b("div"),tt(r.$$.fragment),i=y(),s=b("h1"),s.textContent=`${globalThis.i18n("Localization")}`,c=y(),a=b("main"),u=b("div");for(let t=0;t<g.length;t+=1)g[t].c();C(s,"class","options-title svelte-exei4x"),C(l,"class","flex align-items-center gap-20"),C(o,"class","flex flex-direction-column gap-15 pad-20"),C(n,"class","svelte-exei4x"),C(u,"class","pad-20 flex flex-direction-column gap-15"),C(e,"class","flex")},m(t,d){h(t,e,d),m(e,n),m(n,o),m(o,l),et(r,l,null),m(l,i),m(l,s),m(e,c),m(e,a),m(a,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(3&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=Ee(t,d,n);g[n]?(g[n].p(o,e),Q(g[n],1)):(g[n]=Le(o),g[n].c(),Q(g[n],1),g[n].m(u,null))}for(Z(),n=d.length;n<g.length;n+=1)$(n);Y()}},i(t){if(!f){Q(r.$$.fragment,t);for(let t=0;t<d.length;t+=1)Q(g[t]);f=!0}},o(t){W(r.$$.fragment,t),g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)W(g[t]);f=!1},d(t){t&&v(e),nt(r),w(g,t)}}}function Me(t,e,n){const o=globalThis.getSupportedLanguages();let l=globalThis.getChosenLanguageCode();return[o,l,()=>window.goBack(),t=>{globalThis.setLanguage(t,!0),n(1,l=t),window.goBack()}]}class _e extends rt{constructor(t){super(),lt(this,t,Me,Se,i,{languages:0})}get languages(){return this.$$.ctx[0]}}function Re(e){let n,o,l,r;return l=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),l.$on("click",e[0]),{c(){n=b("h1"),n.textContent="This page is still being built",o=y(),tt(l.$$.fragment),C(n,"class","svelte-1n2jha3")},m(t,e){h(t,n,e),h(t,o,e),et(l,t,e),r=!0},p:t,i(t){r||(Q(l.$$.fragment,t),r=!0)},o(t){W(l.$$.fragment,t),r=!1},d(t){t&&v(n),t&&v(o),nt(l,t)}}}function Pe(t){return[()=>window.goBack()]}class Be extends rt{constructor(t){super(),lt(this,t,Pe,Re,i,{})}}function Ie(t,e,n){const o=t.slice();return o[3]=e[n].name,o[4]=e[n].status,o[5]=e[n].color,o[6]=e[n].ready,o}function Oe(t){let e,n,o,l,r,i,s,c,a,u,f,d,g,$=t[3]+"",p=t[4]+"",w=t[6]+"";return{c(){e=b("tr"),n=b("td"),o=x($),l=y(),r=b("td"),i=x(p),s=y(),c=b("td"),u=y(),f=b("td"),d=x(w),g=y(),C(c,"class","lobby-player-color svelte-g23pjw"),C(c,"style",a=`background-color:${t[5]};`)},m(t,a){h(t,e,a),m(e,n),m(n,o),m(e,l),m(e,r),m(r,i),m(e,s),m(e,c),m(e,u),m(e,f),m(f,d),m(e,g)},p(t,e){1&e&&$!==($=t[3]+"")&&E(o,$),1&e&&p!==(p=t[4]+"")&&E(i,p),1&e&&a!==(a=`background-color:${t[5]};`)&&C(c,"style",a),1&e&&w!==(w=t[6]+"")&&E(d,w)},d(t){t&&v(e)}}}function qe(t){let e,n,o,l,r,i,s,c,a,u,f;o=new Xt({}),r=new ct({props:{type:"button",text:"Ready",class:"sm"}}),r.$on("click",t[1]);let d=t[0],g=[];for(let e=0;e<d.length;e+=1)g[e]=Oe(Ie(t,d,e));return{c(){e=b("h1"),e.textContent=`${globalThis.i18n("Game Lobby")}`,n=y(),tt(o.$$.fragment),l=y(),tt(r.$$.fragment),i=y(),s=b("table"),c=b("thead"),c.innerHTML="<tr></tr>",a=y(),u=b("tbody");for(let t=0;t<g.length;t+=1)g[t].c();C(s,"id","lobby-player-list"),C(s,"class","svelte-g23pjw")},m(t,d){h(t,e,d),h(t,n,d),et(o,t,d),h(t,l,d),et(r,t,d),h(t,i,d),h(t,s,d),m(s,c),m(s,a),m(s,u);for(let t=0;t<g.length;t+=1)g[t].m(u,null);f=!0},p(t,[e]){if(1&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const o=Ie(t,d,n);g[n]?g[n].p(o,e):(g[n]=Oe(o),g[n].c(),g[n].m(u,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=d.length}},i(t){f||(Q(o.$$.fragment,t),Q(r.$$.fragment,t),f=!0)},o(t){W(o.$$.fragment,t),W(r.$$.fragment,t),f=!1},d(t){t&&v(e),t&&v(n),nt(o,t),t&&v(l),nt(r,t),t&&v(i),t&&v(s),w(g,t)}}}function Ge(t,e,n){let o;f(t,Ft,(t=>n(0,o=t))),P((()=>{setInterval((()=>{p(Ft,o=globalThis.lobbyPlayerList,o)}),500)})),B((()=>{clearInterval(undefined)}));return[o,()=>{globalThis.configPlayer({lobbyReady:!0})}]}class je extends rt{constructor(t){super(),lt(this,t,Ge,qe,i,{})}}function Ue(t){let e,n;return{c(){e=x("Connecting...\r\n                "),n=b("div"),n.innerHTML='<div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div> \n                    <div class="svelte-qcde2c"></div>',C(n,"class","lds-ellipsis svelte-qcde2c")},m(t,o){h(t,e,o),h(t,n,o)},d(t){t&&v(e),t&&v(n)}}}function ze(t){let e,n,o,r,i,s,c,a,u,f;const d=[He,De,Ne],g=[];function $(t,e){return t[0]?0:t[4]?1:2}return i=$(t),s=g[i]=d[i](t),{c(){e=b("p"),e.textContent=`${globalThis.i18n("Game name")}`,n=y(),o=b("input"),r=y(),s.c(),c=k(),C(o,"class","svelte-qcde2c")},m(l,s){h(l,e,s),h(l,n,s),h(l,o,s),L(o,t[2]),h(l,r,s),g[i].m(l,s),h(l,c,s),a=!0,u||(f=[T(o,"input",t[13]),T(o,"keypress",t[14])],u=!0)},p(t,e){4&e&&o.value!==t[2]&&L(o,t[2]);let n=i;i=$(t),i===n?g[i].p(t,e):(Z(),W(g[n],1,1,(()=>{g[n]=null})),Y(),s=g[i],s?s.p(t,e):(s=g[i]=d[i](t),s.c()),Q(s,1),s.m(c.parentNode,c))},i(t){a||(Q(s),a=!0)},o(t){W(s),a=!1},d(t){t&&v(e),t&&v(n),t&&v(o),t&&v(r),g[i].d(t),t&&v(c),u=!1,l(f)}}}function Ne(t){let e,n,o,l,r,i,s,c;return n=new ct({props:{text:"Host"}}),n.$on("click",t[9]),l=new ct({props:{text:"Join"}}),l.$on("click",t[9]),{c(){e=b("div"),tt(n.$$.fragment),o=y(),tt(l.$$.fragment),r=y(),i=b("div"),s=x(t[3]),C(e,"class","flex gap-15"),S(i,"color","red")},m(t,a){h(t,e,a),et(n,e,null),m(e,o),et(l,e,null),h(t,r,a),h(t,i,a),m(i,s),c=!0},p(t,e){(!c||8&e)&&E(s,t[3])},i(t){c||(Q(n.$$.fragment,t),Q(l.$$.fragment,t),c=!0)},o(t){W(n.$$.fragment,t),W(l.$$.fragment,t),c=!1},d(t){t&&v(e),nt(n),nt(l),t&&v(r),t&&v(i)}}}function De(e){let n,o;return n=new ct({props:{text:"Leave Room"}}),n.$on("click",e[8]),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function He(e){let n,o;return{c(){n=x("Joining...\r\n                    "),o=b("div"),o.innerHTML='<div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div> \n                        <div class="svelte-qcde2c"></div>',C(o,"class","lds-ellipsis svelte-qcde2c")},m(t,e){h(t,n,e),h(t,o,e)},p:t,i:t,o:t,d(t){t&&v(n),t&&v(o)}}}function Fe(t){let e,n;return e=new je({}),{c(){tt(e.$$.fragment)},m(t,o){et(e,t,o),n=!0},i(t){n||(Q(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){nt(e,t)}}}function Ke(t){let e,n,o,r,i,s,c,a,u,f,d,g,$,p,w,k,A,E,M,_,R,P,B,I,O,q=globalThis.i18n("Server Url")+"";i=new ct({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),i.$on("click",t[10]),A=new ct({props:{disabled:t[6],text:"Connect"}}),A.$on("click",t[7]),M=new ct({props:{disabled:!t[6],text:"Disconnect"}}),M.$on("click",Yt);let G=t[5]&&Ue(),j=t[6]&&ze(t),U=t[4]&&Fe();return{c(){e=b("div"),n=b("aside"),o=b("div"),r=b("div"),tt(i.$$.fragment),s=y(),c=b("h1"),c.textContent=`${globalThis.i18n("Multiplayer")}`,a=y(),u=b("main"),f=b("div"),d=x(q),g=y(),$=b("div"),p=b("input"),w=y(),k=b("div"),tt(A.$$.fragment),E=y(),tt(M.$$.fragment),_=y(),G&&G.c(),R=y(),j&&j.c(),P=y(),U&&U.c(),C(c,"class","options-title"),C(r,"class","flex align-items-center gap-20"),C(o,"class","flex flex-direction-column gap-15 pad-20"),C(p,"class","svelte-qcde2c"),C(k,"class","flex gap-15"),C(f,"class","pad-20"),S(f,"min-width","400px"),C(e,"class","flex")},m(l,v){h(l,e,v),m(e,n),m(n,o),m(o,r),et(i,r,null),m(r,s),m(r,c),m(e,a),m(e,u),m(u,f),m(f,d),m(f,g),m(f,$),m($,p),L(p,t[1]),m($,w),m($,k),et(A,k,null),m(k,E),et(M,k,null),m(f,_),G&&G.m(f,null),m(f,R),j&&j.m(f,null),m(f,P),U&&U.m(f,null),B=!0,I||(O=[T(p,"input",t[11]),T(p,"keypress",t[12])],I=!0)},p(t,[e]){2&e&&p.value!==t[1]&&L(p,t[1]);const n={};64&e&&(n.disabled=t[6]),A.$set(n);const o={};64&e&&(o.disabled=!t[6]),M.$set(o),t[5]?G||(G=Ue(),G.c(),G.m(f,R)):G&&(G.d(1),G=null),t[6]?j?(j.p(t,e),64&e&&Q(j,1)):(j=ze(t),j.c(),Q(j,1),j.m(f,P)):j&&(Z(),W(j,1,1,(()=>{j=null})),Y()),t[4]?U?16&e&&Q(U,1):(U=Fe(),U.c(),Q(U,1),U.m(f,null)):U&&(Z(),W(U,1,1,(()=>{U=null})),Y())},i(t){B||(Q(i.$$.fragment,t),Q(A.$$.fragment,t),Q(M.$$.fragment,t),Q(j),Q(U),B=!0)},o(t){W(i.$$.fragment,t),W(A.$$.fragment,t),W(M.$$.fragment,t),W(j),W(U),B=!1},d(t){t&&v(e),nt(i),nt(A),nt(M),G&&G.d(),j&&j.d(),U&&U.d(),I=!1,l(O)}}}function Ve(t,e,n){let o,l,r;f(t,Vt,(t=>n(4,o=t))),f(t,Jt,(t=>n(5,l=t))),f(t,Kt,(t=>n(6,r=t)));let i=!1,s=new URLSearchParams(location.search),c=s.get("pieUrl"),a=s.get("game"),d="";function g(){if(c){console.log("Menu: Connect to server",c),p(Jt,l=!0,l);const t=new URL(location.href);return t.searchParams.set("pieUrl",c),window.history.pushState(null,null,t),window.connect_to_wsPie_server(c).catch(console.error).then(Zt)}return Promise.reject("No wsUrl defined to connect to")}function $(){a?window.isConnected()?(console.log("Menu: Connect to game name",a),n(0,i=!0),n(3,d=""),window.joinRoom({name:a}).then((()=>{const t=new URL(location.href);t.searchParams.set("game",a),window.history.pushState(null,null,t),p(Vt,o=!0,o)})).catch((t=>{console.error("Could not join room",t),n(3,d=t)})).then((()=>{n(0,i=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer"):console.log("Cannot join game until a gameName is provided")}P((()=>{Zt()}));return[i,c,a,d,o,l,r,g,function(){window.pieLeaveRoom(),p(Vt,o=!1,o)},$,()=>{(!function(t){let e;return u(t,(t=>e=t))(),e}(Kt)||confirm(globalThis.i18n("Are you sure you want to disconnect from this server?")))&&Yt().then((()=>{window.goBack()}))},function(){c=this.value,n(1,c)},t=>{"Enter"==t.key&&g()},function(){a=this.value,n(2,a)},t=>{"Enter"==t.key&&$()}]}class Je extends rt{constructor(t){super(),lt(this,t,Ve,Ke,i,{})}}function Ze(e){let n,o;return n=new Be({props:{route:!0}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function Ye(e){let n,o;return n=new xt({props:{route:!0}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function Qe(e){let n,o;return n=new gt({props:{route:!0}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function We(e){let n,o;return n=new me({props:{route:!0,setRoute:e[2]}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function Xe(e){let n,o;return n=new _e({props:{route:!0}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function tn(e){let n,o;return n=new Je({props:{route:!0}}),{c(){tt(n.$$.fragment)},m(t,e){et(n,t,e),o=!0},p:t,i(t){o||(Q(n.$$.fragment,t),o=!0)},o(t){W(n.$$.fragment,t),o=!1},d(t){nt(n,t)}}}function en(t){let e,n,o,l,r,i,s;return i=new Ae({props:{setRoute:t[2],inGame:t[1]}}),{c(){e=b("div"),n=b("div"),o=b("img"),r=y(),tt(i.$$.fragment),C(o,"id","logo"),a(o.src,l="ui/logo.png")||C(o,"src","ui/logo.png"),C(o,"alt","Spellmasons logo"),C(o,"width","800"),C(n,"id","main-menu-inner"),C(e,"id","main-menu")},m(t,l){h(t,e,l),m(e,n),m(n,o),m(n,r),et(i,n,null),s=!0},p(t,e){const n={};2&e&&(n.inGame=t[1]),i.$set(n)},i(t){s||(Q(i.$$.fragment,t),s=!0)},o(t){W(i.$$.fragment,t),s=!1},d(t){t&&v(e),nt(i)}}}function nn(t){let e,n,o,l,r,i;const s=[en,tn,Xe,We,Qe,Ye,Ze],c=[];function a(t,e){return t[0]==Mt?0:t[0]==_t?1:t[0]==Et?2:t[0]==At?3:t[0]==Lt?4:t[0]==St?5:"TODO"==t[0]?6:-1}return~(l=a(t))&&(r=c[l]=s[l](t)),{c(){e=b("div"),n=b("div"),o=b("div"),r&&r.c(),C(o,"class","decorative-border"),C(n,"class","full-fill"),C(e,"id","menu")},m(t,r){h(t,e,r),m(e,n),m(n,o),~l&&c[l].m(o,null),i=!0},p(t,[e]){let n=l;l=a(t),l===n?~l&&c[l].p(t,e):(r&&(Z(),W(c[n],1,1,(()=>{c[n]=null})),Y()),~l?(r=c[l],r?r.p(t,e):(r=c[l]=s[l](t),r.c()),Q(r,1),r.m(o,null)):r=null)},i(t){i||(Q(r),i=!0)},o(t){W(r),i=!1},d(t){t&&v(e),~l&&c[l].d()}}}function on(t){if("Escape"===t.code)goBack()}function ln(t,e,n){let o;console.log("Menu: Svelte menu is running");let l=!1;function r(t){console.log("Menu: Route:",t),n(0,o=t),window.updateInGameMenuStatus()}return window.updateInGameMenuStatus=()=>{n(1,l=void 0!==window.player)},r(Mt),window.goBack=function(){r(Mt)},P((()=>{document.body.addEventListener("keydown",on)})),B((()=>{document.body.removeEventListener("keydown",on)})),window.setMenu=r,[o,l,r]}return new class extends rt{constructor(t){super(),lt(this,t,ln,nn,i,{})}}({target:document.getElementById("menu-app")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
