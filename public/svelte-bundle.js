var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function o(){return Object.create(null)}function l(e){e.forEach(n)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,c;function a(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function u(t,n,o){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function d(e,n,o,l){return e[1]&&l?t(o.ctx.slice(),e[1](l(n))):o.ctx}function f(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function g(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function p(e,t,n){return e.set(n),t}function m(e,t){e.appendChild(t)}function $(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function b(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function y(){return v(" ")}function x(){return v("")}function T(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function k(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function E(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:k(e,o,t[o])}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function O(e,t){e.value=null==t?"":t}function I(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function C(e,t,n){e.classList[n?"add":"remove"](t)}function A(e){c=e}function R(){if(!c)throw new Error("Function called outside component initialization");return c}function L(e){R().$$.on_mount.push(e)}function M(e){R().$$.on_destroy.push(e)}function N(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const P=[],_=[],F=[],D=[],U=Promise.resolve();let G=!1;function B(e){F.push(e)}const H=new Set;let q=0;function j(){const e=c;do{for(;q<P.length;){const e=P[q];q++,A(e),z(e.$$)}for(A(null),P.length=0,q=0;_.length;)_.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];H.has(t)||(H.add(t),t())}F.length=0}while(P.length);for(;D.length;)D.pop()();G=!1,H.clear(),A(e)}function z(e){if(null!==e.fragment){e.update(),l(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const V=new Set;let Y;function K(){Y={r:0,c:[],p:Y}}function J(){Y.r||l(Y.c),Y=Y.p}function Z(e,t){e&&e.i&&(V.delete(e),e.i(t))}function W(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),Y.c.push((()=>{V.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function Q(e,t){const n={},o={},l={$$scope:1};let i=e.length;for(;i--;){const r=e[i],s=t[i];if(s){for(const e in r)e in s||(o[e]=1);for(const e in s)l[e]||(n[e]=s[e],l[e]=1);e[i]=s}else for(const e in r)l[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function X(e){e&&e.c()}function ee(e,t,o,r){const{fragment:s,after_update:c}=e.$$;s&&s.m(t,o),r||B((()=>{const t=e.$$.on_mount.map(n).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):l(t),e.$$.on_mount=[]})),c.forEach(B)}function te(e,t){const n=e.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ne(e,t){-1===e.$$.dirty[0]&&(P.push(e),G||(G=!0,U.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(t,n,i,r,s,a,u,d=[-1]){const f=c;A(t);const g=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};u&&u(g.root);let p=!1;if(g.ctx=i?i(t,n.props||{},((e,n,...o)=>{const l=o.length?o[0]:n;return g.ctx&&s(g.ctx[e],g.ctx[e]=l)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](l),p&&ne(t,e)),n})):[],g.update(),p=!0,l(g.before_update),g.fragment=!!r&&r(g.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);g.fragment&&g.fragment.l(e),e.forEach(h)}else g.fragment&&g.fragment.c();n.intro&&Z(t.$$.fragment),ee(t,n.target,n.anchor,n.customElement),j()}A(f)}class le{$destroy(){te(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const e=o.indexOf(n);-1!==e&&o.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ie(e){let t,n;return{c(){t=w("div"),k(t,"class","icon svelte-17dwdft"),k(t,"style",n=`background-image: url('ui/icons/${e[2]}')`)},m(e,n){$(e,t,n)},p(e,o){4&o&&n!==(n=`background-image: url('ui/icons/${e[2]}')`)&&k(t,"style",n)},d(e){e&&h(t)}}}function re(n){let o,l,i,r,s,c,a,u,d=(n[4]?globalThis.i18n(n[0]):n[0])+"",f=n[2]&&ie(n),g=[{class:c=`button-wrapper ${n[5]} ${n[3]?"is-active":""}`},{style:n[1]},n[6]],p={};for(let e=0;e<g.length;e+=1)p=t(p,g[e]);return{c(){o=w("button"),l=w("div"),f&&f.c(),i=y(),r=w("span"),s=v(d),k(r,"class","button-text svelte-17dwdft"),k(l,"class","button-inner svelte-17dwdft"),E(o,p),C(o,"svelte-17dwdft",!0)},m(e,t){$(e,o,t),m(o,l),f&&f.m(l,null),m(l,i),m(l,r),m(r,s),o.autofocus&&o.focus(),a||(u=T(o,"click",n[7]),a=!0)},p(e,[t]){e[2]?f?f.p(e,t):(f=ie(e),f.c(),f.m(l,i)):f&&(f.d(1),f=null),17&t&&d!==(d=(e[4]?globalThis.i18n(e[0]):e[0])+"")&&S(s,d),E(o,p=Q(g,[40&t&&c!==(c=`button-wrapper ${e[5]} ${e[3]?"is-active":""}`)&&{class:c},2&t&&{style:e[1]},64&t&&e[6]])),C(o,"svelte-17dwdft",!0)},i:e,o:e,d(e){e&&h(o),f&&f.d(),a=!1,u()}}}function se(e,n,o){const l=["text","style","iconPath","isActive","doLocalizeText","class"];let i=g(n,l),{text:r}=n,{style:s}=n,{iconPath:c}=n,{isActive:a}=n,{doLocalizeText:u=!0}=n,{class:d=""}=n;return e.$$set=e=>{n=t(t({},n),f(e)),o(6,i=g(n,l)),"text"in e&&o(0,r=e.text),"style"in e&&o(1,s=e.style),"iconPath"in e&&o(2,c=e.iconPath),"isActive"in e&&o(3,a=e.isActive),"doLocalizeText"in e&&o(4,u=e.doLocalizeText),"class"in e&&o(5,d=e.class)},[r,s,c,a,u,d,i,function(t){N.call(this,e,t)}]}class ce extends le{constructor(e){super(),oe(this,e,se,re,r,{text:0,style:1,iconPath:2,isActive:3,doLocalizeText:4,class:5})}}function ae(n){let o,l,i,r,s,c,u,d,f,g,p,b=[{class:f=`button-wrapper ${n[6]} ${n[4]?"is-active":""}`},n[7]],y={};for(let e=0;e<b.length;e+=1)y=t(y,b[e]);return{c(){o=w("a"),l=w("button"),i=w("div"),r=w("img"),c=v("\r\n             \r\n            "),u=w("span"),d=v(n[5]),a(r.src,s=n[0])||k(r,"src",s),k(r,"width",n[3]),k(r,"alt",n[1]),k(i,"class","svelte-pxurxu"),E(l,y),C(l,"svelte-pxurxu",!0),k(o,"target","_blank"),k(o,"rel","noreferrer"),k(o,"href",n[2])},m(e,t){$(e,o,t),m(o,l),m(l,i),m(i,r),m(i,c),m(i,u),m(u,d),l.autofocus&&l.focus(),g||(p=T(l,"click",n[8]),g=!0)},p(e,[t]){1&t&&!a(r.src,s=e[0])&&k(r,"src",s),8&t&&k(r,"width",e[3]),2&t&&k(r,"alt",e[1]),32&t&&S(d,e[5]),E(l,y=Q(b,[80&t&&f!==(f=`button-wrapper ${e[6]} ${e[4]?"is-active":""}`)&&{class:f},128&t&&e[7]])),C(l,"svelte-pxurxu",!0),4&t&&k(o,"href",e[2])},i:e,o:e,d(e){e&&h(o),g=!1,p()}}}function ue(e,n,o){const l=["src","alt","href","width","isActive","text","class"];let i=g(n,l),{src:r}=n,{alt:s}=n,{href:c}=n,{width:a}=n,{isActive:u}=n,{text:d=""}=n,{class:p=""}=n;return e.$$set=e=>{n=t(t({},n),f(e)),o(7,i=g(n,l)),"src"in e&&o(0,r=e.src),"alt"in e&&o(1,s=e.alt),"href"in e&&o(2,c=e.href),"width"in e&&o(3,a=e.width),"isActive"in e&&o(4,u=e.isActive),"text"in e&&o(5,d=e.text),"class"in e&&o(6,p=e.class)},[r,s,c,a,u,d,p,i,function(t){N.call(this,e,t)}]}class de extends le{constructor(e){super(),oe(this,e,ue,ae,r,{src:0,alt:1,href:2,width:3,isActive:4,text:5,class:6})}}function fe(t){let n,o,l,i,r,s,c,a,u,d,f,g,p,b,v,x,T;return r=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),r.$on("click",t[0]),x=new de({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2",text:"Spellmasons Discord"}}),{c(){n=w("div"),o=w("aside"),l=w("div"),i=w("div"),X(r.$$.fragment),s=y(),c=w("h1"),c.textContent=`${globalThis.i18n("Mods")}`,a=y(),u=w("main"),d=w("h1"),d.textContent="Mod support is coming soon!",f=y(),g=w("div"),g.textContent="Feel free to join the #modding channel in the Spellmasons Discord to\r\n            keep up with the latest!",p=y(),b=w("br"),v=y(),X(x.$$.fragment),k(c,"class","options-title"),k(i,"class","flex align-items-center gap-20 svelte-1ibfkw1"),k(l,"class","flex flex-direction-column gap-15 pad-20 svelte-1ibfkw1"),k(g,"class","svelte-1ibfkw1"),k(u,"class","svelte-1ibfkw1"),k(n,"class","flex svelte-1ibfkw1")},m(e,t){$(e,n,t),m(n,o),m(o,l),m(l,i),ee(r,i,null),m(i,s),m(i,c),m(n,a),m(n,u),m(u,d),m(u,f),m(u,g),m(u,p),m(u,b),m(u,v),ee(x,u,null),T=!0},p:e,i(e){T||(Z(r.$$.fragment,e),Z(x.$$.fragment,e),T=!0)},o(e){W(r.$$.fragment,e),W(x.$$.fragment,e),T=!1},d(e){e&&h(n),te(r),te(x)}}}function ge(e){return[()=>window.goBack()]}class pe extends le{constructor(e){super(),oe(this,e,ge,fe,r,{})}}function me(e,t,n){const o=e.slice();return o[2]=t[n][0],o[3]=t[n][1],o[5]=n,o}function $e(t){let n,o,l,i,r,s=t[2]+"",c=t[3]+"";return{c(){n=w("tr"),o=w("td"),l=v(s),i=w("td"),r=v(c),k(o,"class","svelte-177f09k"),k(i,"class","svelte-177f09k")},m(e,t){$(e,n,t),m(n,o),m(o,l),m(n,i),m(i,r)},p:e,d(e){e&&h(n)}}}function he(e){let t,n,o,l,i,r,s,c,a,u,d,f,g,p,v,x,T,E,S,O,C,A;l=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),l.$on("click",e[1]);let R=e[0],L=[];for(let t=0;t<R.length;t+=1)L[t]=$e(me(e,R,t));return{c(){t=w("div"),n=w("aside"),o=w("div"),X(l.$$.fragment),i=y(),r=w("main"),s=w("div"),c=w("h2"),c.textContent="Credits",a=y(),u=w("table"),d=w("tbody");for(let e=0;e<L.length;e+=1)L[e].c();f=y(),g=w("p"),g.textContent="And huge thanks to the many others unnamed above who were\r\n                helpful to me during the process of creating this game!",p=y(),v=w("h2"),v.textContent="Inspiration",x=y(),T=w("p"),T.textContent="Spellmasons drew inspiration from a number of incredible indie\r\n                titles including: Nuclear Throne, Magicka, Into the Breach, and\r\n                Hoplite",E=y(),S=w("h2"),S.textContent="Font: Silkscreen",O=y(),C=w("details"),C.innerHTML="<summary>Silkscreen Font License</summary> \n                <pre>                    Copyright 2001 The Silkscreen Project Authors\n                    (https://github.com/googlefonts/silkscreen) This Font\n                    Software is licensed under the SIL Open Font License,\n                    Version 1.1. This license is copied below, and is also\n                    available with a FAQ at: http://scripts.sil.org/OFL\n                    -----------------------------------------------------------\n                    SIL OPEN FONT LICENSE Version 1.1 - 26 February 2007\n                    -----------------------------------------------------------\n                    PREAMBLE The goals of the Open Font License (OFL) are to\n                    stimulate worldwide development of collaborative font\n                    projects, to support the font creation efforts of academic\n                    and linguistic communities, and to provide a free and open\n                    framework in which fonts may be shared and improved in\n                    partnership with others. The OFL allows the licensed fonts\n                    to be used, studied, modified and redistributed freely as\n                    long as they are not sold by themselves. The fonts,\n                    including any derivative works, can be bundled, embedded,\n                    redistributed and/or sold with any software provided that\n                    any reserved names are not used by derivative works. The\n                    fonts and derivatives, however, cannot be released under any\n                    other type of license. The requirement for fonts to remain\n                    under this license does not apply to any document created\n                    using the fonts or their derivatives. DEFINITIONS &quot;Font\n                    Software&quot; refers to the set of files released by the\n                    Copyright Holder(s) under this license and clearly marked as\n                    such. This may include source files, build scripts and\n                    documentation. &quot;Reserved Font Name&quot; refers to any names\n                    specified as such after the copyright statement(s).\n                    &quot;Original Version&quot; refers to the collection of Font Software\n                    components as distributed by the Copyright Holder(s).\n                    &quot;Modified Version&quot; refers to any derivative made by adding\n                    to, deleting, or substituting -- in part or in whole -- any\n                    of the components of the Original Version, by changing\n                    formats or by porting the Font Software to a new\n                    environment. &quot;Author&quot; refers to any designer, engineer,\n                    programmer, technical writer or other person who contributed\n                    to the Font Software. PERMISSION &amp; CONDITIONS Permission is\n                    hereby granted, free of charge, to any person obtaining a\n                    copy of the Font Software, to use, study, copy, merge,\n                    embed, modify, redistribute, and sell modified and\n                    unmodified copies of the Font Software, subject to the\n                    following conditions: 1) Neither the Font Software nor any\n                    of its individual components, in Original or Modified\n                    Versions, may be sold by itself. 2) Original or Modified\n                    Versions of the Font Software may be bundled, redistributed\n                    and/or sold with any software, provided that each copy\n                    contains the above copyright notice and this license. These\n                    can be included either as stand-alone text files,\n                    human-readable headers or in the appropriate\n                    machine-readable metadata fields within text or binary files\n                    as long as those fields can be easily viewed by the user. 3)\n                    No Modified Version of the Font Software may use the\n                    Reserved Font Name(s) unless explicit written permission is\n                    granted by the corresponding Copyright Holder. This\n                    restriction only applies to the primary font name as\n                    presented to the users. 4) The name(s) of the Copyright\n                    Holder(s) or the Author(s) of the Font Software shall not be\n                    used to promote, endorse or advertise any Modified Version,\n                    except to acknowledge the contribution(s) of the Copyright\n                    Holder(s) and the Author(s) or with their explicit written\n                    permission. 5) The Font Software, modified or unmodified, in\n                    part or in whole, must be distributed entirely under this\n                    license, and must not be distributed under any other\n                    license. The requirement for fonts to remain under this\n                    license does not apply to any document created using the\n                    Font Software. TERMINATION This license becomes null and\n                    void if any of the above conditions are not met. DISCLAIMER\n                    THE FONT SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF\n                    ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO\n                    ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR\n                    PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK,\n                    OR OTHER RIGHT. IN NO EVENT SHALL THE COPYRIGHT HOLDER BE\n                    LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING\n                    ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\n                    DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n                    OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE\n                    THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT\n                    SOFTWARE.\n                </pre>",k(o,"class","flex align-items-center gap-20 svelte-177f09k"),k(n,"class","flex flex-direction-column gap-15 pad-20"),k(s,"class","pad-20 svelte-177f09k"),I(s,"overflow","auto"),I(s,"height","95vh"),k(t,"class","flex svelte-177f09k")},m(e,h){$(e,t,h),m(t,n),m(n,o),ee(l,o,null),m(t,i),m(t,r),m(r,s),m(s,c),m(s,a),m(s,u),m(u,d);for(let e=0;e<L.length;e+=1)L[e].m(d,null);m(s,f),m(s,g),m(s,p),m(s,v),m(s,x),m(s,T),m(s,E),m(s,S),m(s,O),m(s,C),A=!0},p(e,[t]){if(1&t){let n;for(R=e[0],n=0;n<R.length;n+=1){const o=me(e,R,n);L[n]?L[n].p(o,t):(L[n]=$e(o),L[n].c(),L[n].m(d,null))}for(;n<L.length;n+=1)L[n].d(1);L.length=R.length}},i(e){A||(Z(l.$$.fragment,e),A=!0)},o(e){W(l.$$.fragment,e),A=!1},d(e){e&&h(t),te(l),b(L,e)}}}function be(e){return[[["Jordan O'Leary","Game Design and Development"],["theBlurryBox | theblurrybox.com","Art and Animation"],["Valentin Cochet | @coc_val","Sound Effect Design"],["Jake O'Connell","UI Design and Video Production"],["BananaMilk","Music"],["Lost Lumens / Brad Clark","Audio Mastering and Playtesting"],["Matt Sweda","Brainstorming"],["Kacey Misskelley","User Experience Research"],["Russell Champoux","Playtesting"],["Rachel Bruhn","Playtesting"],["Jakob Free","Playtesting"],["Lochlan O'Leary","Playtesting"],["https://www.kenney.nl/","Some Icons"]],()=>window.goBack()]}class we extends le{constructor(e){super(),oe(this,e,be,he,r,{})}}const ve="spellmasons-save-";function ye(e,t,n){const o=e.slice();return o[3]=t[n],o}function xe(e){let t,n,o,l;return n=new ce({props:{type:"button",text:e[3]}}),n.$on("click",(function(){return e[2](e[3])})),{c(){t=w("div"),X(n.$$.fragment),o=y()},m(e,i){$(e,t,i),ee(n,t,null),m(t,o),l=!0},p(t,n){e=t},i(e){l||(Z(n.$$.fragment,e),l=!0)},o(e){W(n.$$.fragment,e),l=!1},d(e){e&&h(t),te(n)}}}function Te(e){let t,n,o,l,i,r,s,c,a,u,d;i=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",e[1]);let f=e[0],g=[];for(let t=0;t<f.length;t+=1)g[t]=xe(ye(e,f,t));const p=e=>W(g[e],1,1,(()=>{g[e]=null}));return{c(){t=w("div"),n=w("aside"),o=w("div"),l=w("div"),X(i.$$.fragment),r=y(),s=w("h1"),s.textContent=`${globalThis.i18n("Previous Games")}`,c=y(),a=w("main"),u=w("div");for(let e=0;e<g.length;e+=1)g[e].c();k(s,"class","options-title svelte-1i4wqmv"),k(l,"class","flex align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-1i4wqmv"),k(u,"class","pad-20 flex flex-direction-column gap-15"),k(a,"class","svelte-1i4wqmv"),k(t,"class","flex")},m(e,f){$(e,t,f),m(t,n),m(n,o),m(o,l),ee(i,l,null),m(l,r),m(l,s),m(t,c),m(t,a),m(a,u);for(let e=0;e<g.length;e+=1)g[e].m(u,null);d=!0},p(e,[t]){if(1&t){let n;for(f=e[0],n=0;n<f.length;n+=1){const o=ye(e,f,n);g[n]?(g[n].p(o,t),Z(g[n],1)):(g[n]=xe(o),g[n].c(),Z(g[n],1),g[n].m(u,null))}for(K(),n=f.length;n<g.length;n+=1)p(n);J()}},i(e){if(!d){Z(i.$$.fragment,e);for(let e=0;e<f.length;e+=1)Z(g[e]);d=!0}},o(e){W(i.$$.fragment,e),g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)W(g[e]);d=!1},d(e){e&&h(t),te(i),b(g,e)}}}function ke(e){return[Object.keys(localStorage).filter((e=>e.includes(ve))).map((e=>e.split(ve).join(""))).reverse(),()=>window.goBack(),e=>window.load(e)]}class Ee extends le{constructor(e){super(),oe(this,e,ke,Te,r,{})}}function Se(e,t,n){const o=e.slice();return o[2]=t[n],o}function Oe(e){let t,n;return t=new ce({props:{type:"button",text:e[2]}}),t.$on("click",(function(){return e[1](e[2])})),{c(){X(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(t,n){e=t},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Ie(e){let t,n,o,l,i,r,s,c,a,u,d,f,g,p,v,x,T,E,S,O,C,A,R,L,M,N;i=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",e[0]),x=new de({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2",text:"@spellmasons"}}),O=new de({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2",text:"Discord"}});let P=window.explainKeys||[],_=[];for(let t=0;t<P.length;t+=1)_[t]=Oe(Se(e,P,t));const F=e=>W(_[e],1,1,(()=>{_[e]=null}));return{c(){t=w("div"),n=w("aside"),o=w("div"),l=w("div"),X(i.$$.fragment),r=y(),s=w("h1"),s.textContent=`${globalThis.i18n("Help")}`,c=y(),a=w("div"),u=y(),d=w("main"),f=w("div"),g=w("div"),p=w("h1"),p.textContent="Contact Me!",v=y(),X(x.$$.fragment),T=y(),E=w("h1"),E.textContent="Join our Discord Community!",S=y(),X(O.$$.fragment),C=y(),A=w("h1"),A.textContent="How to",R=y();for(let e=0;e<_.length;e+=1)_[e].c();L=y(),M=w("div"),k(s,"class","options-title svelte-z08h7l"),k(l,"class","flex align-items-center gap-20"),k(a,"class","flex flex-direction-column gap-15"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-z08h7l"),k(g,"class","pad-20 flex flex-direction-column gap-15 overflowyscroll"),I(g,"min-width","300px"),k(M,"id","explain-portal"),k(M,"class","svelte-z08h7l"),k(f,"class","flex gap-15 height100"),k(t,"class","flex height100")},m(e,h){$(e,t,h),m(t,n),m(n,o),m(o,l),ee(i,l,null),m(l,r),m(l,s),m(o,c),m(o,a),m(t,u),m(t,d),m(d,f),m(f,g),m(g,p),m(g,v),ee(x,g,null),m(g,T),m(g,E),m(g,S),ee(O,g,null),m(g,C),m(g,A),m(g,R);for(let e=0;e<_.length;e+=1)_[e].m(g,null);m(f,L),m(f,M),N=!0},p(e,[t]){if(0&t){let n;for(P=window.explainKeys||[],n=0;n<P.length;n+=1){const o=Se(e,P,n);_[n]?(_[n].p(o,t),Z(_[n],1)):(_[n]=Oe(o),_[n].c(),Z(_[n],1),_[n].m(g,null))}for(K(),n=P.length;n<_.length;n+=1)F(n);J()}},i(e){if(!N){Z(i.$$.fragment,e),Z(x.$$.fragment,e),Z(O.$$.fragment,e);for(let e=0;e<P.length;e+=1)Z(_[e]);N=!0}},o(e){W(i.$$.fragment,e),W(x.$$.fragment,e),W(O.$$.fragment,e),_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)W(_[e]);N=!1},d(e){e&&h(t),te(i),te(x),te(O),b(_,e)}}}function Ce(e){return[()=>window.goBack(),e=>window.menuExplain(e,!0)]}class Ae extends le{constructor(e){super(),oe(this,e,Ce,Ie,r,{})}}function Re(e){let n,o,l,i,r,s;const c=e[5].default,a=function(e,t,n,o){if(e){const l=d(e,t,n,o);return e[0](l)}}(c,e,e[4],null);let u=[{class:l=`button-wrapper ${e[2]} ${e[0]?"is-active":""} ${void 0!==e[1]?e[1]:""}`},e[3]],f={};for(let e=0;e<u.length;e+=1)f=t(f,u[e]);return{c(){n=w("button"),o=w("div"),a&&a.c(),k(o,"class","svelte-1q3uust"),E(n,f),C(n,"svelte-1q3uust",!0)},m(t,l){$(t,n,l),m(n,o),a&&a.m(o,null),n.autofocus&&n.focus(),i=!0,r||(s=T(n,"click",e[6]),r=!0)},p(e,[t]){a&&a.p&&(!i||16&t)&&function(e,t,n,o,l,i){if(l){const r=d(t,n,o,i);e.p(r,l)}}(a,c,e,e[4],i?function(e,t,n,o){if(e[2]&&o){const l=e[2](o(n));if(void 0===t.dirty)return l;if("object"==typeof l){const e=[],n=Math.max(t.dirty.length,l.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|l[o];return e}return t.dirty|l}return t.dirty}(c,e[4],t,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[4]),null),E(n,f=Q(u,[(!i||7&t&&l!==(l=`button-wrapper ${e[2]} ${e[0]?"is-active":""} ${void 0!==e[1]?e[1]:""}`))&&{class:l},8&t&&e[3]])),C(n,"svelte-1q3uust",!0)},i(e){i||(Z(a,e),i=!0)},o(e){W(a,e),i=!1},d(e){e&&h(n),a&&a.d(e),r=!1,s()}}}function Le(e,n,o){const l=["isActive","align","class"];let i=g(n,l),{$$slots:r={},$$scope:s}=n,{isActive:c}=n,{align:a}=n,{class:u=""}=n;return e.$$set=e=>{n=t(t({},n),f(e)),o(3,i=g(n,l)),"isActive"in e&&o(0,c=e.isActive),"align"in e&&o(1,a=e.align),"class"in e&&o(2,u=e.class),"$$scope"in e&&o(4,s=e.$$scope)},[c,a,u,i,s,r,function(t){N.call(this,e,t)}]}class Me extends le{constructor(e){super(),oe(this,e,Le,Re,r,{isActive:0,align:1,class:2})}}const Ne="OPTIONS",Pe="LOAD",_e="LOCALIZATION",Fe="CREDITS",De="MODS",Ue="HELP",Ge="PLAY",Be="MULTIPLAYER_SERVER_CHOOSER";function He(e,t,n){const o=e.slice();return o[9]=t[n][0],o[10]=t[n][1],o}function qe(e,t,n){const o=e.slice();return o[13]=t[n],o[15]=n,o}function je(t){let n,o=(t[13]||"").split("Key").join("").split("Digit").join("").toLowerCase()+"";return{c(){n=v(o)},m(e,t){$(e,n,t)},p:e,d(e){e&&h(n)}}}function ze(t){let n,o=globalThis.i18n("reassign")+"";return{c(){n=v(o)},m(e,t){$(e,n,t)},p:e,d(e){e&&h(n)}}}function Ve(e){let t,n,o,l;function i(e,t){return e[0]==e[9]&&e[1]==e[15]?ze:je}let r=i(e),s=r(e);function c(){return e[5](e[9],e[15])}return{c(){t=w("td"),n=w("button"),s.c(),k(n,"class","reassignKey svelte-bp9ml1")},m(e,i){$(e,t,i),m(t,n),s.m(n,null),o||(l=T(n,"click",c),o=!0)},p(t,o){r===(r=i(e=t))&&s?s.p(e,o):(s.d(1),s=r(e),s&&(s.c(),s.m(n,null)))},d(e){e&&h(t),s.d(),o=!1,l()}}}function Ye(e){let t,n,o,l,i,r=globalThis.i18n(e[9])+"",s=Object.assign(["","",""],e[10]),c=[];for(let t=0;t<s.length;t+=1)c[t]=Ve(qe(e,s,t));return{c(){t=w("tr"),n=w("td"),o=v(r),l=y();for(let e=0;e<c.length;e+=1)c[e].c();i=y()},m(e,r){$(e,t,r),m(t,n),m(n,o),m(t,l);for(let e=0;e<c.length;e+=1)c[e].m(t,null);m(t,i)},p(e,n){if(19&n){let o;for(s=Object.assign(["","",""],e[10]),o=0;o<s.length;o+=1){const l=qe(e,s,o);c[o]?c[o].p(l,n):(c[o]=Ve(l),c[o].c(),c[o].m(t,i))}for(;o<c.length;o+=1)c[o].d(1);c.length=s.length}},d(e){e&&h(t),b(c,e)}}}function Ke(e){let t,n,o,l=Object.entries(globalThis.controlMap||{}),i=[];for(let t=0;t<l.length;t+=1)i[t]=Ye(He(e,l,t));return{c(){t=w("tr"),t.innerHTML="<td></td> \n            <td>Option 1</td> \n            <td>Option 2</td> \n            <td>Option 3</td>",n=y();for(let e=0;e<i.length;e+=1)i[e].c();o=x()},m(e,l){$(e,t,l),$(e,n,l);for(let t=0;t<i.length;t+=1)i[t].m(e,l);$(e,o,l)},p(e,t){if(19&t){let n;for(l=Object.entries(globalThis.controlMap||{}),n=0;n<l.length;n+=1){const r=He(e,l,n);i[n]?i[n].p(r,t):(i[n]=Ye(r),i[n].c(),i[n].m(o.parentNode,o))}for(;n<i.length;n+=1)i[n].d(1);i.length=l.length}},d(e){e&&h(t),e&&h(n),b(i,e),e&&h(o)}}}function Je(t){let n,o,l,i,s,c=t[2],a=Ke(t);return{c(){n=w("h2"),o=v(" "),l=v(t[3]),i=y(),s=w("table"),a.c(),I(n,"color","red"),k(s,"id","keymapping")},m(e,t){$(e,n,t),m(n,o),m(n,l),$(e,i,t),$(e,s,t),a.m(s,null)},p(e,[t]){8&t&&S(l,e[3]),4&t&&r(c,c=e[2])?(a.d(1),a=Ke(e),a.c(),a.m(s,null)):a.p(e,t)},i:e,o:e,d(e){e&&h(n),e&&h(i),e&&h(s),a.d(e)}}}function Ze(e,t,n){function o(e,t,o){globalThis.controlMap[r][s]=o,globalThis.persistControls(),n(2,c++,c),a("",0)}function l(e){r&&(globalThis.controlMap?o(0,0,e.code):console.error("Cannot set key, no globalThis.controlMap"))}function i(e){if(globalThis.mouseButtonToKeyCode||console.error("mouseButtonToKeyCode is undefined"),void 0!==e.button){const t=globalThis.mouseButtonToKeyCode(e.button);r&&(globalThis.controlMap?0==e.button||1==e.button||2==e.button?n(3,u=globalThis.i18n("mouseRebindError")):o(0,0,t):console.error("Cannot set key, no globalThis.controlMap"))}}L((()=>{document.body.addEventListener("keydown",l),document.body.addEventListener("mousedown",i)})),M((()=>{document.body.removeEventListener("keydown",l),document.body.removeEventListener("mousedown",i)}));let r="",s=0,c=0;function a(e,t){n(0,r=e),n(1,s=t),n(3,u="")}let u="";return[r,s,c,u,a,(e,t)=>a(e,t)]}class We extends le{constructor(e){super(),oe(this,e,Ze,Je,r,{})}}const Qe=[];function Xe(t,n=e){let o;const l=new Set;function i(e){if(r(t,e)&&(t=e,o)){const e=!Qe.length;for(const e of l)e[1](),Qe.push(e,t);if(e){for(let e=0;e<Qe.length;e+=2)Qe[e][0](Qe[e+1]);Qe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(r,s=e){const c=[r,s];return l.add(c),1===l.size&&(o=n(i)||e),r(t),()=>{l.delete(c),0===l.size&&(o(),o=null)}}}}const et=Xe([]),tt=Xe(!1),nt=Xe(!1),ot=Xe(!1);function lt(){const e=window.isConnected();tt.set(e),e||nt.set(!1),ot.set(!1)}function it(){return window.pieDisconnect().then(lt)}function rt(t){let n,o,i,r,s,c,a,u,d,f,g,p;return{c(){n=w("div"),o=w("div"),i=w("label"),i.textContent=`${globalThis.i18n("Player Name")}`,r=y(),s=w("input"),c=y(),a=w("div"),u=w("label"),u.textContent=`${globalThis.i18n("Robe Color")}`,d=y(),f=w("input"),k(i,"for","player-name"),k(s,"type","text"),k(s,"name","player-name"),k(o,"class","flex flex-direction-column gap-15"),k(u,"for","robe"),k(f,"type","color"),k(f,"name","robe"),k(a,"class","flex flex-direction-column gap-15"),k(n,"class","flex gap-15")},m(e,l){$(e,n,l),m(n,o),m(o,i),m(o,r),m(o,s),O(s,t[0]),m(n,c),m(n,a),m(a,u),m(a,d),m(a,f),O(f,t[1]),g||(p=[T(s,"input",t[4]),T(s,"input",t[5]),T(f,"input",t[6]),T(f,"blur",t[7])],g=!0)},p(e,[t]){1&t&&s.value!==e[0]&&O(s,e[0]),2&t&&O(f,e[1])},i:e,o:e,d(e){e&&h(n),g=!1,l(p)}}}function st(e,t,n){let o;u(e,et,(e=>n(8,o=e)));let l=globalThis.storageGet("player-name"),i=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`,r=`#${parseInt(globalThis.storageGet("player-color")).toString(16)}`;const s=e=>parseInt(e.slice(1),16);function c(e,t,n){window.configPlayer({color:s(e),colorMagic:s(t),name:n}),p(et,o=globalThis.lobbyPlayerList,o)}L((()=>{setTimeout((()=>{c(i,r,l)}),200)}));return[l,i,r,c,function(){l=this.value,n(0,l)},()=>{c(i,r,l)},function(){i=this.value,n(1,i)},()=>{c(i,r,l)}]}class ct extends le{constructor(e){super(),oe(this,e,st,rt,r,{})}}function at(t){let n,o,l,i,r=globalThis.i18n("Language")+"";return{c(){n=w("img"),l=v("\r\n                       \r\n                    "),i=v(r),a(n.src,o="ui/localizationIcon.png")||k(n,"src","ui/localizationIcon.png"),k(n,"alt","language options"),k(n,"width","24"),k(n,"height","24"),I(n,"transform","scale(1.4)")},m(e,t){$(e,n,t),$(e,l,t),$(e,i,t)},p:e,d(e){e&&h(n),e&&h(l),e&&h(i)}}}function ut(t){let n,o,l,i,r;return o=new ce({props:{text:"Toggle FPS / Latency Monitor"}}),o.$on("click",t[21]),i=new ce({props:{text:"Toggle Console"}}),i.$on("click",t[22]),{c(){n=w("div"),X(o.$$.fragment),l=y(),X(i.$$.fragment),k(n,"class","flex flex-direction-column gap-15")},m(e,t){$(e,n,t),ee(o,n,null),m(n,l),ee(i,n,null),r=!0},p:e,i(e){r||(Z(o.$$.fragment,e),Z(i.$$.fragment,e),r=!0)},o(e){W(o.$$.fragment,e),W(i.$$.fragment,e),r=!1},d(e){e&&h(n),te(o),te(i)}}}function dt(t){let n,o;return n=new We({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function ft(t){let n,o;return n=new ct({}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function gt(e){let t,n,o,i,r,s,c,a,u,d,f,g,p,b=globalThis.i18n("Enable Cinematic Camera")+"";n=new ce({props:{text:"Set Fullscreen"}}),n.$on("click",e[16]),i=new ce({props:{text:"Set Windowed Mode"}}),i.$on("click",e[17]);let x=globalThis.isElectron&&function(e){let t,n,o,l,i,r,s,c,a,u=globalThis.i18n("UI Scale")+"";return r=new ce({props:{text:"Smaller"}}),r.$on("click",e[19]),c=new ce({props:{text:"Bigger"}}),c.$on("click",e[20]),{c(){t=v(u),n=v(": "),o=v(e[3]),l=y(),i=w("div"),X(r.$$.fragment),s=y(),X(c.$$.fragment),k(i,"class","flex gap-15")},m(e,u){$(e,t,u),$(e,n,u),$(e,o,u),$(e,l,u),$(e,i,u),ee(r,i,null),m(i,s),ee(c,i,null),a=!0},p(e,t){(!a||8&t)&&S(o,e[3])},i(e){a||(Z(r.$$.fragment,e),Z(c.$$.fragment,e),a=!0)},o(e){W(r.$$.fragment,e),W(c.$$.fragment,e),a=!1},d(e){e&&h(t),e&&h(n),e&&h(o),e&&h(l),e&&h(i),te(r),te(c)}}}(e);return{c(){t=w("div"),X(n.$$.fragment),o=y(),X(i.$$.fragment),r=y(),s=w("label"),c=w("input"),a=y(),u=v(b),d=y(),x&&x.c(),k(c,"type","checkbox"),k(t,"class","flex flex-direction-column gap-15")},m(l,h){$(l,t,h),ee(n,t,null),m(t,o),ee(i,t,null),m(t,r),m(t,s),m(s,c),c.checked=e[2],m(s,a),m(s,u),m(t,d),x&&x.m(t,null),f=!0,g||(p=[T(c,"change",e[18]),T(c,"click",e[5])],g=!0)},p(e,t){4&t&&(c.checked=e[2]),globalThis.isElectron&&x.p(e,t)},i(e){f||(Z(n.$$.fragment,e),Z(i.$$.fragment,e),Z(x),f=!0)},o(e){W(n.$$.fragment,e),W(i.$$.fragment,e),W(x),f=!1},d(e){e&&h(t),te(n),te(i),x&&x.d(),g=!1,l(p)}}}function pt(t){let n,o,i,r,s,c,a,u,d,f,g,p,b,x,E,S,O,I=globalThis.i18n("Total Volume")+"",C=globalThis.i18n("Music Volume")+"",A=globalThis.i18n("Sound Effects Volume")+"";return x=new ce({props:{text:"Play next song"}}),x.$on("click",t[15]),{c(){n=w("div"),o=v(I),i=y(),r=w("input"),s=y(),c=v(C),a=y(),u=w("input"),d=y(),f=v(A),g=y(),p=w("input"),b=y(),X(x.$$.fragment),k(r,"type","range"),r.value=100*window.volume,k(r,"min","0"),k(r,"max","100"),k(u,"type","range"),u.value=100*window.volumeMusic,k(u,"min","0"),k(u,"max","100"),k(p,"type","range"),p.value=100*window.volumeGame,k(p,"min","0"),k(p,"max","100"),k(n,"class","flex flex-direction-column gap-15")},m(e,t){$(e,n,t),m(n,o),m(n,i),m(n,r),m(n,s),m(n,c),m(n,a),m(n,u),m(n,d),m(n,f),m(n,g),m(n,p),m(n,b),ee(x,n,null),E=!0,S||(O=[T(r,"input",yt),T(u,"input",xt),T(p,"input",Tt)],S=!0)},p:e,i(e){E||(Z(x.$$.fragment,e),E=!0)},o(e){W(x.$$.fragment,e),E=!1},d(e){e&&h(n),te(x),S=!1,l(O)}}}function mt(t){let n,o,l,i,r,s,c,a,u,d,f,g,p,b,x,E,S,O,I,C,A,R,L,M,N,P,_,F,D,U,G,B,H,q=globalThis.skipTutorial&&void 0!==globalThis.isTutorialComplete&&!globalThis.isTutorialComplete();r=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),r.$on("click",t[6]),d=new ce({props:{isActive:t[1]==wt,type:"button",text:`🔊 ${globalThis.i18n("Audio")}`,style:"text-align:left",doLocalizeText:!1}}),d.$on("click",t[7]),g=new ce({props:{isActive:t[1]==vt,type:"button",text:`🖥️ ${globalThis.i18n("Video")}`,style:"text-align:left",doLocalizeText:!1}}),g.$on("click",t[8]),b=new ce({props:{isActive:t[1]==bt,type:"button",text:`🧙 ${globalThis.i18n("Player")}`,style:"text-align:left",doLocalizeText:!1}}),b.$on("click",t[9]),E=new ce({props:{isActive:t[1]==$t,type:"button",text:`⌨️ ${globalThis.i18n("Controls")}`,style:"text-align:left",doLocalizeText:!1}}),E.$on("click",t[10]);let j=q&&function(t){let n,o;return n=new ce({props:{text:"Skip Tutorial",style:"text-align:left"}}),n.$on("click",t[11]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);I=new ce({props:{type:"button",text:`❓ ${globalThis.i18n("Reset Tutorial")}`,style:"text-align:left",doLocalizeText:!1}}),I.$on("click",t[12]),A=new Me({props:{class:"button-wrapper-bg-2",align:"left",$$slots:{default:[at]},$$scope:{ctx:t}}}),A.$on("click",t[13]);const z=[pt,gt,ft,dt,ut],V=[];function Y(e,t){return e[1]==wt?0:e[1]==vt?1:e[1]==bt?2:e[1]==$t?3:e[1]==ht?4:-1}return~(D=Y(t))&&(U=V[D]=z[D](t)),{c(){n=w("div"),o=w("aside"),l=w("div"),i=w("div"),X(r.$$.fragment),s=y(),c=w("h1"),c.textContent=`${globalThis.i18n("Settings")}`,a=y(),u=w("div"),X(d.$$.fragment),f=y(),X(g.$$.fragment),p=y(),X(b.$$.fragment),x=y(),X(E.$$.fragment),S=y(),j&&j.c(),O=y(),X(I.$$.fragment),C=y(),X(A.$$.fragment),R=y(),L=w("button"),M=v("Developer Settings"),P=y(),_=w("main"),F=w("div"),U&&U.c(),k(c,"class","options-title svelte-5pyo49"),k(i,"class","flex align-items-center gap-20"),k(u,"class","flex flex-direction-column gap-15"),k(l,"class","flex flex-direction-column gap-15 pad-20"),k(L,"id","devSettings"),k(L,"isactive",N=t[1]==ht),k(L,"type","button"),k(L,"class","svelte-5pyo49"),k(o,"class","svelte-5pyo49"),k(F,"class","pad-20"),k(n,"class","flex")},m(e,h){$(e,n,h),m(n,o),m(o,l),m(l,i),ee(r,i,null),m(i,s),m(i,c),m(l,a),m(l,u),ee(d,u,null),m(u,f),ee(g,u,null),m(u,p),ee(b,u,null),m(u,x),ee(E,u,null),m(u,S),j&&j.m(u,null),m(u,O),ee(I,u,null),m(u,C),ee(A,u,null),m(o,R),m(o,L),m(L,M),m(n,P),m(n,_),m(_,F),~D&&V[D].m(F,null),G=!0,B||(H=T(L,"click",t[14]),B=!0)},p(e,[t]){const n={};2&t&&(n.isActive=e[1]==wt),d.$set(n);const o={};2&t&&(o.isActive=e[1]==vt),g.$set(o);const l={};2&t&&(l.isActive=e[1]==bt),b.$set(l);const i={};2&t&&(i.isActive=e[1]==$t),E.$set(i),q&&j.p(e,t);const r={};16777216&t&&(r.$$scope={dirty:t,ctx:e}),A.$set(r),(!G||2&t&&N!==(N=e[1]==ht))&&k(L,"isactive",N);let s=D;D=Y(e),D===s?~D&&V[D].p(e,t):(U&&(K(),W(V[s],1,1,(()=>{V[s]=null})),J()),~D?(U=V[D],U?U.p(e,t):(U=V[D]=z[D](e),U.c()),Z(U,1),U.m(F,null)):U=null)},i(e){G||(Z(r.$$.fragment,e),Z(d.$$.fragment,e),Z(g.$$.fragment,e),Z(b.$$.fragment,e),Z(E.$$.fragment,e),Z(j),Z(I.$$.fragment,e),Z(A.$$.fragment,e),Z(U),G=!0)},o(e){W(r.$$.fragment,e),W(d.$$.fragment,e),W(g.$$.fragment,e),W(b.$$.fragment,e),W(E.$$.fragment,e),W(j),W(I.$$.fragment,e),W(A.$$.fragment,e),W(U),G=!1},d(e){e&&h(n),te(r),te(d),te(g),te(b),te(E),j&&j.d(),te(I),te(A),~D&&V[D].d(),B=!1,H()}}}const $t="KEY_MAPPING",ht="EXTRAS",bt="PLAYER_CONFIG",wt="AUDIO",vt="VIDEO";function yt(e){window.changeVolume(e.target.value/100)}function xt(e){window.changeVolumeMusic(e.target.value/100)}function Tt(e){window.changeVolumeGame(e.target.value/100)}function kt(e,t,n){let{setRoute:o}=t,l=wt;function i(e){n(1,l=e)}let r=globalThis.cinematicCameraEnabled;let s=NaN;globalThis.STORAGE_ID_UI_ZOOM?s=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM)):console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");let c=isNaN(s)?1:s;return e.$$set=e=>{"setRoute"in e&&n(0,o=e.setRoute)},[o,l,r,c,i,function(e){globalThis.setCinematicCameraEnabled(e.target.checked),n(2,r=globalThis.cinematicCameraEnabled)},()=>window.goBack(),()=>i(wt),()=>i(vt),()=>i(bt),()=>i($t),()=>{globalThis.skipTutorial()},()=>globalThis.resetTutorial(),()=>{o(_e)},()=>i(ht),()=>window.playNextSong(),()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!0):document.body.requestFullscreen().catch((e=>{console.error(`Error attempting to enable fullscreen mode: ${e.message} (${e.name})`)}))},()=>{globalThis.isElectron?globalThis.electronSettings.setFullscreen(!1):document.exitFullscreen()},function(){r=this.checked,n(2,r)},()=>{n(3,c-=.1),n(3,c=Math.round(10*c)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,c),globalThis.electronSettings.setUIZoom(c)},()=>{n(3,c+=.1),n(3,c=Math.round(10*c)/10),globalThis.storageSet(globalThis.STORAGE_ID_UI_ZOOM,c),globalThis.electronSettings.setUIZoom(c)},()=>{window.monitorFPS()},()=>{window.electronSettings.toggleDevTools()}]}class Et extends le{constructor(e){super(),oe(this,e,kt,mt,r,{setRoute:0})}}function St(t){let n,o;return{c(){n=w("img"),a(n.src,o="ui/localizationIcon.png")||k(n,"src","ui/localizationIcon.png"),k(n,"alt","language options"),k(n,"width","24"),k(n,"height","24"),I(n,"transform","scale(1.4)")},m(e,t){$(e,n,t)},p:e,d(e){e&&h(n)}}}function Ot(e){let t,n,o={ctx:e,current:null,token:null,hasCatch:!0,pending:Rt,then:At,catch:Ct,blocks:[,,,]};return function(e,t){const n=t.token={};function o(e,o,l,i){if(t.token!==n)return;t.resolved=i;let r=t.ctx;void 0!==l&&(r=r.slice(),r[l]=i);const s=e&&(t.current=e)(r);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(K(),W(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),J())})):t.block.d(1),s.c(),Z(s,1),s.m(t.mount(),t.anchor),c=!0),t.block=s,t.blocks&&(t.blocks[o]=s),c&&j()}if((l=e)&&"object"==typeof l&&"function"==typeof l.then){const n=R();if(e.then((e=>{A(n),o(t.then,1,t.value,e),A(null)}),(e=>{if(A(n),o(t.catch,2,t.error,e),A(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}var l}(window.setupPixiPromise,o),{c(){t=x(),o.block.c()},m(e,l){$(e,t,l),o.block.m(e,o.anchor=l),o.mount=()=>t.parentNode,o.anchor=t,n=!0},p(t,n){!function(e,t,n){const o=t.slice(),{resolved:l}=e;e.current===e.then&&(o[e.value]=l),e.current===e.catch&&(o[e.error]=l),e.block.p(o,n)}(o,e=t,n)},i(e){n||(Z(o.block),n=!0)},o(e){for(let e=0;e<3;e+=1){W(o.blocks[e])}n=!1},d(e){e&&h(t),o.block.d(e),o.token=null,o=null}}}function It(t){let n,o,l,i,s,c,a,u,d,f,g=t[2],p=_t();const b=[Mt,Lt],v=[];function x(e,t){return e[3]&&e[4]&&!globalThis.player.lobbyReady?0:1}o=x(t),l=v[o]=b[o](t);let T=Nt(t),E=p&&function(t){let n,o;return n=new ce({props:{text:"Load",iconPath:"open.png"}}),n.$on("click",t[16]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);return a=new ce({props:{text:"Settings",iconPath:"gear.png"}}),a.$on("click",t[17]),d=new ce({props:{text:"Quit to Main Menu",iconPath:"exitLeft.png"}}),d.$on("click",t[7]),{c(){n=w("div"),l.c(),i=y(),T.c(),s=y(),E&&E.c(),c=y(),X(a.$$.fragment),u=y(),X(d.$$.fragment),k(n,"class","list svelte-1agi30t")},m(e,t){$(e,n,t),v[o].m(n,null),m(n,i),T.m(n,null),m(n,s),E&&E.m(n,null),m(n,c),ee(a,n,null),m(n,u),ee(d,n,null),f=!0},p(t,c){let a=o;o=x(t),o===a?v[o].p(t,c):(K(),W(v[a],1,1,(()=>{v[a]=null})),J(),l=v[o],l?l.p(t,c):(l=v[o]=b[o](t),l.c()),Z(l,1),l.m(n,i)),4&c&&r(g,g=t[2])?(K(),W(T,1,1,e),J(),T=Nt(t),T.c(),Z(T,1),T.m(n,s)):T.p(t,c),p&&E.p(t,c)},i(e){f||(Z(l),Z(T),Z(E),Z(a.$$.fragment,e),Z(d.$$.fragment,e),f=!0)},o(e){W(l),W(T),W(E),W(a.$$.fragment,e),W(d.$$.fragment,e),f=!1},d(e){e&&h(n),v[o].d(),T.d(e),E&&E.d(),te(a),te(d)}}}function Ct(t){let n;return{c(){n=w("p"),n.textContent="Something went wrong loading assets",I(n,"color","red")},m(e,t){$(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function At(t){let n,o,l,i,r,s,c,a,u,d,f,g,p,b=t[9]&&function(t){let n,o;return n=new ce({props:{text:"Resume Last Run",iconPath:"forward.png"}}),n.$on("click",t[18]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);l=new ce({props:{text:"New Run",iconPath:"singleplayer.png"}}),l.$on("click",t[5]),r=new ce({props:{text:"Multiplayer",iconPath:"massiveMultiplayer.png"}}),r.$on("click",t[6]),c=new ce({props:{text:"Load",iconPath:"open.png"}}),c.$on("click",t[19]),u=new ce({props:{text:"Settings",iconPath:"gear.png"}}),u.$on("click",t[20]);let v=globalThis.isElectron&&function(t){let n,o;return n=new ce({props:{text:"Quit Game",iconPath:"door.png"}}),n.$on("click",t[21]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);return{c(){n=w("div"),b&&b.c(),o=y(),X(l.$$.fragment),i=y(),X(r.$$.fragment),s=y(),X(c.$$.fragment),a=y(),X(u.$$.fragment),d=y(),v&&v.c(),f=y(),g=w("br"),k(n,"class","list svelte-1agi30t")},m(e,t){$(e,n,t),b&&b.m(n,null),m(n,o),ee(l,n,null),m(n,i),ee(r,n,null),m(n,s),ee(c,n,null),m(n,a),ee(u,n,null),m(n,d),v&&v.m(n,null),$(e,f,t),$(e,g,t),p=!0},p(e,t){e[9]&&b.p(e,t),globalThis.isElectron&&v.p(e,t)},i(e){p||(Z(b),Z(l.$$.fragment,e),Z(r.$$.fragment,e),Z(c.$$.fragment,e),Z(u.$$.fragment,e),Z(v),p=!0)},o(e){W(b),W(l.$$.fragment,e),W(r.$$.fragment,e),W(c.$$.fragment,e),W(u.$$.fragment,e),W(v),p=!1},d(e){e&&h(n),b&&b.d(),te(l),te(r),te(c),te(u),v&&v.d(),e&&h(f),e&&h(g)}}}function Rt(t){let n;return{c(){n=v("loading assets...")},m(e,t){$(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function Lt(t){let n,o,l,i,r=_t();n=new ce({props:{text:"Resume Game",iconPath:"forward.png"}}),n.$on("click",Ft);let s=r&&function(t){let n,o;return n=new ce({props:{text:"Save",iconPath:"save.png"}}),n.$on("click",t[8]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);return{c(){X(n.$$.fragment),o=y(),s&&s.c(),l=x()},m(e,t){ee(n,e,t),$(e,o,t),s&&s.m(e,t),$(e,l,t),i=!0},p(e,t){r&&s.p(e,t)},i(e){i||(Z(n.$$.fragment,e),Z(s),i=!0)},o(e){W(n.$$.fragment,e),W(s),i=!1},d(e){te(n,e),e&&h(o),s&&s.d(e),e&&h(l)}}}function Mt(t){let n,o;return n=new ce({props:{text:"Back to Lobby"}}),n.$on("click",t[14]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function Nt(t){let n,o,l=globalThis.skipTutorial&&void 0!==globalThis.isTutorialComplete&&!globalThis.isTutorialComplete(),i=l&&function(t){let n,o;return n=new ce({props:{text:"Skip Tutorial"}}),n.$on("click",t[15]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}(t);return{c(){i&&i.c(),n=x()},m(e,t){i&&i.m(e,t),$(e,n,t),o=!0},p(e,t){l&&i.p(e,t)},i(e){o||(Z(i),o=!0)},o(e){W(i),o=!1},d(e){i&&i.d(e),e&&h(n)}}}function Pt(e){let t,n,o,l,i,r,s,c,a,u,d,f,g,p,b,v,T,E,S;n=new ce({props:{text:"Help",iconPath:"question.png"}}),n.$on("click",e[10]),i=new ce({props:{text:"Mods"}}),i.$on("click",e[11]),s=new ce({props:{text:"Credits"}}),s.$on("click",e[12]),u=new de({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",width:"24px",href:"https://twitter.com/spellmasons",class:"button-wrapper-bg-2"}}),f=new de({props:{src:"ui/discord_logo.png",alt:"Spellmasons Discord https://discord.gg/q6sUCreHeJ",width:"24px",href:"https://discord.gg/q6sUCreHeJ",class:"button-wrapper-bg-2"}}),p=new Me({props:{class:"button-wrapper-bg-2",$$slots:{default:[St]},$$scope:{ctx:e}}}),p.$on("click",e[13]);const O=[It,Ot],C=[];function A(e,t){return e[1]?0:1}return v=A(e),T=C[v]=O[v](e),{c(){t=w("div"),X(n.$$.fragment),o=y(),l=w("div"),X(i.$$.fragment),r=y(),X(s.$$.fragment),c=y(),a=w("div"),X(u.$$.fragment),d=y(),X(f.$$.fragment),g=y(),X(p.$$.fragment),b=y(),T.c(),E=x(),k(t,"id","corner-left"),k(t,"class","flex gap svelte-1agi30t"),I(t,"flex-direction","column"),k(a,"class","flex gap svelte-1agi30t"),k(l,"id","corner"),k(l,"class","flex gap svelte-1agi30t"),I(l,"flex-direction","column")},m(e,h){$(e,t,h),ee(n,t,null),$(e,o,h),$(e,l,h),ee(i,l,null),m(l,r),ee(s,l,null),m(l,c),m(l,a),ee(u,a,null),m(a,d),ee(f,a,null),m(a,g),ee(p,a,null),$(e,b,h),C[v].m(e,h),$(e,E,h),S=!0},p(e,[t]){const n={};4194304&t&&(n.$$scope={dirty:t,ctx:e}),p.$set(n);let o=v;v=A(e),v===o?C[v].p(e,t):(K(),W(C[o],1,1,(()=>{C[o]=null})),J(),T=C[v],T?T.p(e,t):(T=C[v]=O[v](e),T.c()),Z(T,1),T.m(E.parentNode,E))},i(e){S||(Z(n.$$.fragment,e),Z(i.$$.fragment,e),Z(s.$$.fragment,e),Z(u.$$.fragment,e),Z(f.$$.fragment,e),Z(p.$$.fragment,e),Z(T),S=!0)},o(e){W(n.$$.fragment,e),W(i.$$.fragment,e),W(s.$$.fragment,e),W(u.$$.fragment,e),W(f.$$.fragment,e),W(p.$$.fragment,e),W(T),S=!1},d(e){e&&h(t),te(n),e&&h(o),e&&h(l),te(i),te(s),te(u),te(f),te(p),e&&h(b),C[v].d(e),e&&h(E)}}}function _t(){return"solomode_client_id"==globalThis.clientId}function Ft(){window.closeMenu()}function Dt(e,t,n){let o,l;u(e,tt,(e=>n(3,o=e))),u(e,nt,(e=>n(4,l=e)));let{setRoute:i}=t,{inGame:r}=t;if(globalThis.STORAGE_ID_UI_ZOOM){const e=parseFloat(globalThis.storageGet(globalThis.STORAGE_ID_UI_ZOOM));e&&globalThis.electronSettings.setUIZoom(e)}else console.error("globalThis.STORAGE_ID_UI_ZOOM is undefined");const s=!!globalThis.storageGet(`${globalThis.savePrefix}${globalThis.quicksaveKey}`);let c=0;return e.$$set=e=>{"setRoute"in e&&n(0,i=e.setRoute),"inGame"in e&&n(1,r=e.inGame)},[i,r,c,o,l,function(){window.playMusic(),window.startSingleplayer().then((()=>{lt()}))},function(){window.playMusic(),_t()&&it(),i(Be)},function(){if(confirm("Are you sure you want to quit to Main Menu?")){const e=new URL(location.href);e.searchParams.delete("game"),e.searchParams.delete("pieUrl"),window.history.pushState(null,null,e),window.exitCurrentGame().then(lt)}},function(){const e=prompt(i18n("Enter a name for the saved game"));if(e){if(localStorage.getItem(ve+e)){if(!confirm(i18n("A save file with this name already exists.  Are you sure you want to overwrite it?")))return}window.save(e),alert("Game saved!")}},s,()=>i(Ue),()=>i(De),()=>i(Fe),()=>{i(_e)},()=>{i(Be)},()=>{globalThis.skipTutorial(),n(2,c++,c)},()=>i(Pe),()=>i(Ne),()=>{globalThis.load(globalThis.quicksaveKey)},()=>i(Pe),()=>i(Ne),()=>{window.fullyExitGame()}]}class Ut extends le{constructor(e){super(),oe(this,e,Dt,Pt,r,{setRoute:0,inGame:1})}}function Gt(e,t,n){const o=e.slice();return o[4]=t[n].language,o[5]=t[n].code,o[7]=n,o}function Bt(e){let t,n;return t=new ce({props:{text:e[4],isActive:e[1]==e[5],doLocalizeText:!1}}),t.$on("click",(function(){return e[3](e[5])})),{c(){X(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(n,o){e=n;const l={};2&o&&(l.isActive=e[1]==e[5]),t.$set(l)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function Ht(e){let t,n,o,l,i,r,s,c,a,u,d;i=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),i.$on("click",e[2]);let f=e[0],g=[];for(let t=0;t<f.length;t+=1)g[t]=Bt(Gt(e,f,t));const p=e=>W(g[e],1,1,(()=>{g[e]=null}));return{c(){t=w("div"),n=w("aside"),o=w("div"),l=w("div"),X(i.$$.fragment),r=y(),s=w("h1"),s.textContent=`${globalThis.i18n("Localization")}`,c=y(),a=w("main"),u=w("div");for(let e=0;e<g.length;e+=1)g[e].c();k(s,"class","options-title svelte-exei4x"),k(l,"class","align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(n,"class","svelte-exei4x"),k(u,"class","pad-20 flex flex-direction-column gap-15"),k(t,"class","flex")},m(e,f){$(e,t,f),m(t,n),m(n,o),m(o,l),ee(i,l,null),m(l,r),m(l,s),m(t,c),m(t,a),m(a,u);for(let e=0;e<g.length;e+=1)g[e].m(u,null);d=!0},p(e,[t]){if(3&t){let n;for(f=e[0],n=0;n<f.length;n+=1){const o=Gt(e,f,n);g[n]?(g[n].p(o,t),Z(g[n],1)):(g[n]=Bt(o),g[n].c(),Z(g[n],1),g[n].m(u,null))}for(K(),n=f.length;n<g.length;n+=1)p(n);J()}},i(e){if(!d){Z(i.$$.fragment,e);for(let e=0;e<f.length;e+=1)Z(g[e]);d=!0}},o(e){W(i.$$.fragment,e),g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)W(g[e]);d=!1},d(e){e&&h(t),te(i),b(g,e)}}}function qt(e,t,n){const o=globalThis.getSupportedLanguages();let l=globalThis.getChosenLanguageCode();return[o,l,()=>window.goBack(),e=>{globalThis.setLanguage(e,!0),n(1,l=e),window.goBack()}]}class jt extends le{constructor(e){super(),oe(this,e,qt,Ht,r,{languages:0})}get languages(){return this.$$.ctx[0]}}function zt(t){let n,o,l,i;return l=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),l.$on("click",t[0]),{c(){n=w("h1"),n.textContent="This page is still being built",o=y(),X(l.$$.fragment),k(n,"class","svelte-1n2jha3")},m(e,t){$(e,n,t),$(e,o,t),ee(l,e,t),i=!0},p:e,i(e){i||(Z(l.$$.fragment,e),i=!0)},o(e){W(l.$$.fragment,e),i=!1},d(e){e&&h(n),e&&h(o),te(l,e)}}}function Vt(e){return[()=>window.goBack()]}class Yt extends le{constructor(e){super(),oe(this,e,Vt,zt,r,{})}}function Kt(e,t,n){const o=e.slice();return o[3]=t[n].name,o[4]=t[n].status,o[5]=t[n].color,o[6]=t[n].ready,o}function Jt(e){let t,n,o,l,i,r,s,c,a,u,d,f,g,p=e[3]+"",b=e[4]+"",x=e[6]+"";return{c(){t=w("tr"),n=w("td"),o=v(p),l=y(),i=w("td"),r=v(b),s=y(),c=w("td"),u=y(),d=w("td"),f=v(x),g=y(),k(c,"class","lobby-player-color svelte-g23pjw"),k(c,"style",a=`background-color:${e[5]};`)},m(e,a){$(e,t,a),m(t,n),m(n,o),m(t,l),m(t,i),m(i,r),m(t,s),m(t,c),m(t,u),m(t,d),m(d,f),m(t,g)},p(e,t){1&t&&p!==(p=e[3]+"")&&S(o,p),1&t&&b!==(b=e[4]+"")&&S(r,b),1&t&&a!==(a=`background-color:${e[5]};`)&&k(c,"style",a),1&t&&x!==(x=e[6]+"")&&S(f,x)},d(e){e&&h(t)}}}function Zt(e){let t,n,o,l,i,r,s,c,a,u,d;o=new ct({}),i=new ce({props:{type:"button",text:"Ready",class:"sm"}}),i.$on("click",e[1]);let f=e[0],g=[];for(let t=0;t<f.length;t+=1)g[t]=Jt(Kt(e,f,t));return{c(){t=w("h1"),t.textContent=`${globalThis.i18n("Game Lobby")}`,n=y(),X(o.$$.fragment),l=y(),X(i.$$.fragment),r=y(),s=w("table"),c=w("thead"),c.innerHTML="<tr></tr>",a=y(),u=w("tbody");for(let e=0;e<g.length;e+=1)g[e].c();k(s,"id","lobby-player-list"),k(s,"class","svelte-g23pjw")},m(e,f){$(e,t,f),$(e,n,f),ee(o,e,f),$(e,l,f),ee(i,e,f),$(e,r,f),$(e,s,f),m(s,c),m(s,a),m(s,u);for(let e=0;e<g.length;e+=1)g[e].m(u,null);d=!0},p(e,[t]){if(1&t){let n;for(f=e[0],n=0;n<f.length;n+=1){const o=Kt(e,f,n);g[n]?g[n].p(o,t):(g[n]=Jt(o),g[n].c(),g[n].m(u,null))}for(;n<g.length;n+=1)g[n].d(1);g.length=f.length}},i(e){d||(Z(o.$$.fragment,e),Z(i.$$.fragment,e),d=!0)},o(e){W(o.$$.fragment,e),W(i.$$.fragment,e),d=!1},d(e){e&&h(t),e&&h(n),te(o,e),e&&h(l),te(i,e),e&&h(r),e&&h(s),b(g,e)}}}function Wt(e,t,n){let o;u(e,et,(e=>n(0,o=e))),L((()=>{setInterval((()=>{p(et,o=globalThis.lobbyPlayerList,o)}),500)})),M((()=>{clearInterval(undefined)}));return[o,()=>{globalThis.configPlayer({lobbyReady:!0})}]}class Qt extends le{constructor(e){super(),oe(this,e,Wt,Zt,r,{})}}function Xt(e){let t,n;return{c(){t=v("Connecting...\r\n                "),n=w("div"),n.innerHTML='<div class="svelte-1c0uyrk"></div> \n                    <div class="svelte-1c0uyrk"></div> \n                    <div class="svelte-1c0uyrk"></div> \n                    <div class="svelte-1c0uyrk"></div>',k(n,"class","lds-ellipsis svelte-1c0uyrk")},m(e,o){$(e,t,o),$(e,n,o)},d(e){e&&h(t),e&&h(n)}}}function en(e){let t,n,o,i,r,s,c,a,u,d;const f=[on,nn,tn],g=[];function p(e,t){return e[0]?0:e[4]?1:2}return r=p(e),s=g[r]=f[r](e),{c(){t=w("p"),t.textContent=`${globalThis.i18n("Game name")}`,n=y(),o=w("input"),i=y(),s.c(),c=x(),k(o,"class","svelte-1c0uyrk")},m(l,s){$(l,t,s),$(l,n,s),$(l,o,s),O(o,e[2]),$(l,i,s),g[r].m(l,s),$(l,c,s),a=!0,u||(d=[T(o,"input",e[13]),T(o,"keypress",e[14])],u=!0)},p(e,t){4&t&&o.value!==e[2]&&O(o,e[2]);let n=r;r=p(e),r===n?g[r].p(e,t):(K(),W(g[n],1,1,(()=>{g[n]=null})),J(),s=g[r],s?s.p(e,t):(s=g[r]=f[r](e),s.c()),Z(s,1),s.m(c.parentNode,c))},i(e){a||(Z(s),a=!0)},o(e){W(s),a=!1},d(e){e&&h(t),e&&h(n),e&&h(o),e&&h(i),g[r].d(e),e&&h(c),u=!1,l(d)}}}function tn(e){let t,n,o,l,i,r,s,c;return n=new ce({props:{text:"Host"}}),n.$on("click",e[9]),l=new ce({props:{text:"Join"}}),l.$on("click",e[9]),{c(){t=w("div"),X(n.$$.fragment),o=y(),X(l.$$.fragment),i=y(),r=w("div"),s=v(e[3]),k(t,"class","flex gap-15"),I(r,"color","red")},m(e,a){$(e,t,a),ee(n,t,null),m(t,o),ee(l,t,null),$(e,i,a),$(e,r,a),m(r,s),c=!0},p(e,t){(!c||8&t)&&S(s,e[3])},i(e){c||(Z(n.$$.fragment,e),Z(l.$$.fragment,e),c=!0)},o(e){W(n.$$.fragment,e),W(l.$$.fragment,e),c=!1},d(e){e&&h(t),te(n),te(l),e&&h(i),e&&h(r)}}}function nn(t){let n,o;return n=new ce({props:{text:"Leave Room"}}),n.$on("click",t[8]),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function on(t){let n,o;return{c(){n=v("Joining...\r\n                    "),o=w("div"),o.innerHTML='<div class="svelte-1c0uyrk"></div> \n                        <div class="svelte-1c0uyrk"></div> \n                        <div class="svelte-1c0uyrk"></div> \n                        <div class="svelte-1c0uyrk"></div>',k(o,"class","lds-ellipsis svelte-1c0uyrk")},m(e,t){$(e,n,t),$(e,o,t)},p:e,i:e,o:e,d(e){e&&h(n),e&&h(o)}}}function ln(e){let t,n;return t=new Qt({}),{c(){X(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function rn(e){let t,n,o,i,r,s,c,a,u,d,f,g,p,b,x,E,S,C,A,R,L,M,N,P,_,F=globalThis.i18n("Server Url")+"";r=new ce({props:{type:"button",text:"🠔 Back",class:"sm"}}),r.$on("click",e[10]),S=new ce({props:{disabled:e[6],text:"Connect"}}),S.$on("click",e[7]),A=new ce({props:{disabled:!e[6],text:"Disconnect"}}),A.$on("click",it);let D=e[5]&&Xt(),U=e[6]&&en(e),G=e[4]&&ln();return{c(){t=w("div"),n=w("aside"),o=w("div"),i=w("div"),X(r.$$.fragment),s=y(),c=w("h1"),c.textContent=`${globalThis.i18n("Multiplayer")}`,a=y(),u=w("main"),d=w("div"),f=v(F),g=y(),p=w("div"),b=w("input"),x=y(),E=w("div"),X(S.$$.fragment),C=y(),X(A.$$.fragment),R=y(),D&&D.c(),L=y(),U&&U.c(),M=y(),G&&G.c(),k(c,"class","options-title"),k(i,"class","flex align-items-center gap-20"),k(o,"class","flex flex-direction-column gap-15 pad-20"),k(b,"class","svelte-1c0uyrk"),k(E,"class","flex gap-15"),k(d,"class","pad-20"),I(d,"min-width","400px"),k(t,"class","flex")},m(l,h){$(l,t,h),m(t,n),m(n,o),m(o,i),ee(r,i,null),m(i,s),m(i,c),m(t,a),m(t,u),m(u,d),m(d,f),m(d,g),m(d,p),m(p,b),O(b,e[1]),m(p,x),m(p,E),ee(S,E,null),m(E,C),ee(A,E,null),m(d,R),D&&D.m(d,null),m(d,L),U&&U.m(d,null),m(d,M),G&&G.m(d,null),N=!0,P||(_=[T(b,"input",e[11]),T(b,"keypress",e[12])],P=!0)},p(e,[t]){2&t&&b.value!==e[1]&&O(b,e[1]);const n={};64&t&&(n.disabled=e[6]),S.$set(n);const o={};64&t&&(o.disabled=!e[6]),A.$set(o),e[5]?D||(D=Xt(),D.c(),D.m(d,L)):D&&(D.d(1),D=null),e[6]?U?(U.p(e,t),64&t&&Z(U,1)):(U=en(e),U.c(),Z(U,1),U.m(d,M)):U&&(K(),W(U,1,1,(()=>{U=null})),J()),e[4]?G?16&t&&Z(G,1):(G=ln(),G.c(),Z(G,1),G.m(d,null)):G&&(K(),W(G,1,1,(()=>{G=null})),J())},i(e){N||(Z(r.$$.fragment,e),Z(S.$$.fragment,e),Z(A.$$.fragment,e),Z(U),Z(G),N=!0)},o(e){W(r.$$.fragment,e),W(S.$$.fragment,e),W(A.$$.fragment,e),W(U),W(G),N=!1},d(e){e&&h(t),te(r),te(S),te(A),D&&D.d(),U&&U.d(),G&&G.d(),P=!1,l(_)}}}function sn(e,t,n){let o,l,i;u(e,nt,(e=>n(4,o=e))),u(e,ot,(e=>n(5,l=e))),u(e,tt,(e=>n(6,i=e)));let r=!1,s=new URLSearchParams(location.search),c=s.get("pieUrl"),a=s.get("game"),d="";function f(){if(c){console.log("Menu: Connect to server",c),p(ot,l=!0,l);const e=new URL(location.href);return e.searchParams.set("pieUrl",c),window.history.pushState(null,null,e),window.connect_to_wsPie_server(c).catch(console.error).then(lt)}return Promise.reject("No wsUrl defined to connect to")}function g(){a?window.isConnected()?(console.log("Menu: Connect to game name",a),n(0,r=!0),n(3,d=""),window.joinRoom({name:a}).then((()=>{const e=new URL(location.href);e.searchParams.set("game",a),window.history.pushState(null,null,e),p(nt,o=!0,o)})).catch((e=>{console.error("Could not join room",e),n(3,d=e)})).then((()=>{n(0,r=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer"):console.log("Cannot join game until a gameName is provided")}L((()=>{lt()}));return[r,c,a,d,o,l,i,f,function(){window.pieLeaveRoom(),p(nt,o=!1,o)},g,()=>{window.goBack()},function(){c=this.value,n(1,c)},e=>{"Enter"==e.key&&f()},function(){a=this.value,n(2,a)},e=>{"Enter"==e.key&&g()}]}class cn extends le{constructor(e){super(),oe(this,e,sn,rn,r,{})}}function an(t){let n,o;return n=new Yt({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function un(t){let n,o;return n=new Ae({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function dn(t){let n,o;return n=new pe({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function fn(t){let n,o;return n=new we({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function gn(t){let n,o;return n=new Et({props:{route:!0,setRoute:t[5]}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function pn(t){let n,o;return n=new Ee({props:{route:!0,setRoute:t[5]}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function mn(t){let n,o;return n=new jt({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function $n(t){let n,o;return n=new cn({props:{route:!0}}),{c(){X(n.$$.fragment)},m(e,t){ee(n,e,t),o=!0},p:e,i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){W(n.$$.fragment,e),o=!1},d(e){te(n,e)}}}function hn(e){let t,n,o,l,i,r,s,c;const u=[wn,bn],d=[];function f(e,t){return e[4]?0:1}return r=f(e),s=d[r]=u[r](e),{c(){t=w("div"),n=w("div"),o=w("img"),i=y(),s.c(),k(o,"id","logo"),a(o.src,l="ui/logo.png")||k(o,"src","ui/logo.png"),k(o,"alt","Spellmasons logo"),k(o,"width","800"),k(n,"id","main-menu-inner"),k(t,"id","main-menu")},m(e,l){$(e,t,l),m(t,n),m(n,o),m(n,i),d[r].m(n,null),c=!0},p(e,t){let o=r;r=f(e),r===o?d[r].p(e,t):(K(),W(d[o],1,1,(()=>{d[o]=null})),J(),s=d[r],s?s.p(e,t):(s=d[r]=u[r](e),s.c()),Z(s,1),s.m(n,null))},i(e){c||(Z(s),c=!0)},o(e){W(s),c=!1},d(e){e&&h(t),d[r].d()}}}function bn(t){let n,o,l,i,r,s,c,a=Math.floor(100*t[3])+"";return{c(){n=w("span"),n.textContent="Update progress:",o=y(),l=w("div"),i=w("div"),r=v(a),s=v("%  "),k(i,"style",c=`width:${Math.max(15,Math.floor(100*t[3]))}%`),k(l,"class","progress")},m(e,t){$(e,n,t),$(e,o,t),$(e,l,t),m(l,i),m(i,r),m(i,s)},p(e,t){8&t&&a!==(a=Math.floor(100*e[3])+"")&&S(r,a),8&t&&c!==(c=`width:${Math.max(15,Math.floor(100*e[3]))}%`)&&k(i,"style",c)},i:e,o:e,d(e){e&&h(n),e&&h(o),e&&h(l)}}}function wn(e){let t,n;return t=new Ut({props:{setRoute:e[5],inGame:e[1]}}),{c(){X(t.$$.fragment)},m(e,o){ee(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.inGame=e[1]),t.$set(o)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){W(t.$$.fragment,e),n=!1},d(e){te(t,e)}}}function vn(e){let t,n,o,l,i,r;const s=[hn,$n,mn,pn,gn,fn,dn,un,an],c=[];function a(e,t){return e[0]==Ge?0:e[0]==Be?1:e[0]==_e?2:e[0]==Pe?3:e[0]==Ne?4:e[0]==Fe?5:e[0]==De?6:e[0]==Ue?7:"TODO"==e[0]?8:-1}return~(l=a(e))&&(i=c[l]=s[l](e)),{c(){t=w("div"),n=w("div"),o=w("div"),i&&i.c(),k(o,"class","decorative-border"),k(n,"class","full-fill"),k(t,"id","menu")},m(e,i){$(e,t,i),m(t,n),m(n,o),~l&&c[l].m(o,null),r=!0},p(e,t){let n=l;l=a(e),l===n?~l&&c[l].p(e,t):(i&&(K(),W(c[n],1,1,(()=>{c[n]=null})),J()),~l?(i=c[l],i?i.p(e,t):(i=c[l]=s[l](e),i.c()),Z(i,1),i.m(o,null)):i=null)},i(e){r||(Z(i),r=!0)},o(e){W(i),r=!1},d(e){e&&h(t),~l&&c[l].d()}}}function yn(t){let n,o,l=t[2],i=vn(t);return{c(){i.c(),n=x()},m(e,t){i.m(e,t),$(e,n,t),o=!0},p(t,[o]){4&o&&r(l,l=t[2])?(K(),W(i,1,1,e),J(),i=vn(t),i.c(),Z(i,1),i.m(n.parentNode,n)):i.p(t,o)},i(e){o||(Z(i),o=!0)},o(e){W(i),o=!1},d(e){e&&h(n),i.d(e)}}}function xn(e){if("Escape"===e.code)goBack()}function Tn(e,t,n){let o;console.log("Menu: Svelte menu is running");let l=!1,i=0;function r(e){console.log("Menu: Route:",e),n(0,o=e),window.updateInGameMenuStatus()}window.refreshMenu=()=>{console.log("Force refresh menu"),n(2,i++,i)},window.updateInGameMenuStatus=()=>{n(1,l=void 0!==window.player)},r(Ge),window.goBack=function(){r(Ge)};let s=0,c=!0;return L((()=>{document.body.addEventListener("keydown",xn),globalThis.isElectron&&(globalThis.update?(console.log("Register to receive Update events."),globalThis.update.onUpdateCounter(((e,t)=>{console.log("Electron app update:",t),void 0!==t.progress&&n(3,s=t.progress),void 0!==t.complete&&n(4,c=t.complete)}))):console.error("Update: Cannot track update state, no globalThis.update"))})),M((()=>{document.body.removeEventListener("keydown",xn)})),window.setMenu=r,[o,l,i,s,c,r]}return new class extends le{constructor(e){super(),oe(this,e,Tn,yn,r,{})}}({target:document.getElementById("menu-app")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
