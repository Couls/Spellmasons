var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function c(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,i;function u(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function a(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function d(t,e){const n={};e=new Set(e);for(const o in t)e.has(o)||"$"===o[0]||(n[o]=t[o]);return n}function f(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function $(t){return document.createElement(t)}function g(t){return document.createTextNode(t)}function h(){return g(" ")}function v(){return g("")}function w(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)null==e[o]?t.removeAttribute(o):"style"===o?t.style.cssText=e[o]:"__value"===o?t.value=t[o]=e[o]:n[o]&&n[o].set?t[o]=e[o]:y(t,o,e[o])}function k(t,e){t.value=null==e?"":e}function x(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function R(t,e,n){t.classList[n?"add":"remove"](e)}function C(t){i=t}function S(){if(!i)throw new Error("Function called outside component initialization");return i}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const _=[],P=[],M=[],E=[],I=Promise.resolve();let O=!1;function T(t){M.push(t)}const N=new Set;let L=0;function D(){const t=i;do{for(;L<_.length;){const t=_[L];L++,C(t),G(t.$$)}for(C(null),_.length=0,L=0;P.length;)P.pop()();for(let t=0;t<M.length;t+=1){const e=M[t];N.has(e)||(N.add(e),e())}M.length=0}while(_.length);for(;E.length;)E.pop()();O=!1,N.clear(),C(t)}function G(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const U=new Set;let j;function B(){j={r:0,c:[],p:j}}function V(){j.r||r(j.c),j=j.p}function F(t,e){t&&t.i&&(U.delete(t),t.i(e))}function H(t,e,n,o){if(t&&t.o){if(U.has(t))return;U.add(t),j.c.push((()=>{U.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function J(t,e){const n={},o={},r={$$scope:1};let c=t.length;for(;c--;){const s=t[c],l=e[c];if(l){for(const t in s)t in l||(o[t]=1);for(const t in l)r[t]||(n[t]=l[t],r[t]=1);t[c]=l}else for(const t in s)r[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}function Y(t){t&&t.c()}function q(t,e,o,s){const{fragment:l,on_mount:i,on_destroy:u,after_update:a}=t.$$;l&&l.m(e,o),s||T((()=>{const e=i.map(n).filter(c);u?u.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(T)}function W(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(_.push(t),O||(O=!0,I.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,n,c,s,l,u,a,d=[-1]){const f=i;C(e);const m=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:o(),dirty:d,skip_bound:!1,root:n.target||f.$$.root};a&&a(m.root);let $=!1;if(m.ctx=c?c(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return m.ctx&&l(m.ctx[t],m.ctx[t]=r)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](r),$&&z(e,t)),n})):[],m.update(),$=!0,r(m.before_update),m.fragment=!!s&&s(m.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);m.fragment&&m.fragment.l(t),t.forEach(p)}else m.fragment&&m.fragment.c();n.intro&&F(e.$$.fragment),q(e,n.target,n.anchor,n.customElement),D()}C(f)}class Q{$destroy(){W(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Z(n){let o,r,c,s,l,i,u=[{class:s=`button-wrapper ${n[2]} ${n[1]?"is-active":""}`},n[3]],a={};for(let t=0;t<u.length;t+=1)a=e(a,u[t]);return{c(){o=$("button"),r=$("div"),c=g(n[0]),b(o,a)},m(t,e){m(t,o,e),f(o,r),f(r,c),o.autofocus&&o.focus(),l||(i=w(o,"click",n[4]),l=!0)},p(t,[e]){1&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(c,t[0]),b(o,a=J(u,[6&e&&s!==(s=`button-wrapper ${t[2]} ${t[1]?"is-active":""}`)&&{class:s},8&e&&t[3]]))},i:t,o:t,d(t){t&&p(o),l=!1,i()}}}function X(t,n,o){const r=["text","isActive","class"];let c=d(n,r),{text:s}=n,{isActive:l}=n,{class:i=""}=n;return t.$$set=t=>{n=e(e({},n),a(t)),o(3,c=d(n,r)),"text"in t&&o(0,s=t.text),"isActive"in t&&o(1,l=t.isActive),"class"in t&&o(2,i=t.class)},[s,l,i,c,function(e){A.call(this,t,e)}]}class tt extends Q{constructor(t){super(),K(this,t,X,Z,s,{text:0,isActive:1,class:2})}}function et(t,e,n){const o=t.slice();return o[5]=e[n][0],o[6]=e[n][1],o[8]=n,o}function nt(e){let n,o,r,c,s,l=e[5]+"",i=e[6]+"";return{c(){n=$("tr"),o=$("td"),r=g(l),c=$("td"),s=g(i)},m(t,e){m(t,n,e),f(n,o),f(o,r),f(n,c),f(c,s)},p:t,d(t){t&&p(n)}}}function ot(t){let e,n,o,r,c,s,l,i,u,a,d;r=new tt({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[4]);let g=t[1],v=[];for(let e=0;e<g.length;e+=1)v[e]=nt(et(t,g,e));return{c(){e=$("div"),n=$("aside"),o=$("div"),Y(r.$$.fragment),c=h(),s=$("span"),s.textContent="Credits",l=h(),i=$("main"),u=$("table"),a=$("tbody");for(let t=0;t<v.length;t+=1)v[t].c();y(o,"class","flex align-items-center gap-15"),y(n,"class","flex flex-direction-column gap-15"),y(e,"class","flex")},m(t,p){m(t,e,p),f(e,n),f(n,o),q(r,o,null),f(o,c),f(o,s),f(e,l),f(e,i),f(i,u),f(u,a);for(let t=0;t<v.length;t+=1)v[t].m(a,null);d=!0},p(t,[e]){if(2&e){let n;for(g=t[1],n=0;n<g.length;n+=1){const o=et(t,g,n);v[n]?v[n].p(o,e):(v[n]=nt(o),v[n].c(),v[n].m(a,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=g.length}},i(t){d||(F(r.$$.fragment,t),d=!0)},o(t){H(r.$$.fragment,t),d=!1},d(t){t&&p(e),W(r),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(v,t)}}}function rt(t,e,n){let{setRoute:o}=e,{lastRoute:r}=e;function c(){o(r)}return t.$$set=t=>{"setRoute"in t&&n(2,o=t.setRoute),"lastRoute"in t&&n(3,r=t.lastRoute)},[c,[["Jordan O'Leary","Programming, Game Design, and Concept"],["theBlurryBox","Art and Animation"],["Valentin Cochet","@coc_val | Sound Effect Design"],["Jake O'Connell","UI Design"],["BananaMilk","Music"],["Lost Lumens, Brad Clark","Audio Mastering"],["Matt Sweda","Concept Ideation Assistance"]],o,r,()=>c()]}class ct extends Q{constructor(t){super(),K(this,t,rt,ot,s,{setRoute:2,lastRoute:3})}}function st(e){let n;return{c(){n=$("table"),n.innerHTML='<tr><td>Clear Active Spell</td> \n        <td><kbd class="hotkey-badge">Esc</kbd></td></tr> \n    <tr id="center-cam-info"><td>Free Look</td> \n        <td><kbd class="hotkey-badge">W</kbd> \n            <kbd class="hotkey-badge">A</kbd> \n            <kbd class="hotkey-badge">S</kbd> \n            <kbd class="hotkey-badge">D</kbd>\n            or Click and Drag Middle Mouse Button</td></tr> \n    <tr id="center-cam-tooltip"><td>Camera Follow Player</td> \n        <td><kbd class="hotkey-badge">Z</kbd></td></tr> \n    <tr><td>Ping Location</td> \n        <td><kbd class="hotkey-badge">C</kbd></td></tr> \n    <tr><td>Toggle Menu</td> \n        <td><kbd class="hotkey-badge">Esc</kbd></td></tr> \n    <tr><td>Inventory</td> \n        <td><kbd class="hotkey-badge">Tab</kbd>\n            /\n            <kbd class="hotkey-badge">i</kbd></td></tr> \n    <tr><td>View Walk Distance</td> \n        <td><kbd class="hotkey-badge">f</kbd></td></tr>',y(n,"id","keymapping")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}class lt extends Q{constructor(t){super(),K(this,t,null,st,s,{})}}function it(e){let n,o,c,s,l,i,u,a,d,g;return{c(){n=$("div"),o=$("label"),o.textContent="Robe Color",c=h(),s=$("input"),l=h(),i=$("label"),i.textContent="Player Name",u=h(),a=$("input"),y(o,"for","robe"),y(s,"type","color"),y(s,"name","robe"),y(i,"for","player-name"),y(a,"type","text"),y(a,"name","player-name"),y(n,"class","flex flex-direction-column gap-15")},m(t,r){m(t,n,r),f(n,o),f(n,c),f(n,s),k(s,e[1]),f(n,l),f(n,i),f(n,u),f(n,a),k(a,e[0]),d||(g=[w(s,"input",e[3]),w(s,"blur",e[4]),w(a,"input",e[5]),w(a,"input",e[6])],d=!0)},p(t,[e]){2&e&&k(s,t[1]),1&e&&a.value!==t[0]&&k(a,t[0])},i:t,o:t,d(t){t&&p(n),d=!1,r(g)}}}function ut(t,e,n){let o=localStorage.getItem("player-name"),r=`#${parseInt(localStorage.getItem("player-color")).toString(16)}`;const c=t=>parseInt(t.slice(1),16);return[o,r,c,function(){r=this.value,n(1,r)},()=>{window.configPlayer({color:c(r),name:o})},function(){o=this.value,n(0,o)},()=>{window.configPlayer({color:c(r),name:o})}]}class at extends Q{constructor(t){super(),K(this,t,ut,it,s,{})}}function dt(t){let e,n;return e=new lt({props:{setRoute:t[0],lastRoute:t[1]}}),{c(){Y(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.setRoute=t[0]),2&n&&(o.lastRoute=t[1]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function ft(t){let e,n;return e=new at({props:{setRoute:t[0],lastRoute:t[1]}}),{c(){Y(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.setRoute=t[0]),2&n&&(o.lastRoute=t[1]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function mt(e){let n,o,c,s,l,i,u,a,d,v,b,k;return d=new tt({props:{text:"Toggle FPS/Latency Monitor"}}),d.$on("click",e[9]),{c(){n=$("div"),o=g("Total Volume:\r\n                "),c=$("input"),s=g("\r\n                Music Volume:\r\n                "),l=$("input"),i=g("\r\n                Sound Effects Volume:\r\n                "),u=$("input"),a=h(),Y(d.$$.fragment),y(c,"type","range"),c.value=100*window.volume,y(c,"min","0"),y(c,"max","100"),y(l,"type","range"),l.value=100*window.volumeMusic,y(l,"min","0"),y(l,"max","100"),y(u,"type","range"),u.value=100*window.volumeGame,y(u,"min","0"),y(u,"max","100"),y(n,"class","flex flex-direction-column gap-15")},m(t,e){m(t,n,e),f(n,o),f(n,c),f(n,s),f(n,l),f(n,i),f(n,u),f(n,a),q(d,n,null),v=!0,b||(k=[w(c,"input",vt),w(l,"input",wt),w(u,"input",yt)],b=!0)},p:t,i(t){v||(F(d.$$.fragment,t),v=!0)},o(t){H(d.$$.fragment,t),v=!1},d(t){t&&p(n),W(d),b=!1,r(k)}}}function pt(t){let e,n,o,r,c,s,l,i,u,a,d,g,v,w,b,k,x,R;r=new tt({props:{type:"button",text:"ðŸ ” Back",class:"sm"}}),r.$on("click",t[5]),u=new tt({props:{isActive:t[2]==ht,type:"button",text:"Audio"}}),u.$on("click",t[6]),d=new tt({props:{isActive:t[2]==gt,type:"button",text:"Player Configuration"}}),d.$on("click",t[7]),v=new tt({props:{isActive:t[2]==$t,type:"button",text:"Controls"}}),v.$on("click",t[8]);const C=[mt,ft,dt],S=[];function A(t,e){return t[2]==ht?0:t[2]==gt?1:t[2]==$t?2:-1}return~(k=A(t))&&(x=S[k]=C[k](t)),{c(){e=$("div"),n=$("aside"),o=$("div"),Y(r.$$.fragment),c=h(),s=$("span"),s.textContent="Settings",l=h(),i=$("div"),Y(u.$$.fragment),a=h(),Y(d.$$.fragment),g=h(),Y(v.$$.fragment),w=h(),b=$("main"),x&&x.c(),y(o,"class","flex align-items-center gap-15"),y(i,"class","flex flex-direction-column gap-15"),y(n,"class","flex flex-direction-column gap-15"),y(e,"class","flex")},m(t,p){m(t,e,p),f(e,n),f(n,o),q(r,o,null),f(o,c),f(o,s),f(n,l),f(n,i),q(u,i,null),f(i,a),q(d,i,null),f(i,g),q(v,i,null),f(e,w),f(e,b),~k&&S[k].m(b,null),R=!0},p(t,[e]){const n={};4&e&&(n.isActive=t[2]==ht),u.$set(n);const o={};4&e&&(o.isActive=t[2]==gt),d.$set(o);const r={};4&e&&(r.isActive=t[2]==$t),v.$set(r);let c=k;k=A(t),k===c?~k&&S[k].p(t,e):(x&&(B(),H(S[c],1,1,(()=>{S[c]=null})),V()),~k?(x=S[k],x?x.p(t,e):(x=S[k]=C[k](t),x.c()),F(x,1),x.m(b,null)):x=null)},i(t){R||(F(r.$$.fragment,t),F(u.$$.fragment,t),F(d.$$.fragment,t),F(v.$$.fragment,t),F(x),R=!0)},o(t){H(r.$$.fragment,t),H(u.$$.fragment,t),H(d.$$.fragment,t),H(v.$$.fragment,t),H(x),R=!1},d(t){t&&p(e),W(r),W(u),W(d),W(v),~k&&S[k].d()}}}const $t="KEY_MAPPING",gt="PLAYER_CONFIG",ht="AUDIO";function vt(t){window.changeVolume(t.target.value/100)}function wt(t){window.changeVolumeMusic(t.target.value/100)}function yt(t){window.changeVolumeGame(t.target.value/100)}function bt(t,e,n){let{setRoute:o}=e,{lastRoute:r}=e,c=ht;function s(t){n(2,c=t)}function l(){o(r)}function i(t){if("Escape"===t.code)l()}var u;u=()=>{document.body.addEventListener("keydown",i)},S().$$.on_mount.push(u),function(t){S().$$.on_destroy.push(t)}((()=>{document.body.removeEventListener("keydown",i)}));return t.$$set=t=>{"setRoute"in t&&n(0,o=t.setRoute),"lastRoute"in t&&n(1,r=t.lastRoute)},[o,r,c,s,l,()=>l(),()=>s(ht),()=>s(gt),()=>s($t),()=>{window.monitorFPS()}]}class kt extends Q{constructor(t){super(),K(this,t,bt,pt,s,{setRoute:0,lastRoute:1})}}function xt(n){let o,r,c,s,l,i,a,d,g=[{class:i=`button-wrapper ${n[4]} ${n[3]?"is-active":""}`},n[5]],h={};for(let t=0;t<g.length;t+=1)h=e(h,g[t]);return{c(){o=$("a"),r=$("button"),c=$("div"),s=$("img"),u(s.src,l=n[0])||y(s,"src",l),y(s,"alt",n[1]),y(c,"class","svelte-d1fylv"),b(r,h),R(r,"svelte-d1fylv",!0),y(o,"href",n[2])},m(t,e){m(t,o,e),f(o,r),f(r,c),f(c,s),r.autofocus&&r.focus(),a||(d=w(r,"click",n[6]),a=!0)},p(t,[e]){1&e&&!u(s.src,l=t[0])&&y(s,"src",l),2&e&&y(s,"alt",t[1]),b(r,h=J(g,[24&e&&i!==(i=`button-wrapper ${t[4]} ${t[3]?"is-active":""}`)&&{class:i},32&e&&t[5]])),R(r,"svelte-d1fylv",!0),4&e&&y(o,"href",t[2])},i:t,o:t,d(t){t&&p(o),a=!1,d()}}}function Rt(t,n,o){const r=["src","alt","href","isActive","class"];let c=d(n,r),{src:s}=n,{alt:l}=n,{href:i}=n,{isActive:u}=n,{class:f=""}=n;return t.$$set=t=>{n=e(e({},n),a(t)),o(5,c=d(n,r)),"src"in t&&o(0,s=t.src),"alt"in t&&o(1,l=t.alt),"href"in t&&o(2,i=t.href),"isActive"in t&&o(3,u=t.isActive),"class"in t&&o(4,f=t.class)},[s,l,i,u,f,c,function(e){A.call(this,t,e)}]}class Ct extends Q{constructor(t){super(),K(this,t,Rt,xt,s,{src:0,alt:1,href:2,isActive:3,class:4})}}function St(t){let e,n,o,r,c={ctx:t,current:null,token:null,hasCatch:!0,pending:Nt,then:Pt,catch:_t,blocks:[,,,]};return function(t,e){const n=e.token={};function o(t,o,r,c){if(e.token!==n)return;e.resolved=c;let s=e.ctx;void 0!==r&&(s=s.slice(),s[r]=c);const l=t&&(e.current=t)(s);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(B(),H(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),V())})):e.block.d(1),l.c(),F(l,1),l.m(e.mount(),e.anchor),i=!0),e.block=l,e.blocks&&(e.blocks[o]=l),i&&D()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=S();if(t.then((t=>{C(n),o(e.then,1,e.value,t),C(null)}),(t=>{if(C(n),o(e.catch,2,e.error,t),C(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}(window.setupPixiPromise,c),{c(){e=$("div"),n=h(),o=v(),c.block.c(),y(e,"id","websocket-pie-connection-status")},m(t,s){m(t,e,s),m(t,n,s),m(t,o,s),c.block.m(t,c.anchor=s),c.mount=()=>o.parentNode,c.anchor=o,r=!0},p(e,n){!function(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}(c,t=e,n)},i(t){r||(F(c.block),r=!0)},o(t){for(let t=0;t<3;t+=1){H(c.blocks[t])}r=!1},d(t){t&&p(e),t&&p(n),t&&p(o),c.block.d(t),c.token=null,c=null}}}function At(e){let n,o,r,c,s,l,i;return o=new tt({props:{text:"Resume Game"}}),o.$on("click",Dt),c=new tt({props:{text:"Options"}}),c.$on("click",e[17]),l=new tt({props:{text:"Quit to Main Menu"}}),l.$on("click",e[14]),{c(){n=$("div"),Y(o.$$.fragment),r=h(),Y(c.$$.fragment),s=h(),Y(l.$$.fragment),y(n,"class","list svelte-97mupy")},m(t,e){m(t,n,e),q(o,n,null),f(n,r),q(c,n,null),f(n,s),q(l,n,null),i=!0},p:t,i(t){i||(F(o.$$.fragment,t),F(c.$$.fragment,t),F(l.$$.fragment,t),i=!0)},o(t){H(o.$$.fragment,t),H(c.$$.fragment,t),H(l.$$.fragment,t),i=!1},d(t){t&&p(n),W(o),W(c),W(l)}}}function _t(e){let n;return{c(){n=$("p"),n.textContent="Something went wrong loading assets",x(n,"color","red")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Pt(t){let e,n,o,r,c,s,l,i,u,a,d;n=new tt({props:{text:"New Run"}}),n.$on("click",t[10]),r=new tt({props:{text:"Multiplayer"}}),r.$on("click",t[11]),s=new tt({props:{text:"Options"}}),s.$on("click",t[18]);let g=!1===t[6]&&Mt(t);return{c(){e=$("div"),Y(n.$$.fragment),o=h(),Y(r.$$.fragment),c=h(),Y(s.$$.fragment),l=h(),i=$("br"),u=h(),g&&g.c(),a=v(),y(e,"class","list svelte-97mupy")},m(t,p){m(t,e,p),q(n,e,null),f(e,o),q(r,e,null),f(e,c),q(s,e,null),m(t,l,p),m(t,i,p),m(t,u,p),g&&g.m(t,p),m(t,a,p),d=!0},p(t,e){!1===t[6]?g?(g.p(t,e),64&e&&F(g,1)):(g=Mt(t),g.c(),F(g,1),g.m(a.parentNode,a)):g&&(B(),H(g,1,1,(()=>{g=null})),V())},i(t){d||(F(n.$$.fragment,t),F(r.$$.fragment,t),F(s.$$.fragment,t),F(g),d=!0)},o(t){H(n.$$.fragment,t),H(r.$$.fragment,t),H(s.$$.fragment,t),H(g),d=!1},d(t){t&&p(e),W(n),W(r),W(s),t&&p(l),t&&p(i),t&&p(u),g&&g.d(t),t&&p(a)}}}function Mt(t){let e,n,o,c,s,l,i,u,a,d,y,b,x;s=new tt({props:{disabled:t[9],text:"Connect"}}),s.$on("click",t[12]),i=new tt({props:{disabled:!t[9],text:"Disconnect"}}),i.$on("click",t[13]);let R=t[4]&&Et(),C=t[9]&&It(t);return{c(){e=g("Server Url\r\n            "),n=$("div"),o=$("input"),c=h(),Y(s.$$.fragment),l=h(),Y(i.$$.fragment),u=h(),R&&R.c(),a=h(),C&&C.c(),d=v()},m(r,p){m(r,e,p),m(r,n,p),f(n,o),k(o,t[7]),f(n,c),q(s,n,null),f(n,l),q(i,n,null),m(r,u,p),R&&R.m(r,p),m(r,a,p),C&&C.m(r,p),m(r,d,p),y=!0,b||(x=[w(o,"input",t[19]),w(o,"keypress",t[20])],b=!0)},p(t,e){128&e&&o.value!==t[7]&&k(o,t[7]);const n={};512&e&&(n.disabled=t[9]),s.$set(n);const r={};512&e&&(r.disabled=!t[9]),i.$set(r),t[4]?R||(R=Et(),R.c(),R.m(a.parentNode,a)):R&&(R.d(1),R=null),t[9]?C?(C.p(t,e),512&e&&F(C,1)):(C=It(t),C.c(),F(C,1),C.m(d.parentNode,d)):C&&(B(),H(C,1,1,(()=>{C=null})),V())},i(t){y||(F(s.$$.fragment,t),F(i.$$.fragment,t),F(C),y=!0)},o(t){H(s.$$.fragment,t),H(i.$$.fragment,t),H(C),y=!1},d(t){t&&p(e),t&&p(n),W(s),W(i),t&&p(u),R&&R.d(t),t&&p(a),C&&C.d(t),t&&p(d),b=!1,r(x)}}}function Et(t){let e,n;return{c(){e=g("Connecting...\r\n                "),n=$("div"),n.innerHTML='<div class="svelte-97mupy"></div> \n                    <div class="svelte-97mupy"></div> \n                    <div class="svelte-97mupy"></div> \n                    <div class="svelte-97mupy"></div>',y(n,"class","lds-ellipsis svelte-97mupy")},m(t,o){m(t,e,o),m(t,n,o)},d(t){t&&p(e),t&&p(n)}}}function It(t){let e,n,o,c,s,l,i,u,a,d;const f=[Tt,Ot],g=[];function y(t,e){return t[5]?0:1}return s=y(t),l=g[s]=f[s](t),{c(){e=$("p"),e.textContent="Game name",n=h(),o=$("input"),c=h(),l.c(),i=v()},m(r,l){m(r,e,l),m(r,n,l),m(r,o,l),k(o,t[8]),m(r,c,l),g[s].m(r,l),m(r,i,l),u=!0,a||(d=[w(o,"input",t[21]),w(o,"keypress",t[22])],a=!0)},p(t,e){256&e&&o.value!==t[8]&&k(o,t[8]);let n=s;s=y(t),s===n?g[s].p(t,e):(B(),H(g[n],1,1,(()=>{g[n]=null})),V(),l=g[s],l?l.p(t,e):(l=g[s]=f[s](t),l.c()),F(l,1),l.m(i.parentNode,i))},i(t){u||(F(l),u=!0)},o(t){H(l),u=!1},d(t){t&&p(e),t&&p(n),t&&p(o),t&&p(c),g[s].d(t),t&&p(i),a=!1,r(d)}}}function Ot(e){let n,o,r,c,s;return o=new tt({props:{text:"Host"}}),o.$on("click",e[15]),c=new tt({props:{text:"Join"}}),c.$on("click",e[15]),{c(){n=$("div"),Y(o.$$.fragment),r=h(),Y(c.$$.fragment),x(n,"display","flex")},m(t,e){m(t,n,e),q(o,n,null),f(n,r),q(c,n,null),s=!0},p:t,i(t){s||(F(o.$$.fragment,t),F(c.$$.fragment,t),s=!0)},o(t){H(o.$$.fragment,t),H(c.$$.fragment,t),s=!1},d(t){t&&p(n),W(o),W(c)}}}function Tt(e){let n,o;return{c(){n=g("Joining...\r\n                    "),o=$("div"),o.innerHTML='<div class="svelte-97mupy"></div> \n                        <div class="svelte-97mupy"></div> \n                        <div class="svelte-97mupy"></div> \n                        <div class="svelte-97mupy"></div>',y(o,"class","lds-ellipsis svelte-97mupy")},m(t,e){m(t,n,e),m(t,o,e)},p:t,i:t,o:t,d(t){t&&p(n),t&&p(o)}}}function Nt(e){let n;return{c(){n=g("loading assets...")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Lt(t){let e,n,o,r,c,s,l,i,u,a,d,g;n=new tt({props:{text:"Credits"}}),n.$on("click",t[16]),c=new Ct({props:{src:"ui/UI_Bird.png",alt:"Twitter @spellmasons",href:"https://twitter.com/spellmasons"}});const w=[At,St],b=[];function k(t,e){return t[3]?0:1}return u=k(t),a=b[u]=w[u](t),{c(){e=$("div"),Y(n.$$.fragment),o=h(),r=$("div"),Y(c.$$.fragment),s=h(),l=$("div"),i=h(),a.c(),d=v(),y(r,"class","flex gap svelte-97mupy"),y(l,"id","menu-version"),y(e,"id","corner"),y(e,"class","flex gap svelte-97mupy"),x(e,"flex-direction","column")},m(t,a){m(t,e,a),q(n,e,null),f(e,o),f(e,r),q(c,r,null),f(e,s),f(e,l),m(t,i,a),b[u].m(t,a),m(t,d,a),g=!0},p(t,[e]){let n=u;u=k(t),u===n?b[u].p(t,e):(B(),H(b[n],1,1,(()=>{b[n]=null})),V(),a=b[u],a?a.p(t,e):(a=b[u]=w[u](t),a.c()),F(a,1),a.m(d.parentNode,d))},i(t){g||(F(n.$$.fragment,t),F(c.$$.fragment,t),F(a),g=!0)},o(t){H(n.$$.fragment,t),H(c.$$.fragment,t),H(a),g=!1},d(t){t&&p(e),W(n),W(c),t&&p(i),b[u].d(t),t&&p(d)}}}function Dt(){window.closeMenu()}function Gt(t,e,n){let o,{setRoute:r}=e,{OPTIONS:c}=e,{CREDITS:s}=e,{inGame:l}=e,i=!1,u=!1;function a(){window.playMusic(),o&&h(),n(6,o=!1)}let d,f=new URLSearchParams(location.search),m=f.get("pieUrl"),p=f.get("game");function $(){n(9,d=window.isConnected()),n(4,i=!1)}function g(){if(m){console.log("Menu: Connect to server",m),n(4,i=!0);const t=new URL(location.href);return t.searchParams.set("pieUrl",m),window.history.pushState(null,null,t),window.connect_to_wsPie_server(m).catch(console.error).then($)}return Promise.reject("No wsUrl defined to connect to")}function h(){window.pieDisconnect().then($)}function v(){p?window.isConnected()?(console.log("Menu: Connect to game name",p),n(5,u=!0),window.joinRoom({name:p}).then((()=>{const t=new URL(location.href);t.searchParams.set("game",p),window.history.pushState(null,null,t)})).catch((t=>{console.error("Could not join room",t)})).then((()=>{n(5,u=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer"):console.log("Cannot join game until a gameName is provided")}window.tryAutoConnect=()=>{m&&(console.log("Menu: Start auto connect"),a(),g())};return t.$$set=t=>{"setRoute"in t&&n(0,r=t.setRoute),"OPTIONS"in t&&n(1,c=t.OPTIONS),"CREDITS"in t&&n(2,s=t.CREDITS),"inGame"in t&&n(3,l=t.inGame)},[r,c,s,l,i,u,o,m,p,d,function(){window.playMusic(),n(6,o=!0),window.startSingleplayer().then((()=>{$()}))},a,g,h,function(){if(confirm("Are you sure you want to quit to Main Menu?")){const t=new URL(location.href);t.searchParams.delete("game"),t.searchParams.delete("pieUrl"),window.history.pushState(null,null,t),window.exitCurrentGame().then($)}},v,()=>r(s),()=>r(c),()=>r(c),function(){m=this.value,n(7,m)},t=>{"Enter"==t.key&&g()},function(){p=this.value,n(8,p)},t=>{"Enter"==t.key&&v()}]}class Ut extends Q{constructor(t){super(),K(this,t,Gt,Lt,s,{setRoute:0,OPTIONS:1,CREDITS:2,inGame:3})}}function jt(t){let e,n;return e=new ct({props:{setRoute:t[3],lastRoute:t[0],route:!0}}),{c(){Y(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.lastRoute=t[0]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Bt(t){let e,n;return e=new kt({props:{setRoute:t[3],lastRoute:t[0],OPTIONS:Ht,route:!0}}),{c(){Y(e.$$.fragment)},m(t,o){q(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.lastRoute=t[0]),e.$set(o)},i(t){n||(F(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){W(e,t)}}}function Vt(t){let e,n,o,r,c,s,l;return s=new Ut({props:{setRoute:t[3],lastRoute:t[0],OPTIONS:Ht,CREDITS:Jt,inGame:t[2]}}),{c(){e=$("div"),n=$("div"),o=$("img"),c=h(),Y(s.$$.fragment),y(o,"id","logo"),u(o.src,r="ui/logo.png")||y(o,"src","ui/logo.png"),y(o,"alt","Spellmasons logo"),y(o,"width","800"),y(n,"id","menu-inner"),y(e,"id","menu")},m(t,r){m(t,e,r),f(e,n),f(n,o),f(n,c),q(s,n,null),l=!0},p(t,e){const n={};1&e&&(n.lastRoute=t[0]),4&e&&(n.inGame=t[2]),s.$set(n)},i(t){l||(F(s.$$.fragment,t),l=!0)},o(t){H(s.$$.fragment,t),l=!1},d(t){t&&p(e),W(s)}}}function Ft(t){let e,n,o,r;const c=[Vt,Bt,jt],s=[];function l(t,e){return t[1]==Yt?0:t[1]==Ht?1:t[1]==Jt?2:-1}return~(e=l(t))&&(n=s[e]=c[e](t)),{c(){n&&n.c(),o=v()},m(t,n){~e&&s[e].m(t,n),m(t,o,n),r=!0},p(t,[r]){let i=e;e=l(t),e===i?~e&&s[e].p(t,r):(n&&(B(),H(s[i],1,1,(()=>{s[i]=null})),V()),~e?(n=s[e],n?n.p(t,r):(n=s[e]=c[e](t),n.c()),F(n,1),n.m(o.parentNode,o)):n=null)},i(t){r||(F(n),r=!0)},o(t){H(n),r=!1},d(t){~e&&s[e].d(t),t&&p(o)}}}const Ht="OPTIONS",Jt="CREDITS",Yt="PLAY";function qt(t,e,n){let o,r;console.log("Menu: Svelte menu is running");let c=!1;function s(t){console.log("Menu: Route:",t),n(0,o=r),n(1,r=t),window.updateInGameMenuStatus()}return window.updateInGameMenuStatus=()=>{n(2,c=void 0!==window.player)},s(Yt),window.setMenu=s,[o,r,c,s]}return new class extends Q{constructor(t){super(),K(this,t,qt,Ft,s,{})}}({target:document.getElementById("menu-app")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
