var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function c(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function s(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function f(){return a("")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){t.value=null==n?"":n}function b(t,n,e,o){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,o?"important":"")}let g;function v(t){g=t}function w(){if(!g)throw new Error("Function called outside component initialization");return g}const k=[],y=[],$=[],x=[],_=Promise.resolve();let C=!1;function E(t){$.push(t)}const S=new Set;let P=0;function N(){const t=g;do{for(;P<k.length;){const t=k[P];P++,v(t),j(t.$$)}for(v(null),k.length=0,P=0;y.length;)y.pop()();for(let t=0;t<$.length;t+=1){const n=$[t];S.has(n)||(S.add(n),n())}$.length=0}while(k.length);for(;x.length;)x.pop()();C=!1,S.clear(),v(t)}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const M=new Set;let L;function R(t,n){t&&t.i&&(M.delete(t),t.i(n))}function U(t,n){const e=n.token={};function c(t,c,r,i){if(n.token!==e)return;n.resolved=i;let l=n.ctx;void 0!==r&&(l=l.slice(),l[r]=i);const u=t&&(n.current=t)(l);let s=!1;n.block&&(n.blocks?n.blocks.forEach(((t,e)=>{e!==c&&t&&(L={r:0,c:[],p:L},function(t,n,e,o){if(t&&t.o){if(M.has(t))return;M.add(t),L.c.push((()=>{M.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}(t,1,1,(()=>{n.blocks[e]===t&&(n.blocks[e]=null)})),L.r||o(L.c),L=L.p)})):n.block.d(1),u.c(),R(u,1),u.m(n.mount(),n.anchor),s=!0),n.block=u,n.blocks&&(n.blocks[c]=u),s&&N()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const e=w();if(t.then((t=>{v(e),c(n.then,1,n.value,t),v(null)}),(t=>{if(v(e),c(n.catch,2,n.error,t),v(null),!n.hasCatch)throw t})),n.current!==n.pending)return c(n.pending,0),!0}else{if(n.current!==n.then)return c(n.then,1,n.value,t),!0;n.resolved=t}var r}function A(t,n){-1===t.$$.dirty[0]&&(k.push(t),C||(C=!0,_.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function B(r,i,l,s,a,d,f,p=[-1]){const m=g;v(r);const h=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(m?m.$$.context:[])),callbacks:e(),dirty:p,skip_bound:!1,root:i.target||m.$$.root};f&&f(h.root);let b=!1;if(h.ctx=l?l(r,i.props||{},((t,n,...e)=>{const o=e.length?e[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),b&&A(r,t)),n})):[],h.update(),b=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();i.intro&&R(r.$$.fragment),function(t,e,r,i){const{fragment:l,on_mount:u,on_destroy:s,after_update:a}=t.$$;l&&l.m(e,r),i||E((()=>{const e=u.map(n).filter(c);s?s.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(E)}(r,i.target,i.anchor,i.customElement),N()}v(m)}function G(t){let n,e,c,r,i,a,h,b,g,v,w,k={ctx:t,current:null,token:null,hasCatch:!0,pending:H,then:z,catch:q};return U(window.setupPixiPromise,k),{c(){n=s("div"),e=d(),c=s("button"),c.textContent="Singleplayer",r=d(),i=s("button"),i.textContent="Multiplayer",a=d(),h=s("br"),b=d(),g=f(),k.block.c(),m(n,"id","websocket-pie-connection-status"),m(c,"class","svelte-ilablm"),m(i,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),l(o,c,u),l(o,r,u),l(o,i,u),l(o,a,u),l(o,h,u),l(o,b,u),l(o,g,u),k.block.m(o,k.anchor=u),k.mount=()=>g.parentNode,k.anchor=g,v||(w=[p(c,"click",t[6]),p(i,"click",t[7])],v=!0)},p(n,e){!function(t,n,e){const o=n.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,e)}(k,t=n,e)},d(t){t&&u(n),t&&u(e),t&&u(c),t&&u(r),t&&u(i),t&&u(a),t&&u(h),t&&u(b),t&&u(g),k.block.d(t),k.token=null,k=null,v=!1,o(w)}}}function O(n){let e,c,r,i,a;return{c(){e=s("button"),e.textContent="Resume Game",c=d(),r=s("button"),r.textContent="Back to Main Menu",m(e,"class","svelte-ilablm"),m(r,"class","svelte-ilablm")},m(t,o){l(t,e,o),l(t,c,o),l(t,r,o),i||(a=[p(e,"click",T),p(r,"click",n[11])],i=!0)},p:t,d(t){t&&u(e),t&&u(c),t&&u(r),i=!1,o(a)}}}function q(n){let e;return{c(){e=s("p"),e.textContent="Something went wrong loading assets",b(e,"color","red")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function z(t){let n,e=!1===t[1]&&V(t);return{c(){e&&e.c(),n=f()},m(t,o){e&&e.m(t,o),l(t,n,o)},p(t,o){!1===t[1]?e?e.p(t,o):(e=V(t),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(t){e&&e.d(t),t&&u(n)}}}function V(t){let n,e,c,r,b,g,v,w,k,y,$,x,_,C,E,S=t[0]&&D(),P=t[3]&&F(t);return{c(){n=a("Server Url\n      "),e=s("div"),c=s("input"),r=d(),b=s("button"),g=a("Connect"),v=d(),w=s("button"),k=a("Disconnect"),$=d(),S&&S.c(),x=d(),P&&P.c(),_=f(),m(c,"class","svelte-ilablm"),b.disabled=t[3],m(b,"class","svelte-ilablm"),w.disabled=y=!t[3],m(w,"class","svelte-ilablm")},m(o,u){l(o,n,u),l(o,e,u),i(e,c),h(c,t[2]),i(e,r),i(e,b),i(b,g),i(e,v),i(e,w),i(w,k),l(o,$,u),S&&S.m(o,u),l(o,x,u),P&&P.m(o,u),l(o,_,u),C||(E=[p(c,"input",t[12]),p(c,"keypress",t[13]),p(b,"click",t[8]),p(w,"click",t[9])],C=!0)},p(t,n){4&n&&c.value!==t[2]&&h(c,t[2]),8&n&&(b.disabled=t[3]),8&n&&y!==(y=!t[3])&&(w.disabled=y),t[0]?S||(S=D(),S.c(),S.m(x.parentNode,x)):S&&(S.d(1),S=null),t[3]?P?P.p(t,n):(P=F(t),P.c(),P.m(_.parentNode,_)):P&&(P.d(1),P=null)},d(t){t&&u(n),t&&u(e),t&&u($),S&&S.d(t),t&&u(x),P&&P.d(t),t&&u(_),C=!1,o(E)}}}function D(t){let n;return{c(){n=a("Connecting...")},m(t,e){l(t,n,e)},d(t){t&&u(n)}}}function F(t){let n,e,c,r,a,f,g,v,w,k;return{c(){n=s("p"),n.textContent="Game name",e=d(),c=s("input"),r=d(),a=s("div"),f=s("button"),f.textContent="Host",g=d(),v=s("button"),v.textContent="Join",m(c,"class","svelte-ilablm"),m(f,"class","svelte-ilablm"),m(v,"class","svelte-ilablm"),b(a,"display","flex")},m(o,u){l(o,n,u),l(o,e,u),l(o,c,u),h(c,t[4]),l(o,r,u),l(o,a,u),i(a,f),i(a,g),i(a,v),w||(k=[p(c,"input",t[14]),p(c,"keypress",t[15]),p(f,"click",t[10]),p(v,"click",t[10])],w=!0)},p(t,n){16&n&&c.value!==t[4]&&h(c,t[4])},d(t){t&&u(n),t&&u(e),t&&u(c),t&&u(r),t&&u(a),w=!1,o(k)}}}function H(n){let e;return{c(){e=a("loading assets...")},m(t,n){l(t,e,n)},p:t,d(t){t&&u(e)}}}function I(n){let e,o,c,r,f,h;function b(t,n){return t[5]?O:G}let g=b(n),v=g(n);return{c(){v.c(),e=d(),o=s("div"),c=a("Volume:\n  "),r=s("input"),m(r,"type","range"),r.value="100",m(r,"min","0"),m(r,"max","100"),m(r,"class","svelte-ilablm")},m(t,n){v.m(t,n),l(t,e,n),l(t,o,n),i(o,c),i(o,r),f||(h=p(r,"input",J),f=!0)},p(t,[n]){g===(g=b(t))&&v?v.p(t,n):(v.d(1),v=g(t),v&&(v.c(),v.m(e.parentNode,e)))},i:t,o:t,d(t){v.d(t),t&&u(e),t&&u(o),f=!1,h()}}}function J(t){window.changeVolume(t.target.value)}function T(){window.closeMenu()}function K(t,n,e){let o,c=!1;function r(){window.playMusic(),o&&f(),e(1,o=!1)}let i=new URLSearchParams(location.search);i.toString();let l,u,s=i.get("pieUrl");function a(){e(3,l=window.pie.isConnected()),e(0,c=!1)}function d(){if(s){e(0,c=!0),window.connect_to_wsPie_server(s).then(a);const t=new URLSearchParams(location.search);t.set("pieUrl",s),t.toString()}}function f(){window.pie.disconnect().then(a)}s&&(r(),d());let p=!1;function m(){window.pie.isConnected()?(console.log("Setup: Loading complete.. initialize game"),window.joinRoom({name:u}).then((()=>{const t=new URLSearchParams(location.search);t.set("game",u),t.toString(),e(5,p=!0)})).catch((()=>{e(5,p=!1)}))):console.error("Cannot join room until pieClient is connected to a pieServer")}return[c,o,s,l,u,p,function(){window.playMusic(),e(1,o=!0),window.connect_to_wsPie_server().then((()=>{window.joinRoom().then((()=>{e(5,p=!0)})).catch((()=>{e(5,p=!1)})),a()}))},r,d,f,m,function(){confirm("Are you sure you want to quit?")&&(window.exitCurrentGame(),e(5,p=!1))},function(){s=this.value,e(2,s)},t=>{"Enter"==t.key&&d()},function(){u=this.value,e(4,u)},t=>{"Enter"==t.key&&m()}]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),B(this,t,K,I,r,{})}}({target:document.getElementById("menu-inner")||document.body,props:{}})}();
//# sourceMappingURL=svelte-bundle.js.map
